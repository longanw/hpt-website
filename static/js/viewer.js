(()=>{"use strict";var n=[,(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.compatibilityParams=t.OptionKind=t.AppOptions=void 0;const i=Object.create(null);t.compatibilityParams=i;{const s=typeof navigator!=="undefined"&&navigator.userAgent||"";const r=typeof navigator!=="undefined"&&navigator.platform||"";const a=typeof navigator!=="undefined"&&navigator.maxTouchPoints||1;const c=/Android/.test(s);const d=/\b(iPad|iPhone|iPod)(?=;)/.test(s)||r==="MacIntel"&&a>1;const u=/CriOS/.test(s);(function e(){if(u){i.disableCreateObjectURL=true}})();(function e(){if(d||c){i.maxCanvasPixels=5242880}})()}const o={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};t.OptionKind=o;const l={annotationMode:{value:2,kind:o.VIEWER+o.PREFERENCE},cursorToolOnLoad:{value:0,kind:o.VIEWER+o.PREFERENCE},defaultUrl:{value:"",kind:o.VIEWER},defaultZoomValue:{value:"",kind:o.VIEWER+o.PREFERENCE},disableHistory:{value:false,kind:o.VIEWER},disablePageLabels:{value:false,kind:o.VIEWER+o.PREFERENCE},enablePermissions:{value:false,kind:o.VIEWER+o.PREFERENCE},enablePrintAutoRotate:{value:true,kind:o.VIEWER+o.PREFERENCE},enableScripting:{value:true,kind:o.VIEWER+o.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:o.VIEWER},externalLinkTarget:{value:0,kind:o.VIEWER+o.PREFERENCE},historyUpdateUrl:{value:false,kind:o.VIEWER+o.PREFERENCE},ignoreDestinationZoom:{value:false,kind:o.VIEWER+o.PREFERENCE},imageResourcesPath:{value:"../images/",kind:o.VIEWER},maxCanvasPixels:{value:16777216,compatibility:i.maxCanvasPixels,kind:o.VIEWER},pdfBugEnabled:{value:false,kind:o.VIEWER+o.PREFERENCE},printResolution:{value:150,kind:o.VIEWER},renderer:{value:"canvas",kind:o.VIEWER},sidebarViewOnLoad:{value:-1,kind:o.VIEWER+o.PREFERENCE},scrollModeOnLoad:{value:-1,kind:o.VIEWER+o.PREFERENCE},spreadModeOnLoad:{value:-1,kind:o.VIEWER+o.PREFERENCE},textLayerMode:{value:1,kind:o.VIEWER+o.PREFERENCE},useOnlyCssZoom:{value:false,kind:o.VIEWER+o.PREFERENCE},viewerCssTheme:{value:0,kind:o.VIEWER+o.PREFERENCE},viewOnLoad:{value:0,kind:o.VIEWER+o.PREFERENCE},cMapPacked:{value:true,kind:o.API},cMapUrl:{value:"../web/cmaps/",kind:o.API},disableAutoFetch:{value:false,kind:o.API+o.PREFERENCE},disableFontFace:{value:false,kind:o.API+o.PREFERENCE},disableRange:{value:false,kind:o.API+o.PREFERENCE},disableStream:{value:false,kind:o.API+o.PREFERENCE},docBaseUrl:{value:"",kind:o.API},enableXfa:{value:true,kind:o.API+o.PREFERENCE},fontExtraProperties:{value:false,kind:o.API},isEvalSupported:{value:true,kind:o.API},maxImageSize:{value:-1,kind:o.API},pdfBug:{value:false,kind:o.API},standardFontDataUrl:{value:"../fonts/",kind:o.API},verbosity:{value:1,kind:o.API},workerPort:{value:null,kind:o.WORKER},workerSrc:{value:"./js/libs/pdf.worker.min.js",kind:o.WORKER}};{l.disablePreferences={value:false,kind:o.VIEWER};l.locale={value:typeof navigator!=="undefined"?navigator.language:"en-US",kind:o.VIEWER};l.sandboxBundleSrc={value:"./js/libs/pdf.sandbox.js",kind:o.VIEWER};l.renderer.kind+=o.PREFERENCE}const h=Object.create(null);class n{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const t=h[e];if(t!==undefined){return t}const i=l[e];if(i!==undefined){return i.compatibility??i.value}return undefined}static getAll(e=null){const t=Object.create(null);for(const i in l){const n=l[i];if(e){if((e&n.kind)===0){continue}if(e===o.PREFERENCE){const r=n.value,a=typeof r;if(a==="boolean"||a==="string"||a==="number"&&Number.isInteger(r)){t[i]=r;continue}throw new Error(`Invalid type for preference: ${i}`)}}const s=h[i];t[i]=s!==undefined?s:n.compatibility??n.value}return t}static set(e,t){h[e]=t}static setAll(e){for(const t in e){h[t]=e[t]}}static remove(e){delete h[e]}static _hasUserOptions(){return Object.keys(h).length>0}}t.AppOptions=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFViewerApplication=t.PDFPrintServiceFactory=t.DefaultExternalServices=void 0;var _=i(3);var v=i(1);var c=i(4);var d=i(5);var u=i(6);var f=i(8);var p=i(9);var g=i(10);var m=i(12);var w=i(13);var b=i(14);var P=i(16);var y=i(17);var S=i(18);var E=i(19);var L=i(20);var C=i(21);var I=i(22);var T=i(23);var M=i(24);var N=i(25);var D=i(27);var B=i(36);var x=i(37);var l=i(38);const n=5e3;const V=1e4;const s=1e3;const k={UNKNOWN:-1,PREVIOUS:0,INITIAL:1};const o={AUTOMATIC:0,LIGHT:1,DARK:2};const A=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"];const O=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"];class r{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(e){}static updateFindMatchesCount(e){}static initPassiveLoading(e){}static async fallback(e){}static reportTelemetry(e){}static createDownloadManager(e){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(e){throw new Error("Not implemented: createL10n")}static createScripting(e){throw new Error("Not implemented: createScripting")}static get supportsIntegratedFind(){return(0,d.shadow)(this,"supportsIntegratedFind",false)}static get supportsDocumentFonts(){return(0,d.shadow)(this,"supportsDocumentFonts",true)}static get supportedMouseWheelZoomModifierKeys(){return(0,d.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:true,metaKey:true})}static get isInAutomation(){return(0,d.shadow)(this,"isInAutomation",false)}}t.DefaultExternalServices=r;const R={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,d.createPromiseCapability)(),_fellback:false,appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,pdfScriptingManager:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,isInitialViewSet:false,downloadComplete:false,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",_downloadUrl:"",externalServices:r,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,_saveInProgress:false,_docStats:null,_wheelUnusedTicks:0,_idleCallbacks:new Set,async initialize(e){this.preferences=this.externalServices.createPreferences();this.appConfig=e;await this._readPreferences();await this._parseHashParameters();this._forceCssTheme();await this._initializeL10n();if(this.isViewerEmbedded&&v.AppOptions.get("externalLinkTarget")===d.LinkTarget.NONE){v.AppOptions.set("externalLinkTarget",d.LinkTarget.TOP)}await this._initializeViewerComponents();this.bindEvents();this.bindWindowEvents();const t=e.appContainer||document.documentElement;this.l10n.translate(t).then(()=>{this.eventBus.dispatch("localized",{source:this})});this._initializedCapability.resolve()},async _readPreferences(){if(v.AppOptions.get("disablePreferences")){return}if(v.AppOptions._hasUserOptions()){console.warn("_readPreferences: The Preferences may override manually set AppOptions; "+'please use the "disablePreferences"-option in order to prevent that.')}try{v.AppOptions.setAll(await this.preferences.getAll())}catch(e){console.error(`_readPreferences: "${e?.message}".`)}},async _parseHashParameters(){if(!v.AppOptions.get("pdfBugEnabled")){return}const e=document.location.hash.substring(1);if(!e){return}const t=(0,_.parseQueryString)(e),i=[];if(t.get("disableworker")==="true"){i.push(h())}if(t.has("disablerange")){v.AppOptions.set("disableRange",t.get("disablerange")==="true")}if(t.has("disablestream")){v.AppOptions.set("disableStream",t.get("disablestream")==="true")}if(t.has("disableautofetch")){v.AppOptions.set("disableAutoFetch",t.get("disableautofetch")==="true")}if(t.has("disablefontface")){v.AppOptions.set("disableFontFace",t.get("disablefontface")==="true")}if(t.has("disablehistory")){v.AppOptions.set("disableHistory",t.get("disablehistory")==="true")}if(t.has("verbosity")){v.AppOptions.set("verbosity",t.get("verbosity")|0)}if(t.has("textlayer")){switch(t.get("textlayer")){case"off":v.AppOptions.set("textLayerMode",_.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":const n=this.appConfig.viewerContainer;n.classList.add(`textLayer-${t.get("textlayer")}`);break}}if(t.has("pdfbug")){v.AppOptions.set("pdfBug",true);v.AppOptions.set("fontExtraProperties",true);const s=t.get("pdfbug").split(",");i.push(F(s))}if(t.has("locale")){v.AppOptions.set("locale",t.get("locale"))}if(i.length===0){return}try{await Promise.all(i)}catch(e){console.error(`_parseHashParameters: "${e.message}".`)}},async _initializeL10n(){this.l10n=this.externalServices.createL10n({locale:v.AppOptions.get("locale")});const e=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=e},_forceCssTheme(){const i=v.AppOptions.get("viewerCssTheme");if(i===o.AUTOMATIC||!Object.values(o).includes(i)){return}try{const n=document.styleSheets[0];const s=n?.cssRules||[];for(let e=0,t=s.length;e<t;e++){const r=s[e];if(r instanceof CSSMediaRule&&r.media?.[0]==="(prefers-color-scheme: dark)"){if(i===o.LIGHT){n.deleteRule(e);return}const a=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(r.cssText);if(a?.[1]){n.deleteRule(e);n.insertRule(a[1],e)}return}}}catch(e){console.error(`_forceCssTheme: "${e?.message}".`)}},async _initializeViewerComponents(){const{appConfig:e,externalServices:t}=this;let i;if(e.eventBus){i=e.eventBus}else if(t.isInAutomation){i=new c.AutomationEventBus}else{i=new c.EventBus}this.eventBus=i;this.overlayManager=new f.OverlayManager;const n=new C.PDFRenderingQueue;n.onIdle=this._cleanup.bind(this);this.pdfRenderingQueue=n;const s=new S.PDFLinkService({eventBus:i,externalLinkTarget:v.AppOptions.get("externalLinkTarget"),externalLinkRel:v.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:v.AppOptions.get("ignoreDestinationZoom")});this.pdfLinkService=s;const r=t.createDownloadManager();this.downloadManager=r;const a=new b.PDFFindController({linkService:s,eventBus:i});this.findController=a;const o=new I.PDFScriptingManager({eventBus:i,sandboxBundleSrc:v.AppOptions.get("sandboxBundleSrc"),scriptingFactory:t,docPropertiesLookup:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=o;const l=e.mainContainer;const h=e.viewerContainer;this.pdfViewer=new D.PDFViewer({container:l,viewer:h,eventBus:i,renderingQueue:n,linkService:s,downloadManager:r,findController:a,scriptingManager:v.AppOptions.get("enableScripting")&&o,renderer:v.AppOptions.get("renderer"),l10n:this.l10n,textLayerMode:v.AppOptions.get("textLayerMode"),annotationMode:v.AppOptions.get("annotationMode"),imageResourcesPath:v.AppOptions.get("imageResourcesPath"),enablePrintAutoRotate:v.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:v.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:v.AppOptions.get("maxCanvasPixels"),enablePermissions:v.AppOptions.get("enablePermissions")});n.setViewer(this.pdfViewer);s.setViewer(this.pdfViewer);o.setViewer(this.pdfViewer);this.pdfThumbnailViewer=new N.PDFThumbnailViewer({container:e.sidebar.thumbnailView,eventBus:i,renderingQueue:n,linkService:s,l10n:this.l10n});n.setThumbnailViewer(this.pdfThumbnailViewer);if(!this.isViewerEmbedded&&!v.AppOptions.get("disableHistory")){this.pdfHistory=new P.PDFHistory({linkService:s,eventBus:i});s.setHistory(this.pdfHistory)}if(!this.supportsIntegratedFind){this.findBar=new w.PDFFindBar(e.findBar,i,this.l10n)}this.pdfDocumentProperties=new m.PDFDocumentProperties(e.documentProperties,this.overlayManager,i,this.l10n);this.pdfCursorTools=new u.PDFCursorTools({container:l,eventBus:i,cursorToolOnLoad:v.AppOptions.get("cursorToolOnLoad")});this.toolbar=new x.Toolbar(e.toolbar,i,this.l10n);this.secondaryToolbar=new B.SecondaryToolbar(e.secondaryToolbar,l,i);if(this.supportsFullscreen){this.pdfPresentationMode=new L.PDFPresentationMode({container:l,pdfViewer:this.pdfViewer,eventBus:i})}this.passwordPrompt=new p.PasswordPrompt(e.passwordOverlay,this.overlayManager,this.l10n,this.isViewerEmbedded);this.pdfOutlineViewer=new E.PDFOutlineViewer({container:e.sidebar.outlineView,eventBus:i,linkService:s});this.pdfAttachmentViewer=new g.PDFAttachmentViewer({container:e.sidebar.attachmentsView,eventBus:i,downloadManager:r});this.pdfLayerViewer=new y.PDFLayerViewer({container:e.sidebar.layersView,eventBus:i,l10n:this.l10n});this.pdfSidebar=new T.PDFSidebar({elements:e.sidebar,pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:i,l10n:this.l10n});this.pdfSidebar.onToggled=this.forceRendering.bind(this);this.pdfSidebarResizer=new M.PDFSidebarResizer(e.sidebarResizer,i,this.l10n)},run(e){this.initialize(e).then(H)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn(e){if(this.pdfViewer.isInPresentationMode){return}this.pdfViewer.increaseScale(e)},zoomOut(e){if(this.pdfViewer.isInPresentationMode){return}this.pdfViewer.decreaseScale(e)},zoomReset(){if(this.pdfViewer.isInPresentationMode){return}this.pdfViewer.currentScaleValue=_.DEFAULT_SCALE_VALUE},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},get supportsPrinting(){return De.instance.supportsPrinting},get supportsFullscreen(){return(0,d.shadow)(this,"supportsFullscreen",document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},get loadingBar(){const e=new _.ProgressBar("#loadingBar");return(0,d.shadow)(this,"loadingBar",e)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl(t="",e=null){this.url=t;this.baseUrl=t.split("#")[0];if(e){this._downloadUrl=e===t?this.baseUrl:e.split("#")[0]}let i=(0,d.getPdfFilenameFromUrl)(t,"");if(!i){try{i=decodeURIComponent((0,d.getFilenameFromUrl)(t))||t}catch(e){i=t}}this.setTitle(i)},setTitle(e){if(this.isViewerEmbedded){return}document.title=e},get _docFilename(){return this._contentDispositionFilename||(0,d.getPdfFilenameFromUrl)(this.url)},_hideViewBookmark(){const{toolbar:e,secondaryToolbar:t}=this.appConfig;e.viewBookmark.hidden=true;t.viewBookmarkButton.hidden=true},_cancelIdleCallbacks(){if(!this._idleCallbacks.size){return}for(const e of this._idleCallbacks){window.cancelIdleCallback(e)}this._idleCallbacks.clear()},async close(){this._unblockDocumentLoadEvent();this._hideViewBookmark();const{container:e}=this.appConfig.errorWrapper;e.hidden=true;if(!this.pdfLoadingTask){return}if(this.pdfDocument?.annotationStorage.size>0&&this._annotationStorageModified){try{await this.save({sourceEventType:"save"})}catch(e){}}const t=[];t.push(this.pdfLoadingTask.destroy());this.pdfLoadingTask=null;if(this.pdfDocument){this.pdfDocument=null;this.pdfThumbnailViewer.setDocument(null);this.pdfViewer.setDocument(null);this.pdfLinkService.setDocument(null);this.pdfDocumentProperties.setDocument(null)}this.pdfLinkService.externalLinkEnabled=true;this._fellback=false;this.store=null;this.isInitialViewSet=false;this.downloadComplete=false;this.url="";this.baseUrl="";this._downloadUrl="";this.documentInfo=null;this.metadata=null;this._contentDispositionFilename=null;this._contentLength=null;this._saveInProgress=false;this._docStats=null;this._cancelIdleCallbacks();t.push(this.pdfScriptingManager.destroyPromise);this.pdfSidebar.reset();this.pdfOutlineViewer.reset();this.pdfAttachmentViewer.reset();this.pdfLayerViewer.reset();this.pdfHistory?.reset();this.findBar?.reset();this.toolbar.reset();this.secondaryToolbar.reset();if(typeof PDFBug!=="undefined"){PDFBug.cleanup()}await Promise.all(t)},async open(e,t){if(this.pdfLoadingTask){await this.close()}const i=v.AppOptions.getAll(v.OptionKind.WORKER);for(const a in i){d.GlobalWorkerOptions[a]=i[a]}const n=Object.create(null);if(typeof e==="string"){this.setTitleUsingUrl(e,e);n.url=e}else if(e&&"byteLength"in e){n.data=e}else if(e.url&&e.originalUrl){this.setTitleUsingUrl(e.originalUrl,e.url);n.url=e.url}const s=v.AppOptions.getAll(v.OptionKind.API);for(const a in s){let e=s[a];if(a==="docBaseUrl"&&!e){}n[a]=e}if(t){for(const a in t){n[a]=t[a]}}const r=(0,d.getDocument)(n);this.pdfLoadingTask=r;r.onPassword=(e,t)=>{this.pdfLinkService.externalLinkEnabled=false;this.passwordPrompt.setUpdateCallback(e,t);this.passwordPrompt.open()};r.onProgress=({loaded:e,total:t})=>{this.progress(e/t)};r.onUnsupportedFeature=this.fallback.bind(this);return r.promise.then(e=>{this.load(e)},t=>{if(r!==this.pdfLoadingTask){return undefined}let e="loading_error";if(t instanceof d.InvalidPDFException){e="invalid_file_error"}else if(t instanceof d.MissingPDFException){e="missing_file_error"}else if(t instanceof d.UnexpectedResponseException){e="unexpected_response_error"}return this.l10n.get(e).then(e=>{this._documentError(e,{message:t?.message});throw t})})},_ensureDownloadComplete(){if(this.pdfDocument&&this.downloadComplete){return}throw new Error("PDF document not downloaded.")},async download({sourceEventType:e="download"}={}){const t=this._downloadUrl,i=this._docFilename;try{this._ensureDownloadComplete();const n=await this.pdfDocument.getData();const s=new Blob([n],{type:"application/pdf"});await this.downloadManager.download(s,t,i,e)}catch(e){await this.downloadManager.downloadUrl(t,i)}},async save({sourceEventType:t="download"}={}){if(this._saveInProgress){return}this._saveInProgress=true;await this.pdfScriptingManager.dispatchWillSave();const e=this._downloadUrl,i=this._docFilename;try{this._ensureDownloadComplete();const n=await this.pdfDocument.saveDocument();const s=new Blob([n],{type:"application/pdf"});await this.downloadManager.download(s,e,i,t)}catch(e){console.error(`Error when saving the document: ${e.message}`);await this.download({sourceEventType:t})}finally{await this.pdfScriptingManager.dispatchDidSave();this._saveInProgress=false}},downloadOrSave(e){if(this.pdfDocument?.annotationStorage.size>0){this.save(e)}else{this.download(e)}},fallback(e){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:e});if(this._fellback){return}this._fellback=true;this.externalServices.fallback({featureId:e,url:this.baseUrl}).then(e=>{if(!e){return}this.download({sourceEventType:"download"})})},_documentError(e,t=null){this._unblockDocumentLoadEvent();this._otherError(e,t)},_otherError(e,t=null){const i=[this.l10n.get("error_version_info",{version:d.version||"?",build:d.build||"?"})];if(t){i.push(this.l10n.get("error_message",{message:t.message}));if(t.stack){i.push(this.l10n.get("error_stack",{stack:t.stack}))}else{if(t.filename){i.push(this.l10n.get("error_file",{file:t.filename}))}if(t.lineNumber){i.push(this.l10n.get("error_line",{line:t.lineNumber}))}}}const n=this.appConfig.errorWrapper;const s=n.container;s.hidden=false;const r=n.errorMessage;r.textContent=e;const a=n.closeButton;a.onclick=function(){s.hidden=true};const o=n.errorMoreInfo;const l=n.moreInfoButton;const h=n.lessInfoButton;l.onclick=function(){o.hidden=false;l.hidden=true;h.hidden=false;o.style.height=o.scrollHeight+"px"};h.onclick=function(){o.hidden=true;l.hidden=false;h.hidden=true};l.oncontextmenu=_.noContextMenuHandler;h.oncontextmenu=_.noContextMenuHandler;a.oncontextmenu=_.noContextMenuHandler;l.hidden=false;h.hidden=true;Promise.all(i).then(e=>{o.value=e.join("\n")})},progress(e){if(this.downloadComplete){return}const t=Math.round(e*100);if(t>this.loadingBar.percent||isNaN(t)){this.loadingBar.percent=t;const i=this.pdfDocument?this.pdfDocument.loadingParams.disableAutoFetch:v.AppOptions.get("disableAutoFetch");if(i&&t){if(this.disableAutoFetchLoadingBarTimeout){clearTimeout(this.disableAutoFetchLoadingBarTimeout);this.disableAutoFetchLoadingBarTimeout=null}this.loadingBar.show();this.disableAutoFetchLoadingBarTimeout=setTimeout(()=>{this.loadingBar.hide();this.disableAutoFetchLoadingBarTimeout=null},n)}}},load(p){this.pdfDocument=p;p.getDownloadInfo().then(({length:e})=>{this._contentLength=e;this.downloadComplete=true;this.loadingBar.hide();s.then(()=>{this.eventBus.dispatch("documentloaded",{source:this})})});const t=p.getPageLayout().catch(function(){});const i=p.getPageMode().catch(function(){});const n=p.getOpenAction().catch(function(){});this.toolbar.setPagesCount(p.numPages,false);this.secondaryToolbar.setPagesCount(p.numPages);let e;e=null;this.pdfLinkService.setDocument(p,e);this.pdfDocumentProperties.setDocument(p,this.url);const g=this.pdfViewer;g.setDocument(p);const{firstPagePromise:s,onePageRendered:r,pagesPromise:m}=g;const a=this.pdfThumbnailViewer;a.setDocument(p);const o=(this.store=new l.ViewHistory(p.fingerprints[0])).getMultiple({page:null,zoom:_.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:_.SidebarView.UNKNOWN,scrollMode:_.ScrollMode.UNKNOWN,spreadMode:_.SpreadMode.UNKNOWN}).catch(()=>{return Object.create(null)});s.then(e=>{this.loadingBar.setWidth(this.appConfig.viewerContainer);this._initializeAnnotationStorageCallbacks(p);Promise.all([_.animationStarted,o,t,i,n]).then(async([e,t,i,n,s])=>{const r=v.AppOptions.get("viewOnLoad");this._initializePdfHistory({fingerprint:p.fingerprints[0],viewOnLoad:r,initialDest:s?.dest});const a=this.initialBookmark;const o=v.AppOptions.get("defaultZoomValue");let l=o?`zoom=${o}`:null;let h=null;let c=v.AppOptions.get("sidebarViewOnLoad");let d=v.AppOptions.get("scrollModeOnLoad");let u=v.AppOptions.get("spreadModeOnLoad");if(t.page&&r!==k.INITIAL){l=`page=${t.page}&zoom=${o||t.zoom},`+`${t.scrollLeft},${t.scrollTop}`;h=parseInt(t.rotation,10);if(c===_.SidebarView.UNKNOWN){c=t.sidebarView|0}if(d===_.ScrollMode.UNKNOWN){d=t.scrollMode|0}if(u===_.SpreadMode.UNKNOWN){u=t.spreadMode|0}}if(n&&c===_.SidebarView.UNKNOWN){c=(0,_.apiPageModeToSidebarView)(n)}if(i&&d===_.ScrollMode.UNKNOWN&&u===_.SpreadMode.UNKNOWN){const f=(0,_.apiPageLayoutToViewerModes)(i);u=f.spreadMode}this.setInitialView(l,{rotation:h,sidebarView:c,scrollMode:d,spreadMode:u});this.eventBus.dispatch("documentinit",{source:this});if(!this.isViewerEmbedded){g.focus()}await Promise.race([m,new Promise(e=>{setTimeout(e,V)})]);if(!a&&!l){return}if(g.hasEqualPageSizes){return}this.initialBookmark=a;g.currentScaleValue=g.currentScaleValue;this.setInitialView(l)}).catch(()=>{this.setInitialView()}).then(function(){g.update()})});m.then(()=>{this._unblockDocumentLoadEvent();this._initializeAutoPrint(p,n)},t=>{this.l10n.get("loading_error").then(e=>{this._documentError(e,{message:t?.message})})});r.then(e=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:e.timestamp});p.getOutline().then(e=>{if(p!==this.pdfDocument){return}this.pdfOutlineViewer.render({outline:e,pdfDocument:p})});p.getAttachments().then(e=>{if(p!==this.pdfDocument){return}this.pdfAttachmentViewer.render({attachments:e})});g.optionalContentConfigPromise.then(e=>{if(p!==this.pdfDocument){return}this.pdfLayerViewer.render({optionalContentConfig:e,pdfDocument:p})});if("requestIdleCallback"in window){const t=window.requestIdleCallback(()=>{this._collectTelemetry(p);this._idleCallbacks.delete(t)},{timeout:1e3});this._idleCallbacks.add(t)}});this._initializePageLabels(p);this._initializeMetadata(p)},async _scriptingDocProperties(e){if(!this.documentInfo){await new Promise(e=>{this.eventBus._on("metadataloaded",e,{once:true})});if(e!==this.pdfDocument){return null}}if(!this._contentLength){await new Promise(e=>{this.eventBus._on("documentloaded",e,{once:true})});if(e!==this.pdfDocument){return null}}return{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:this.metadata?.getRaw(),authors:this.metadata?.get("dc:creator"),numPages:this.pagesCount,URL:this.url}},async _collectTelemetry(e){const t=await this.pdfDocument.getMarkInfo();if(e!==this.pdfDocument){return}const i=t?.Marked||false;this.externalServices.reportTelemetry({type:"tagged",tagged:i})},async _initializeAutoPrint(e,t){const[i,n]=await Promise.all([t,!this.pdfViewer.enableScripting?e.getJavaScript():null]);if(e!==this.pdfDocument){return}let s=false;if(i?.action==="Print"){s=true}if(n){n.some(e=>{if(!e){return false}console.warn("Warning: JavaScript support is not enabled");this.fallback(d.UNSUPPORTED_FEATURES.javaScript);return true});if(!s){for(const r of n){if(r&&_.AutoPrintRegExp.test(r)){s=true;break}}}}if(s){this.triggerPrinting()}},async _initializeMetadata(e){const{info:t,metadata:i,contentDispositionFilename:n,contentLength:s}=await e.getMetadata();if(e!==this.pdfDocument){return}this.documentInfo=t;this.metadata=i;this._contentDispositionFilename??=n;this._contentLength??=s;console.log(`PDF ${e.fingerprints[0]} [${t.PDFFormatVersion} `+`${(t.Producer||"-").trim()} / ${(t.Creator||"-").trim()}] `+`(PDF.js: ${d.version||"-"})`);let r=t?.Title;const a=i?.get("dc:title");if(a){if(a!=="Untitled"&&!/[\uFFF0-\uFFFF]/g.test(a)){r=a}}if(r){this.setTitle(`${r} - ${n||document.title}`)}else if(n){this.setTitle(n)}if(t.IsXFAPresent&&!t.IsAcroFormPresent&&!e.isPureXfa){if(e.loadingParams.enableXfa){console.warn("Warning: XFA Foreground documents are not supported")}else{console.warn("Warning: XFA support is not enabled")}this.fallback(d.UNSUPPORTED_FEATURES.forms)}else if((t.IsAcroFormPresent||t.IsXFAPresent)&&!this.pdfViewer.renderForms){console.warn("Warning: Interactive form support is not enabled");this.fallback(d.UNSUPPORTED_FEATURES.forms)}if(t.IsSignaturesPresent){console.warn("Warning: Digital signatures validation is not supported");this.fallback(d.UNSUPPORTED_FEATURES.signatures)}let o="other";if(A.includes(t.PDFFormatVersion)){o=`v${t.PDFFormatVersion.replace(".","_")}`}let l="other";if(t.Producer){const c=t.Producer.toLowerCase();O.some(function(e){if(!c.includes(e)){return false}l=e.replace(/[ .-]/g,"_");return true})}let h=null;if(t.IsXFAPresent){h="xfa"}else if(t.IsAcroFormPresent){h="acroform"}this.externalServices.reportTelemetry({type:"documentInfo",version:o,generator:l,formType:h});this.eventBus.dispatch("metadataloaded",{source:this})},async _initializePageLabels(e){const t=await e.getPageLabels();if(e!==this.pdfDocument){return}if(!t||v.AppOptions.get("disablePageLabels")){return}const i=t.length;let n=0,s=0;for(let e=0;e<i;e++){const l=t[e];if(l===(e+1).toString()){n++}else if(l===""){s++}else{break}}if(n>=i||s>=i){return}const{pdfViewer:r,pdfThumbnailViewer:a,toolbar:o}=this;r.setPageLabels(t);a.setPageLabels(t);o.setPagesCount(i,true);o.setPageNumber(r.currentPageNumber,r.currentPageLabel)},_initializePdfHistory({fingerprint:e,viewOnLoad:t,initialDest:i=null}){if(!this.pdfHistory){return}this.pdfHistory.initialize({fingerprint:e,resetHistory:t===k.INITIAL,updateUrl:v.AppOptions.get("historyUpdateUrl")});if(this.pdfHistory.initialBookmark){this.initialBookmark=this.pdfHistory.initialBookmark;this.initialRotation=this.pdfHistory.initialRotation}if(i&&!this.initialBookmark&&t===k.UNKNOWN){this.initialBookmark=JSON.stringify(i);this.pdfHistory.push({explicitDest:i,pageNumber:null})}},_initializeAnnotationStorageCallbacks(e){if(e!==this.pdfDocument){return}const{annotationStorage:t}=e;t.onSetModified=()=>{window.addEventListener("beforeunload",Ne);this._annotationStorageModified=true};t.onResetModified=()=>{window.removeEventListener("beforeunload",Ne);delete this._annotationStorageModified}},setInitialView(e,{rotation:t,sidebarView:i,scrollMode:n,spreadMode:s}={}){const r=e=>{if((0,_.isValidRotation)(e)){this.pdfViewer.pagesRotation=e}};const a=(e,t)=>{if((0,_.isValidScrollMode)(e)){this.pdfViewer.scrollMode=e}if((0,_.isValidSpreadMode)(t)){this.pdfViewer.spreadMode=t}};this.isInitialViewSet=true;this.pdfSidebar.setInitialView(i);a(n,s);if(this.initialBookmark){r(this.initialRotation);delete this.initialRotation;this.pdfLinkService.setHash(this.initialBookmark);this.initialBookmark=null}else if(e){r(t);this.pdfLinkService.setHash(e)}this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel);this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber);if(!this.pdfViewer.currentScaleValue){this.pdfViewer.currentScaleValue=_.DEFAULT_SCALE_VALUE}},_cleanup(){if(!this.pdfDocument){return}this.pdfViewer.cleanup();this.pdfThumbnailViewer.cleanup();this.pdfDocument.cleanup(this.pdfViewer.renderer===_.RendererType.SVG)},forceRendering(){this.pdfRenderingQueue.printing=!!this.printService;this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.isThumbnailViewVisible;this.pdfRenderingQueue.renderHighestPriority()},beforePrint(){this.pdfScriptingManager.dispatchWillPrint();if(this.printService){return}if(!this.supportsPrinting){this.l10n.get("printing_not_supported").then(e=>{this._otherError(e)});return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("printing_not_ready").then(e=>{window.alert(e)});return}const e=this.pdfViewer.getPagesOverview();const t=this.appConfig.printContainer;const i=v.AppOptions.get("printResolution");const n=this.pdfViewer.optionalContentConfigPromise;const s=De.instance.createPrintService(this.pdfDocument,e,t,i,n,this.l10n);this.printService=s;this.forceRendering();s.layout();this.externalServices.reportTelemetry({type:"print"})},afterPrint(){this.pdfScriptingManager.dispatchDidPrint();if(this.printService){this.printService.destroy();this.printService=null;this.pdfDocument?.annotationStorage.resetModified()}this.forceRendering()},rotatePages(e){this.pdfViewer.pagesRotation+=e},requestPresentationMode(){this.pdfPresentationMode?.request()},triggerPrinting(){if(!this.supportsPrinting){return}},bindEvents(){const{eventBus:e,_boundEvents:t}=this;t.beforePrint=this.beforePrint.bind(this);t.afterPrint=this.afterPrint.bind(this);e._on("resize",Q);e._on("hashchange",Y);e._on("beforeprint",t.beforePrint);e._on("afterprint",t.afterPrint);e._on("pagerendered",W);e._on("updateviewarea",K);e._on("pagechanging",ye);e._on("scalechanging",be);e._on("rotationchanging",Pe);e._on("sidebarviewchanged",X);e._on("pagemode",j);e._on("namedaction",$);e._on("presentationmodechanged",G);e._on("presentationmode",te);e._on("firstpage",ie);e._on("lastpage",ne);e._on("nextpage",se);e._on("previouspage",re);e._on("zoomin",ae);e._on("zoomout",oe);e._on("zoomreset",le);e._on("pagenumberchanged",he);e._on("scalechanged",ce);e._on("rotatecw",de);e._on("rotateccw",ue);e._on("optionalcontentconfig",fe);e._on("switchscrollmode",pe);e._on("scrollmodechanged",q);e._on("switchspreadmode",ge);e._on("spreadmodechanged",Z);e._on("documentproperties",me);e._on("findfromurlhash",_e);e._on("updatefindmatchescount",ve);e._on("updatefindcontrolstate",we);if(v.AppOptions.get("pdfBug")){t.reportPageStatsPDFBug=U;e._on("pagerendered",t.reportPageStatsPDFBug);e._on("pagechanging",t.reportPageStatsPDFBug)}e._on("fileinputchange",J);e._on("openfile",ee)},bindWindowEvents(){const{eventBus:t,_boundEvents:e}=this;e.windowResize=()=>{t.dispatch("resize",{source:window})};e.windowHashChange=()=>{t.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})};e.windowBeforePrint=()=>{t.dispatch("beforeprint",{source:window})};e.windowAfterPrint=()=>{t.dispatch("afterprint",{source:window})};e.windowUpdateFromSandbox=e=>{t.dispatch("updatefromsandbox",{source:window,detail:e.detail})};window.addEventListener("visibilitychange",Se);window.addEventListener("wheel",Ce,{passive:false});window.addEventListener("touchstart",Ie,{passive:false});window.addEventListener("click",Te);window.addEventListener("keydown",Me);window.addEventListener("resize",e.windowResize);window.addEventListener("hashchange",e.windowHashChange);window.addEventListener("beforeprint",e.windowBeforePrint);window.addEventListener("afterprint",e.windowAfterPrint);window.addEventListener("updatefromsandbox",e.windowUpdateFromSandbox)},unbindEvents(){const{eventBus:e,_boundEvents:t}=this;e._off("resize",Q);e._off("hashchange",Y);e._off("beforeprint",t.beforePrint);e._off("afterprint",t.afterPrint);e._off("pagerendered",W);e._off("updateviewarea",K);e._off("pagechanging",ye);e._off("scalechanging",be);e._off("rotationchanging",Pe);e._off("sidebarviewchanged",X);e._off("pagemode",j);e._off("namedaction",$);e._off("presentationmodechanged",G);e._off("presentationmode",te);e._off("firstpage",ie);e._off("lastpage",ne);e._off("nextpage",se);e._off("previouspage",re);e._off("zoomin",ae);e._off("zoomout",oe);e._off("zoomreset",le);e._off("pagenumberchanged",he);e._off("scalechanged",ce);e._off("rotatecw",de);e._off("rotateccw",ue);e._off("optionalcontentconfig",fe);e._off("switchscrollmode",pe);e._off("scrollmodechanged",q);e._off("switchspreadmode",ge);e._off("spreadmodechanged",Z);e._off("documentproperties",me);e._off("findfromurlhash",_e);e._off("updatefindmatchescount",ve);e._off("updatefindcontrolstate",we);if(t.reportPageStatsPDFBug){e._off("pagerendered",t.reportPageStatsPDFBug);e._off("pagechanging",t.reportPageStatsPDFBug);t.reportPageStatsPDFBug=null}e._off("fileinputchange",J);e._off("openfile",ee);t.beforePrint=null;t.afterPrint=null},unbindWindowEvents(){const{_boundEvents:e}=this;window.removeEventListener("visibilitychange",Se);window.removeEventListener("wheel",Ce,{passive:false});window.removeEventListener("touchstart",Ie,{passive:false});window.removeEventListener("click",Te);window.removeEventListener("keydown",Me);window.removeEventListener("resize",e.windowResize);window.removeEventListener("hashchange",e.windowHashChange);window.removeEventListener("beforeprint",e.windowBeforePrint);window.removeEventListener("afterprint",e.windowAfterPrint);window.removeEventListener("updatefromsandbox",e.windowUpdateFromSandbox);e.windowResize=null;e.windowHashChange=null;e.windowBeforePrint=null;e.windowAfterPrint=null;e.windowUpdateFromSandbox=null},accumulateWheelTicks(e){if(this._wheelUnusedTicks>0&&e<0||this._wheelUnusedTicks<0&&e>0){this._wheelUnusedTicks=0}this._wheelUnusedTicks+=e;const t=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));this._wheelUnusedTicks-=t;return t},_unblockDocumentLoadEvent(){if(document.blockUnblockOnload){document.blockUnblockOnload(false)}this._unblockDocumentLoadEvent=()=>{}},_reportDocumentStatsTelemetry(){const{stats:e}=this.pdfDocument;if(e!==this._docStats){this._docStats=e;this.externalServices.reportTelemetry({type:"documentStats",stats:e})}},get scriptingReady(){return this.pdfScriptingManager.ready}};t.PDFViewerApplication=R;let a;{const Be=["null","http://mozilla.github.io","https://mozilla.github.io"];a=function(e){if(e===undefined){return}try{const t=new URL(window.location.href).origin||"null";if(Be.includes(t)){return}const{origin:i,protocol:n}=new URL(e,window.location.href);if(i!==t&&n!=="blob:"){throw new Error("file origin does not match viewer's")}}catch(t){R.l10n.get("loading_error").then(e=>{R._documentError(e,{message:t?.message})});throw t}}}async function h(){if(!d.GlobalWorkerOptions.workerSrc){d.GlobalWorkerOptions.workerSrc=v.AppOptions.get("workerSrc")}await(0,d.loadScript)(d.PDFWorker.workerSrc)}async function F(e){const{debuggerScriptPath:t,mainContainer:i}=R.appConfig;await(0,d.loadScript)(t);PDFBug.init({OPS:d.OPS},i,e)}function U({pageNumber:e}){if(typeof Stats==="undefined"||!Stats.enabled){return}const t=R.pdfViewer.getPageView(e-1);const i=t?.pdfPage?.stats;if(!i){return}Stats.add(e,i)}function H(){const e=R.appConfig;let t;const i=document.location.search.substring(1);const n=(0,_.parseQueryString)(i);t=n.get("file")??v.AppOptions.get("defaultUrl");a(t);const s=document.createElement("input");s.id=e.openFileInputName;s.className="fileInput";s.setAttribute("type","file");s.oncontextmenu=_.noContextMenuHandler;document.body.appendChild(s);if(!window.File||!window.FileReader||!window.FileList||!window.Blob){e.toolbar.openFile.hidden=true;e.secondaryToolbar.openFileButton.hidden=true}else{s.value=null}s.addEventListener("change",function(e){const t=e.target.files;if(!t||t.length===0){return}R.eventBus.dispatch("fileinputchange",{source:this,fileInput:e.target})});e.mainContainer.addEventListener("dragover",function(e){e.preventDefault();e.dataTransfer.dropEffect="move"});e.mainContainer.addEventListener("drop",function(e){e.preventDefault();const t=e.dataTransfer.files;if(!t||t.length===0){return}R.eventBus.dispatch("fileinputchange",{source:this,fileInput:e.dataTransfer})});if(!R.supportsDocumentFonts){v.AppOptions.set("disableFontFace",true);R.l10n.get("web_fonts_disabled").then(e=>{console.warn(e)})}if(!R.supportsPrinting){e.toolbar.print.classList.add("hidden");e.secondaryToolbar.printButton.classList.add("hidden")}if(!R.supportsFullscreen){e.toolbar.presentationModeButton.classList.add("hidden");e.secondaryToolbar.presentationModeButton.classList.add("hidden")}if(R.supportsIntegratedFind){e.toolbar.viewFind.classList.add("hidden")}e.mainContainer.addEventListener("transitionend",function(e){if(e.target===this){R.eventBus.dispatch("resize",{source:this})}},true);try{z(t)}catch(t){R.l10n.get("loading_error").then(e=>{R._documentError(e,t)})}}function z(e){if(e){R.open(e)}else{R._hideViewBookmark()}}function W({pageNumber:e,error:t}){if(e===R.page){R.toolbar.updateLoadingIndicatorState(false)}if(R.pdfSidebar.isThumbnailViewVisible){const i=R.pdfViewer.getPageView(e-1);const n=R.pdfThumbnailViewer.getThumbnail(e-1);if(i&&n){n.setImage(i)}}if(t){R.l10n.get("rendering_error").then(e=>{R._otherError(e,t)})}R._reportDocumentStatsTelemetry()}function j({mode:e}){let t;switch(e){case"thumbs":t=_.SidebarView.THUMBS;break;case"bookmarks":case"outline":t=_.SidebarView.OUTLINE;break;case"attachments":t=_.SidebarView.ATTACHMENTS;break;case"layers":t=_.SidebarView.LAYERS;break;case"none":t=_.SidebarView.NONE;break;default:console.error('Invalid "pagemode" hash parameter: '+e);return}R.pdfSidebar.switchView(t,true)}function $(e){switch(e.action){case"GoToPage":R.appConfig.toolbar.pageNumber.select();break;case"Find":if(!R.supportsIntegratedFind){R.findBar.toggle()}break;case"Print":break;case"SaveAs":break}}function G(e){R.pdfViewer.presentationModeState=e.state}function X(e){R.pdfRenderingQueue.isThumbnailViewEnabled=R.pdfSidebar.isThumbnailViewVisible;if(R.isInitialViewSet){R.store?.set("sidebarView",e.view).catch(()=>{})}}function K(e){const t=e.location;if(R.isInitialViewSet){R.store?.setMultiple({page:t.pageNumber,zoom:t.scale,scrollLeft:t.left,scrollTop:t.top,rotation:t.rotation}).catch(()=>{})}const i=R.pdfLinkService.getAnchorUrl(t.pdfOpenParams);R.appConfig.toolbar.viewBookmark.href=i;R.appConfig.secondaryToolbar.viewBookmarkButton.href=i;const n=R.pdfViewer.getPageView(R.page-1);const s=n?.renderingState!==_.RenderingStates.FINISHED;R.toolbar.updateLoadingIndicatorState(s)}function q(e){if(R.isInitialViewSet){R.store?.set("scrollMode",e.mode).catch(()=>{})}}function Z(e){if(R.isInitialViewSet){R.store?.set("spreadMode",e.mode).catch(()=>{})}}function Q(){const{pdfDocument:e,pdfViewer:t}=R;if(!e){return}const i=t.currentScaleValue;if(i==="auto"||i==="page-fit"||i==="page-width"){t.currentScaleValue=i}t.update()}function Y(e){const t=e.hash;if(!t){return}if(!R.isInitialViewSet){R.initialBookmark=t}else if(!R.pdfHistory?.popStateInProgress){R.pdfLinkService.setHash(t)}}let J,ee;{J=function(e){if(R.pdfViewer?.isInPresentationMode){return}const t=e.fileInput.files[0];if(!v.compatibilityParams.disableCreateObjectURL){let e=URL.createObjectURL(t);if(t.name){e={url:e,originalUrl:t.name}}R.open(e)}else{R.setTitleUsingUrl(t.name);const i=new FileReader;i.onload=function e(t){const i=t.target.result;R.open(new Uint8Array(i))};i.readAsArrayBuffer(t)}};ee=function(e){const t=R.appConfig.openFileInputName;document.getElementById(t).click()}}function te(){R.requestPresentationMode()}function ie(){if(R.pdfDocument){R.page=1}}function ne(){if(R.pdfDocument){R.page=R.pagesCount}}function se(){R.pdfViewer.nextPage()}function re(){R.pdfViewer.previousPage()}function ae(){R.zoomIn()}function oe(){R.zoomOut()}function le(){R.zoomReset()}function he(e){const t=R.pdfViewer;if(e.value!==""){R.pdfLinkService.goToPage(e.value)}if(e.value!==t.currentPageNumber.toString()&&e.value!==t.currentPageLabel){R.toolbar.setPageNumber(t.currentPageNumber,t.currentPageLabel)}}function ce(e){R.pdfViewer.currentScaleValue=e.value}function de(){R.rotatePages(90)}function ue(){R.rotatePages(-90)}function fe(e){R.pdfViewer.optionalContentConfigPromise=e.promise}function pe(e){R.pdfViewer.scrollMode=e.mode}function ge(e){R.pdfViewer.spreadMode=e.mode}function me(){R.pdfDocumentProperties.open()}function _e(e){R.eventBus.dispatch("find",{source:e.source,type:"",query:e.query,phraseSearch:e.phraseSearch,caseSensitive:false,entireWord:false,highlightAll:true,findPrevious:false})}function ve({matchesCount:e}){if(R.supportsIntegratedFind){R.externalServices.updateFindMatchesCount(e)}else{R.findBar.updateResultsCount(e)}}function we({state:e,previous:t,matchesCount:i,rawQuery:n}){if(R.supportsIntegratedFind){R.externalServices.updateFindControlState({result:e,findPrevious:t,matchesCount:i,rawQuery:n})}else{R.findBar.updateUIState(e,t,i)}}function be(e){R.toolbar.setPageScale(e.presetValue,e.scale);R.pdfViewer.update()}function Pe(e){R.pdfThumbnailViewer.pagesRotation=e.pagesRotation;R.forceRendering();R.pdfViewer.currentPageNumber=e.pageNumber}function ye({pageNumber:e,pageLabel:t}){R.toolbar.setPageNumber(e,t);R.secondaryToolbar.setPageNumber(e);if(R.pdfSidebar.isThumbnailViewVisible){R.pdfThumbnailViewer.scrollThumbnailIntoView(e)}}function Se(e){if(document.visibilityState==="visible"){Le()}}let Ee=null;function Le(){if(Ee){clearTimeout(Ee)}Ee=setTimeout(function(){Ee=null},s)}function Ce(t){const{pdfViewer:i,supportedMouseWheelZoomModifierKeys:e}=R;if(i.isInPresentationMode){return}if(t.ctrlKey&&e.ctrlKey||t.metaKey&&e.metaKey){t.preventDefault();if(Ee||document.visibilityState==="hidden"){return}const n=i.currentScale;const s=(0,_.normalizeWheelEventDirection)(t);let e=0;if(t.deltaMode===WheelEvent.DOM_DELTA_LINE||t.deltaMode===WheelEvent.DOM_DELTA_PAGE){if(Math.abs(s)>=1){e=Math.sign(s)}else{e=R.accumulateWheelTicks(s)}}else{const a=30;e=R.accumulateWheelTicks(s/a)}if(e<0){R.zoomOut(-e)}else if(e>0){R.zoomIn(e)}const r=i.currentScale;if(n!==r){const o=r/n-1;const l=i.container.getBoundingClientRect();const h=t.clientX-l.left;const c=t.clientY-l.top;i.container.scrollLeft+=h*o;i.container.scrollTop+=c*o}}else{Le()}}function Ie(e){if(e.touches.length>1){e.preventDefault()}}function Te(e){if(!R.secondaryToolbar.isOpen){return}const t=R.appConfig;if(R.pdfViewer.containsElement(e.target)||t.toolbar.container.contains(e.target)&&e.target!==t.secondaryToolbar.toggleButton){R.secondaryToolbar.close()}}function Me(i){if(R.overlayManager.active){return}const{eventBus:e,pdfViewer:n}=R;const s=n.isInPresentationMode;let r=false,a=false;const t=(i.ctrlKey?1:0)|(i.altKey?2:0)|(i.shiftKey?4:0)|(i.metaKey?8:0);if(t===1||t===8||t===5||t===12){switch(i.keyCode){case 70:if(!R.supportsIntegratedFind&&!i.shiftKey){R.findBar.open();r=true}break;case 71:if(!R.supportsIntegratedFind){const{state:h}=R.findController;if(h){const c=Object.assign(Object.create(null),h,{source:window,type:"again",findPrevious:t===5||t===12});e.dispatch("find",c)}r=true}break;case 61:case 107:case 187:case 171:if(!s){R.zoomIn()}r=true;break;case 173:case 109:case 189:if(!s){R.zoomOut()}r=true;break;case 48:case 96:if(!s){setTimeout(function(){R.zoomReset()});r=false}break;case 38:if(s||R.page>1){R.page=1;r=true;a=true}break;case 40:if(s||R.page<R.pagesCount){R.page=R.pagesCount;r=true;a=true}break}}if(t===1||t===8){switch(i.keyCode){case 83:break;case 79:{e.dispatch("openfile",{source:window});r=true}break}}if(t===3||t===10){switch(i.keyCode){case 80:break;case 71:R.appConfig.toolbar.pageNumber.select();r=true;break}}if(r){if(a&&!s){n.focus()}i.preventDefault();return}const o=(0,_.getActiveOrFocusedElement)();const l=o?.tagName.toUpperCase();if(l==="INPUT"||l==="TEXTAREA"||l==="SELECT"||o?.isContentEditable){if(i.keyCode!==27){return}}if(t===0){let e=0,t=false;switch(i.keyCode){case 38:case 33:if(n.isVerticalScrollbarEnabled){t=true}e=-1;break;case 8:if(!s){t=true}e=-1;break;case 37:if(n.isHorizontalScrollbarEnabled){t=true}case 75:case 80:e=-1;break;case 27:if(R.secondaryToolbar.isOpen){R.secondaryToolbar.close();r=true}if(!R.supportsIntegratedFind&&R.findBar.opened){R.findBar.close();r=true}break;case 40:case 34:if(n.isVerticalScrollbarEnabled){t=true}e=1;break;case 13:case 32:if(!s){t=true}e=1;break;case 39:if(n.isHorizontalScrollbarEnabled){t=true}case 74:case 78:e=1;break;case 36:if(s||R.page>1){R.page=1;r=true;a=true}break;case 35:if(s||R.page<R.pagesCount){R.page=R.pagesCount;r=true;a=true}break;case 83:R.pdfCursorTools.switchTool(u.CursorTool.SELECT);break;case 72:R.pdfCursorTools.switchTool(u.CursorTool.HAND);break;case 82:R.rotatePages(90);break;case 115:R.pdfSidebar.toggle();break}if(e!==0&&(!t||n.currentScaleValue==="page-fit")){if(e>0){n.nextPage()}else{n.previousPage()}r=true}}if(t===4){switch(i.keyCode){case 13:case 32:if(!s&&n.currentScaleValue!=="page-fit"){break}n.previousPage();r=true;break;case 82:R.rotatePages(-90);break}}if(!r&&!s){if(i.keyCode>=33&&i.keyCode<=40||i.keyCode===32&&l!=="BUTTON"){a=true}}if(a&&!n.containsElement(o)){n.focus()}if(r){i.preventDefault()}}function Ne(e){e.preventDefault();e.returnValue="";return false}const De={instance:{supportsPrinting:false,createPrintService(){throw new Error("Not implemented: createPrintService")}}};t.PDFPrintServiceFactory=De},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.animationStarted=t.VERTICAL_PADDING=t.UNKNOWN_SCALE=t.TextLayerMode=t.SpreadMode=t.SidebarView=t.ScrollMode=t.SCROLLBAR_PADDING=t.RenderingStates=t.RendererType=t.ProgressBar=t.PresentationModeState=t.MIN_SCALE=t.MAX_SCALE=t.MAX_AUTO_SCALE=t.DEFAULT_SCALE_VALUE=t.DEFAULT_SCALE_DELTA=t.DEFAULT_SCALE=t.AutoPrintRegExp=void 0;t.apiPageLayoutToViewerModes=H;t.apiPageModeToSidebarView=z;t.approximateFraction=E;t.backtrackBeforeAllVisibleElements=B;t.binarySearchFirstItem=D;t.getActiveOrFocusedElement=U;t.getOutputScale=b;t.getPageSizeInches=C;t.getVisibleElements=I;t.isPortraitOrientation=A;t.isValidRotation=x;t.isValidScrollMode=V;t.isValidSpreadMode=k;t.noContextMenuHandler=T;t.normalizeWheelEventDelta=N;t.normalizeWheelEventDirection=M;t.parseQueryString=S;t.roundToDivide=L;t.scrollIntoView=P;t.watchScroll=y;const i="auto";t.DEFAULT_SCALE_VALUE=i;const n=1;t.DEFAULT_SCALE=n;const s=1.1;t.DEFAULT_SCALE_DELTA=s;const r=.1;t.MIN_SCALE=r;const a=10;t.MAX_SCALE=a;const o=0;t.UNKNOWN_SCALE=o;const l=1.25;t.MAX_AUTO_SCALE=l;const h=40;t.SCROLLBAR_PADDING=h;const c=5;t.VERTICAL_PADDING=c;const d="--loadingBar-end-offset";const u={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};t.RenderingStates=u;const f={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};t.PresentationModeState=f;const p={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};t.SidebarView=p;const g={CANVAS:"canvas",SVG:"svg"};t.RendererType=g;const m={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};t.TextLayerMode=m;const _={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};t.ScrollMode=_;const v={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};t.SpreadMode=v;const w=/\bprint\s*\(/;t.AutoPrintRegExp=w;function b(e){const t=window.devicePixelRatio||1;const i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.backingStorePixelRatio||1;const n=t/i;return{sx:n,sy:n,scaled:n!==1}}function P(e,t,i=false){let n=e.offsetParent;if(!n){console.error("offsetParent is not set -- cannot scroll");return}let s=e.offsetTop+e.clientTop;let r=e.offsetLeft+e.clientLeft;while(n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||i&&(n.classList.contains("markedContent")||getComputedStyle(n).overflow==="hidden")){s+=n.offsetTop;r+=n.offsetLeft;n=n.offsetParent;if(!n){return}}if(t){if(t.top!==undefined){s+=t.top}if(t.left!==undefined){r+=t.left;n.scrollLeft=r}}n.scrollTop=s}function y(r,a){const e=function(e){if(l){return}l=window.requestAnimationFrame(function e(){l=null;const t=r.scrollLeft;const i=o.lastX;if(t!==i){o.right=t>i}o.lastX=t;const n=r.scrollTop;const s=o.lastY;if(n!==s){o.down=n>s}o.lastY=n;a(o)})};const o={right:true,down:true,lastX:r.scrollLeft,lastY:r.scrollTop,_eventHandler:e};let l=null;r.addEventListener("scroll",e,true);return o}function S(e){const t=new Map;for(const[i,n]of new URLSearchParams(e)){t.set(i.toLowerCase(),n)}return t}function D(e,t){let i=0;let n=e.length-1;if(n<0||!t(e[n])){return e.length}if(t(e[i])){return i}while(i<n){const s=i+n>>1;const r=e[s];if(t(r)){n=s}else{i=s+1}}return i}function E(e){if(Math.floor(e)===e){return[e,1]}const t=1/e;const i=8;if(t>i){return[1,i]}else if(Math.floor(t)===t){return[1,t]}const n=e>1?t:e;let s=0,r=1,a=1,o=1;while(true){const h=s+a,c=r+o;if(c>i){break}if(n<=h/c){a=h;o=c}else{s=h;r=c}}let l;if(n-s/r<a/o-n){l=n===e?[s,r]:[r,s]}else{l=n===e?[a,o]:[o,a]}return l}function L(e,t){const i=e%t;return i===0?e:Math.round(e-i+t)}function C({view:e,userUnit:t,rotate:i}){const[n,s,r,a]=e;const o=i%180!==0;const l=(r-n)/72*t;const h=(a-s)/72*t;return{width:o?h:l,height:o?l:h}}function B(t,i,e){if(t<2){return t}let n=i[t].div;let s=n.offsetTop+n.clientTop;if(s>=e){n=i[t-1].div;s=n.offsetTop+n.clientTop}for(let e=t-2;e>=0;--e){n=i[e].div;if(n.offsetTop+n.clientTop+n.clientHeight<=s){break}t=e}return t}function I({scrollEl:e,views:t,sortByVisibility:i=false,horizontal:n=false,rtl:s=false}){const r=e.scrollTop,a=r+e.clientHeight;const o=e.scrollLeft,l=o+e.clientWidth;function h(e){const t=e.div;const i=t.offsetTop+t.clientTop+t.clientHeight;return i>r}function c(e){const t=e.div;const i=t.offsetLeft+t.clientLeft;const n=i+t.clientWidth;return s?i<l:n>o}const d=[],u=new Set,f=t.length;let p=D(t,n?c:h);if(p>0&&p<f&&!n){p=B(p,t,r)}let g=n?l:-1;for(let e=p;e<f;e++){const v=t[e],w=v.div;const b=w.offsetLeft+w.clientLeft;const P=w.offsetTop+w.clientTop;const y=w.clientWidth,S=w.clientHeight;const E=b+y;const L=P+S;if(g===-1){if(L>=a){g=L}}else if((n?b:P)>g){break}if(L<=r||P>=a||E<=o||b>=l){continue}const C=Math.max(0,r-P)+Math.max(0,L-a);const I=Math.max(0,o-b)+Math.max(0,E-l);const T=(S-C)/S,M=(y-I)/y;const N=T*M*100|0;d.push({id:v.id,x:b,y:P,view:v,percent:N,widthPercent:M*100|0});u.add(v.id)}const m=d[0],_=d[d.length-1];if(i){d.sort(function(e,t){const i=e.percent-t.percent;if(Math.abs(i)>.001){return-i}return e.id-t.id})}return{first:m,last:_,views:d,ids:u}}function T(e){e.preventDefault()}function M(e){let t=Math.hypot(e.deltaX,e.deltaY);const i=Math.atan2(e.deltaY,e.deltaX);if(-.25*Math.PI<i&&i<.75*Math.PI){t=-t}return t}function N(e){let t=M(e);const i=0;const n=1;const s=30;const r=30;if(e.deltaMode===i){t/=s*r}else if(e.deltaMode===n){t/=r}return t}function x(e){return Number.isInteger(e)&&e%90===0}function V(e){return Number.isInteger(e)&&Object.values(_).includes(e)&&e!==_.UNKNOWN}function k(e){return Number.isInteger(e)&&Object.values(v).includes(e)&&e!==v.UNKNOWN}function A(e){return e.width<=e.height}const O=new Promise(function(e){window.requestAnimationFrame(e)});t.animationStarted=O;function R(e,t,i){return Math.min(Math.max(e,t),i)}class F{constructor(e,{height:t,width:i,units:n}={}){this.visible=true;this.div=document.querySelector(e+" .progress");this.bar=this.div.parentNode;this.height=t||100;this.width=i||100;this.units=n||"%";this.div.style.height=this.height+this.units;this.percent=0}_updateBar(){if(this._indeterminate){this.div.classList.add("indeterminate");this.div.style.width=this.width+this.units;return}this.div.classList.remove("indeterminate");const e=this.width*this._percent/100;this.div.style.width=e+this.units}get percent(){return this._percent}set percent(e){this._indeterminate=isNaN(e);this._percent=R(e,0,100);this._updateBar()}setWidth(e){if(!e){return}const t=e.parentNode;const i=t.offsetWidth-e.offsetWidth;if(i>0){const n=document.documentElement;n.style.setProperty(d,`${i}px`)}}hide(){if(!this.visible){return}this.visible=false;this.bar.classList.add("hidden")}show(){if(this.visible){return}this.visible=true;this.bar.classList.remove("hidden")}}t.ProgressBar=F;function U(){let e=document;let t=e.activeElement||e.querySelector(":focus");while(t?.shadowRoot){e=t.shadowRoot;t=e.activeElement||e.querySelector(":focus")}return t}function H(e){let t=_.VERTICAL,i=v.NONE;switch(e){case"SinglePage":t=_.PAGE;break;case"OneColumn":break;case"TwoPageLeft":t=_.PAGE;case"TwoColumnLeft":i=v.ODD;break;case"TwoPageRight":t=_.PAGE;case"TwoColumnRight":i=v.EVEN;break}return{scrollMode:t,spreadMode:i}}function z(e){switch(e){case"UseNone":return p.NONE;case"UseThumbs":return p.THUMBS;case"UseOutlines":return p.OUTLINE;case"UseAttachments":return p.ATTACHMENTS;case"UseOC":return p.LAYERS}return p.NONE}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.WaitOnType=t.EventBus=t.AutomationEventBus=void 0;t.waitOnEventOrTimeout=i;const h={EVENT:"event",TIMEOUT:"timeout"};t.WaitOnType=h;function i({target:a,name:o,delay:l=0}){return new Promise(function(t,e){if(typeof a!=="object"||!(o&&typeof o==="string")||!(Number.isInteger(l)&&l>=0)){throw new Error("waitOnEventOrTimeout - invalid parameters.")}function i(e){if(a instanceof c){a._off(o,n)}else{a.removeEventListener(o,n)}if(r){clearTimeout(r)}t(e)}const n=i.bind(null,h.EVENT);if(a instanceof c){a._on(o,n)}else{a.addEventListener(o,n)}const s=i.bind(null,h.TIMEOUT);const r=setTimeout(s,l)})}class c{constructor(){this._listeners=Object.create(null)}on(e,t,i=null){this._on(e,t,{external:true,once:i?.once})}off(e,t,i=null){this._off(e,t,{external:true,once:i?.once})}dispatch(e,t){const i=this._listeners[e];if(!i||i.length===0){return}let n;for(const{listener:s,external:r,once:a}of i.slice(0)){if(a){this._off(e,s)}if(r){(n||=[]).push(s);continue}s(t)}if(n){for(const s of n){s(t)}n=null}}_on(e,t,i=null){const n=this._listeners[e]||=[];n.push({listener:t,external:i?.external===true,once:i?.once===true})}_off(e,i,t=null){const n=this._listeners[e];if(!n){return}for(let e=0,t=n.length;e<t;e++){if(n[e].listener===i){n.splice(e,1);return}}}}t.EventBus=c;class n extends c{dispatch(e,t){throw new Error("Not implemented: AutomationEventBus.dispatch")}}t.AutomationEventBus=n},e=>{let t;if(typeof window!=="undefined"&&window["pdfjs-dist/build/pdf"]){t=window["pdfjs-dist/build/pdf"]}else{t=require("./js/libs/pdf.min.js")}e.exports=t},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFCursorTools=t.CursorTool=void 0;var n=i(7);var s=i(3);const r={SELECT:0,HAND:1,ZOOM:2};t.CursorTool=r;class a{constructor({container:e,eventBus:t,cursorToolOnLoad:i=r.SELECT}){this.container=e;this.eventBus=t;this.active=r.SELECT;this.activeBeforePresentationMode=null;this.handTool=new n.GrabToPan({element:this.container});this._addEventListeners();Promise.resolve().then(()=>{this.switchTool(i)})}get activeTool(){return this.active}switchTool(e){if(this.activeBeforePresentationMode!==null){return}if(e===this.active){return}const t=()=>{switch(this.active){case r.SELECT:break;case r.HAND:this.handTool.deactivate();break;case r.ZOOM:}};switch(e){case r.SELECT:t();break;case r.HAND:t();this.handTool.activate();break;case r.ZOOM:default:console.error(`switchTool: "${e}" is an unsupported value.`);return}this.active=e;this._dispatchEvent()}_dispatchEvent(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}_addEventListeners(){this.eventBus._on("switchcursortool",e=>{this.switchTool(e.tool)});this.eventBus._on("presentationmodechanged",e=>{switch(e.state){case s.PresentationModeState.FULLSCREEN:{const t=this.active;this.switchTool(r.SELECT);this.activeBeforePresentationMode=t;break}case s.PresentationModeState.NORMAL:{const t=this.activeBeforePresentationMode;this.activeBeforePresentationMode=null;this.switchTool(t);break}}})}}t.PDFCursorTools=a},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.GrabToPan=void 0;const i="grab-to-pan-grab";class n{constructor(e){this.element=e.element;this.document=e.element.ownerDocument;if(typeof e.ignoreTarget==="function"){this.ignoreTarget=e.ignoreTarget}this.onActiveChanged=e.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onMouseDown=this.#onMouseDown.bind(this);this._onMouseMove=this.#onMouseMove.bind(this);this._endPan=this.#endPan.bind(this);const t=this.overlay=document.createElement("div");t.className="grab-to-pan-grabbing"}activate(){if(!this.active){this.active=true;this.element.addEventListener("mousedown",this._onMouseDown,true);this.element.classList.add(i);this.onActiveChanged?.(true)}}deactivate(){if(this.active){this.active=false;this.element.removeEventListener("mousedown",this._onMouseDown,true);this._endPan();this.element.classList.remove(i);this.onActiveChanged?.(false)}}toggle(){if(this.active){this.deactivate()}else{this.activate()}}ignoreTarget(e){return e.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}#onMouseDown(e){if(e.button!==0||this.ignoreTarget(e.target)){return}if(e.originalTarget){try{e.originalTarget.tagName}catch(e){return}}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=e.clientX;this.clientYStart=e.clientY;this.document.addEventListener("mousemove",this._onMouseMove,true);this.document.addEventListener("mouseup",this._endPan,true);this.element.addEventListener("scroll",this._endPan,true);e.preventDefault();e.stopPropagation();const t=document.activeElement;if(t&&!t.contains(e.target)){t.blur()}}#onMouseMove(e){this.element.removeEventListener("scroll",this._endPan,true);if(!(e.buttons&1)){this._endPan();return}const t=e.clientX-this.clientXStart;const i=e.clientY-this.clientYStart;const n=this.scrollTopStart-i;const s=this.scrollLeftStart-t;if(this.element.scrollTo){this.element.scrollTo({top:n,left:s,behavior:"instant"})}else{this.element.scrollTop=n;this.element.scrollLeft=s}if(!this.overlay.parentNode){document.body.appendChild(this.overlay)}}#endPan(){this.element.removeEventListener("scroll",this._endPan,true);this.document.removeEventListener("mousemove",this._onMouseMove,true);this.document.removeEventListener("mouseup",this._endPan,true);this.overlay.remove()}}t.GrabToPan=n},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.OverlayManager=void 0;class i{constructor(){this._overlays={};this._active=null;this._keyDownBound=this._keyDown.bind(this)}get active(){return this._active}async register(e,t,i=null,n=false){let s;if(!e||!t||!(s=t.parentNode)){throw new Error("Not enough parameters.")}else if(this._overlays[e]){throw new Error("The overlay is already registered.")}this._overlays[e]={element:t,container:s,callerCloseMethod:i,canForceClose:n}}async unregister(e){if(!this._overlays[e]){throw new Error("The overlay does not exist.")}else if(this._active===e){throw new Error("The overlay cannot be removed while it is active.")}delete this._overlays[e]}async open(e){if(!this._overlays[e]){throw new Error("The overlay does not exist.")}else if(this._active){if(this._overlays[e].canForceClose){this._closeThroughCaller()}else if(this._active===e){throw new Error("The overlay is already active.")}else{throw new Error("Another overlay is currently active.")}}this._active=e;this._overlays[this._active].element.classList.remove("hidden");this._overlays[this._active].container.classList.remove("hidden");window.addEventListener("keydown",this._keyDownBound)}async close(e){if(!this._overlays[e]){throw new Error("The overlay does not exist.")}else if(!this._active){throw new Error("The overlay is currently not active.")}else if(this._active!==e){throw new Error("Another overlay is currently active.")}this._overlays[this._active].container.classList.add("hidden");this._overlays[this._active].element.classList.add("hidden");this._active=null;window.removeEventListener("keydown",this._keyDownBound)}_keyDown(e){if(this._active&&e.keyCode===27){this._closeThroughCaller();e.preventDefault()}}_closeThroughCaller(){if(this._overlays[this._active].callerCloseMethod){this._overlays[this._active].callerCloseMethod()}if(this._active){this.close(this._active)}}}t.OverlayManager=i},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PasswordPrompt=void 0;var n=i(5);class s{constructor(e,t,i,n=false){this.overlayName=e.overlayName;this.container=e.container;this.label=e.label;this.input=e.input;this.submitButton=e.submitButton;this.cancelButton=e.cancelButton;this.overlayManager=t;this.l10n=i;this._isViewerEmbedded=n;this.updateCallback=null;this.reason=null;this.submitButton.addEventListener("click",this.verify.bind(this));this.cancelButton.addEventListener("click",this.close.bind(this));this.input.addEventListener("keydown",e=>{if(e.keyCode===13){this.verify()}});this.overlayManager.register(this.overlayName,this.container,this.close.bind(this),true)}async open(){await this.overlayManager.open(this.overlayName);const e=this.reason===n.PasswordResponses.INCORRECT_PASSWORD;if(!this._isViewerEmbedded||e){this.input.focus()}this.label.textContent=await this.l10n.get(`password_${e?"invalid":"label"}`)}close(){this.overlayManager.close(this.overlayName).then(()=>{this.input.value=""})}verify(){const e=this.input.value;if(e?.length>0){this.close();this.updateCallback(e)}}setUpdateCallback(e,t){this.updateCallback=e;this.reason=t}}t.PasswordPrompt=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFAttachmentViewer=void 0;var d=i(5);var n=i(11);class s extends n.BaseTreeViewer{constructor(e){super(e);this.downloadManager=e.downloadManager;this.eventBus._on("fileattachmentannotation",this._appendAttachment.bind(this))}reset(e=false){super.reset();this._attachments=null;if(!e){this._renderedCapability=(0,d.createPromiseCapability)()}if(this._pendingDispatchEvent){clearTimeout(this._pendingDispatchEvent)}this._pendingDispatchEvent=null}_dispatchEvent(e){this._renderedCapability.resolve();if(this._pendingDispatchEvent){clearTimeout(this._pendingDispatchEvent);this._pendingDispatchEvent=null}if(e===0){this._pendingDispatchEvent=setTimeout(()=>{this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:0});this._pendingDispatchEvent=null});return}this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:e})}_bindLink(e,{content:t,filename:i}){e.onclick=()=>{this.downloadManager.openOrDownloadData(e,t,i);return false}}render({attachments:e,keepRenderedCapability:t=false}){if(this._attachments){this.reset(t)}this._attachments=e||null;if(!e){this._dispatchEvent(0);return}const i=Object.keys(e).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});const n=document.createDocumentFragment();let s=0;for(const r of i){const a=e[r];const o=a.content,l=(0,d.getFilenameFromUrl)(a.filename);const h=document.createElement("div");h.className="treeItem";const c=document.createElement("a");this._bindLink(c,{content:o,filename:l});c.textContent=this._normalizeTextContent(l);h.appendChild(c);n.appendChild(h);s++}this._finishRendering(n,s)}_appendAttachment({id:i,filename:n,content:s}){const r=this._renderedCapability.promise;r.then(()=>{if(r!==this._renderedCapability.promise){return}let e=this._attachments;if(!e){e=Object.create(null)}else{for(const t in e){if(i===t){return}}}e[i]={filename:n,content:s};this.render({attachments:e,keepRenderedCapability:true})})}}t.PDFAttachmentViewer=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.BaseTreeViewer=void 0;var n=i(5);const s=-100;const r="selected";class a{constructor(e){if(this.constructor===a){throw new Error("Cannot initialize BaseTreeViewer.")}this.container=e.container;this.eventBus=e.eventBus;this.reset()}reset(){this._pdfDocument=null;this._lastToggleIsShow=true;this._currentTreeItem=null;this.container.textContent="";this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(e){throw new Error("Not implemented: _dispatchEvent")}_bindLink(e,t){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(e){return(0,n.removeNullCharacters)(e,true)||"–"}_addToggleButton(i,e=false){const n=document.createElement("div");n.className="treeItemToggler";if(e){n.classList.add("treeItemsHidden")}n.onclick=e=>{e.stopPropagation();n.classList.toggle("treeItemsHidden");if(e.shiftKey){const t=!n.classList.contains("treeItemsHidden");this._toggleTreeItem(i,t)}};i.insertBefore(n,i.firstChild)}_toggleTreeItem(e,t=false){this._lastToggleIsShow=t;for(const i of e.querySelectorAll(".treeItemToggler")){i.classList.toggle("treeItemsHidden",!t)}}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(e,t,i=false){if(i){this.container.classList.add("treeWithDeepNesting");this._lastToggleIsShow=!e.querySelector(".treeItemsHidden")}this.container.appendChild(e);this._dispatchEvent(t)}render(e){throw new Error("Not implemented: render")}_updateCurrentTreeItem(e=null){if(this._currentTreeItem){this._currentTreeItem.classList.remove(r);this._currentTreeItem=null}if(e){e.classList.add(r);this._currentTreeItem=e}}_scrollToCurrentTreeItem(e){if(!e){return}let t=e.parentNode;while(t&&t!==this.container){if(t.classList.contains("treeItem")){const i=t.firstElementChild;i?.classList.remove("treeItemsHidden")}t=t.parentNode}this._updateCurrentTreeItem(e);this.container.scrollTo(e.offsetLeft,e.offsetTop+s)}}t.BaseTreeViewer=a},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFDocumentProperties=void 0;var p=i(5);var g=i(3);const n="-";const o=["en-us","en-lr","my"];const f={"8.5x11":"Letter","8.5x14":"Legal"};const m={"297x420":"A3","210x297":"A4"};function _(e,t,i){const n=t?e.width:e.height;const s=t?e.height:e.width;return i[`${n}x${s}`]}class s{constructor({overlayName:e,fields:t,container:i,closeButton:n},s,r,a){this.overlayName=e;this.fields=t;this.container=i;this.overlayManager=s;this.l10n=a;this._reset();n.addEventListener("click",this.close.bind(this));this.overlayManager.register(this.overlayName,this.container,this.close.bind(this));r._on("pagechanging",e=>{this._currentPageNumber=e.pageNumber});r._on("rotationchanging",e=>{this._pagesRotation=e.pagesRotation});this._isNonMetricLocale=true;a.getLanguage().then(e=>{this._isNonMetricLocale=o.includes(e)})}async open(){const e=e=>{Object.defineProperty(this,"fieldData",{value:Object.freeze(e),writable:false,enumerable:true,configurable:true})};await Promise.all([this.overlayManager.open(this.overlayName),this._dataAvailableCapability.promise]);const t=this._currentPageNumber;const i=this._pagesRotation;if(this.fieldData&&t===this.fieldData._currentPageNumber&&i===this.fieldData._pagesRotation){this._updateUI();return}const{info:n,contentDispositionFilename:s,contentLength:r}=await this.pdfDocument.getMetadata();const[a,o,l,h,c,d]=await Promise.all([s||(0,p.getPdfFilenameFromUrl)(this.url),this._parseFileSize(r),this._parseDate(n.CreationDate),this._parseDate(n.ModDate),this.pdfDocument.getPage(t).then(e=>{return this._parsePageSize((0,g.getPageSizeInches)(e),i)}),this._parseLinearization(n.IsLinearized)]);e({fileName:a,fileSize:o,title:n.Title,author:n.Author,subject:n.Subject,keywords:n.Keywords,creationDate:l,modificationDate:h,creator:n.Creator,producer:n.Producer,version:n.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:c,linearized:d,_currentPageNumber:t,_pagesRotation:i});this._updateUI();const{length:u}=await this.pdfDocument.getDownloadInfo();if(r===u){return}const f=Object.assign(Object.create(null),this.fieldData);f.fileSize=await this._parseFileSize(u);e(f);this._updateUI()}close(){this.overlayManager.close(this.overlayName)}setDocument(e,t=null){if(this.pdfDocument){this._reset();this._updateUI(true)}if(!e){return}this.pdfDocument=e;this.url=t;this._dataAvailableCapability.resolve()}_reset(){this.pdfDocument=null;this.url=null;delete this.fieldData;this._dataAvailableCapability=(0,p.createPromiseCapability)();this._currentPageNumber=1;this._pagesRotation=0}_updateUI(e=false){if(e||!this.fieldData){for(const t in this.fields){this.fields[t].textContent=n}return}if(this.overlayManager.active!==this.overlayName){return}for(const t in this.fields){const i=this.fieldData[t];this.fields[t].textContent=i||i===0?i:n}}async _parseFileSize(e=0){const t=e/1024,i=t/1024;if(!t){return undefined}return this.l10n.get(`document_properties_${i>=1?"mb":"kb"}`,{size_mb:i>=1&&(+i.toPrecision(3)).toLocaleString(),size_kb:i<1&&(+t.toPrecision(3)).toLocaleString(),size_b:e.toLocaleString()})}async _parsePageSize(e,t){if(!e){return undefined}if(t%180!==0){e={width:e.height,height:e.width}}const i=(0,g.isPortraitOrientation)(e);let n={width:Math.round(e.width*100)/100,height:Math.round(e.height*100)/100};let s={width:Math.round(e.width*25.4*10)/10,height:Math.round(e.height*25.4*10)/10};let r=_(n,i,f)||_(s,i,m);if(!r&&!(Number.isInteger(s.width)&&Number.isInteger(s.height))){const d={width:e.width*25.4,height:e.height*25.4};const u={width:Math.round(s.width),height:Math.round(s.height)};if(Math.abs(d.width-u.width)<.1&&Math.abs(d.height-u.height)<.1){r=_(u,i,m);if(r){n={width:Math.round(u.width/25.4*100)/100,height:Math.round(u.height/25.4*100)/100};s=u}}}const[{width:a,height:o},l,h,c]=await Promise.all([this._isNonMetricLocale?n:s,this.l10n.get(`document_properties_page_size_unit_${this._isNonMetricLocale?"inches":"millimeters"}`),r&&this.l10n.get(`document_properties_page_size_name_${r.toLowerCase()}`),this.l10n.get(`document_properties_page_size_orientation_${i?"portrait":"landscape"}`)]);return this.l10n.get(`document_properties_page_size_dimension_${h?"name_":""}string`,{width:a.toLocaleString(),height:o.toLocaleString(),unit:l,name:h,orientation:c})}async _parseDate(e){const t=p.PDFDateString.toDateObject(e);if(!t){return undefined}return this.l10n.get("document_properties_date_string",{date:t.toLocaleDateString(),time:t.toLocaleTimeString()})}_parseLinearization(e){return this.l10n.get(`document_properties_linearized_${e?"yes":"no"}`)}}t.PDFDocumentProperties=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFFindBar=void 0;var r=i(14);const a=1e3;class n{constructor(e,t,i){this.opened=false;this.bar=e.bar;this.toggleButton=e.toggleButton;this.findField=e.findField;this.highlightAll=e.highlightAllCheckbox;this.caseSensitive=e.caseSensitiveCheckbox;this.entireWord=e.entireWordCheckbox;this.findMsg=e.findMsg;this.findResultsCount=e.findResultsCount;this.findPreviousButton=e.findPreviousButton;this.findNextButton=e.findNextButton;this.eventBus=t;this.l10n=i;this.toggleButton.addEventListener("click",()=>{this.toggle()});this.findField.addEventListener("input",()=>{this.dispatchEvent("")});this.bar.addEventListener("keydown",e=>{switch(e.keyCode){case 13:if(e.target===this.findField){this.dispatchEvent("again",e.shiftKey)}break;case 27:this.close();break}});this.findPreviousButton.addEventListener("click",()=>{this.dispatchEvent("again",true)});this.findNextButton.addEventListener("click",()=>{this.dispatchEvent("again",false)});this.highlightAll.addEventListener("click",()=>{this.dispatchEvent("highlightallchange")});this.caseSensitive.addEventListener("click",()=>{this.dispatchEvent("casesensitivitychange")});this.entireWord.addEventListener("click",()=>{this.dispatchEvent("entirewordchange")});this.eventBus._on("resize",this._adjustWidth.bind(this))}reset(){this.updateUIState()}dispatchEvent(e,t=false){this.eventBus.dispatch("find",{source:this,type:e,query:this.findField.value,phraseSearch:true,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,highlightAll:this.highlightAll.checked,findPrevious:t})}updateUIState(e,t,i){let n=Promise.resolve("");let s="";switch(e){case r.FindState.FOUND:break;case r.FindState.PENDING:s="pending";break;case r.FindState.NOT_FOUND:n=this.l10n.get("find_not_found");s="notFound";break;case r.FindState.WRAPPED:n=this.l10n.get(`find_reached_${t?"top":"bottom"}`);break}this.findField.setAttribute("data-status",s);n.then(e=>{this.findMsg.textContent=e;this._adjustWidth()});this.updateResultsCount(i)}updateResultsCount({current:t=0,total:i=0}={}){const n=a;let s=Promise.resolve("");if(i>0){if(i>n){let e="find_match_count_limit";s=this.l10n.get(e,{limit:n})}else{let e="find_match_count";s=this.l10n.get(e,{current:t,total:i})}}s.then(e=>{this.findResultsCount.textContent=e;this.findResultsCount.classList.toggle("hidden",!i);this._adjustWidth()})}open(){if(!this.opened){this.opened=true;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.bar.classList.remove("hidden")}this.findField.select();this.findField.focus();this._adjustWidth()}close(){if(!this.opened){return}this.opened=false;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.bar.classList.add("hidden");this.eventBus.dispatch("findbarclose",{source:this})}toggle(){if(this.opened){this.close()}else{this.open()}}_adjustWidth(){if(!this.opened){return}this.bar.classList.remove("wrapContainers");const e=this.bar.clientHeight;const t=this.bar.firstElementChild.clientHeight;if(e>t){this.bar.classList.add("wrapContainers")}}}t.PDFFindBar=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFFindController=t.FindState=void 0;var n=i(5);var o=i(15);var r=i(3);const a={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};t.FindState=a;const s=250;const l=-50;const h=-400;const c={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"};let d=null;function u(e){if(!d){const i=Object.keys(c).join("");d=new RegExp(`[${i}]`,"g")}let s=null;const t=e.replace(d,function(e,t){const i=c[e],n=i.length-e.length;if(n!==0){(s||=[]).push([t,n])}return i});return[t,s]}function f(e,t=null){if(!t){return e}let i=0;for(const[n,s]of t){const r=n+i;if(r>=e){break}if(r+s>e){i+=e-r;break}i+=s}return e-i}class p{constructor({linkService:e,eventBus:t}){this._linkService=e;this._eventBus=t;this._reset();t._on("find",this._onFind.bind(this));t._on("findbarclose",this._onFindBarClose.bind(this));this.executeCommand=(e,t)=>{console.error("Deprecated method `PDFFindController.executeCommand` called, "+'please dispatch a "find"-event using the EventBus instead.');const i=Object.assign(Object.create(null),t,{type:e.substring("find".length)});this._onFind(i)}}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(e){if(this._pdfDocument){this._reset()}if(!e){return}this._pdfDocument=e;this._firstPageCapability.resolve()}_onFind(e){if(!e){return}const i=this._pdfDocument;const{type:n}=e;if(this._state===null||this._shouldDirtyMatch(e)){this._dirtyMatch=true}this._state=e;if(n!=="highlightallchange"){this._updateUIState(a.PENDING)}this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||i&&this._pdfDocument!==i){return}this._extractText();const e=!this._highlightMatches;const t=!!this._findTimeout;if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(!n){this._findTimeout=setTimeout(()=>{this._nextMatch();this._findTimeout=null},s)}else if(this._dirtyMatch){this._nextMatch()}else if(n==="again"){this._nextMatch();if(e&&this._state.highlightAll){this._updateAllPages()}}else if(n==="highlightallchange"){if(t){this._nextMatch()}else{this._highlightMatches=true}this._updateAllPages()}else{this._nextMatch()}})}scrollMatchIntoView({element:e=null,selectedLeft:t=0,pageIndex:i=-1,matchIndex:n=-1}){if(!this._scrollMatches||!e){return}else if(n===-1||n!==this._selected.matchIdx){return}else if(i===-1||i!==this._selected.pageIdx){return}this._scrollMatches=false;const s={top:l,left:t+h};(0,r.scrollIntoView)(e,s,true)}_reset(){this._highlightMatches=false;this._scrollMatches=false;this._pdfDocument=null;this._pageMatches=[];this._pageMatchesLength=[];this._state=null;this._selected={pageIdx:-1,matchIdx:-1};this._offset={pageIdx:null,matchIdx:null,wrapped:false};this._extractTextPromises=[];this._pageContents=[];this._pageDiffs=[];this._matchesCountTotal=0;this._pagesToSearch=null;this._pendingFindMatches=new Set;this._resumePageIdx=null;this._dirtyMatch=false;clearTimeout(this._findTimeout);this._findTimeout=null;this._firstPageCapability=(0,n.createPromiseCapability)()}get _query(){if(this._state.query!==this._rawQuery){this._rawQuery=this._state.query;[this._normalizedQuery]=u(this._state.query)}return this._normalizedQuery}_shouldDirtyMatch(e){if(e.query!==this._state.query){return true}switch(e.type){case"again":const t=this._selected.pageIdx+1;const i=this._linkService;if(t>=1&&t<=i.pagesCount&&t!==i.page&&!i.isPageVisible(t)){return true}return false;case"highlightallchange":return false}return true}_prepareMatches(s,i,n){function r(t){const i=s[t];const e=s[t+1];if(t<s.length-1&&i.match===e.match){i.skipped=true;return true}for(let e=t-1;e>=0;e--){const n=s[e];if(n.skipped){continue}if(n.match+n.matchLength<i.match){break}if(n.match+n.matchLength>=i.match+i.matchLength){i.skipped=true;return true}}return false}s.sort(function(e,t){return e.match===t.match?e.matchLength-t.matchLength:e.match-t.match});for(let e=0,t=s.length;e<t;e++){if(r(e)){continue}i.push(s[e].match);n.push(s[e].matchLength)}}_isEntireWord(e,t,i){if(t>0){const s=e.charCodeAt(t);const r=e.charCodeAt(t-1);if((0,o.getCharacterType)(s)===(0,o.getCharacterType)(r)){return false}}const n=t+i-1;if(n<e.length-1){const a=e.charCodeAt(n);const r=e.charCodeAt(n+1);if((0,o.getCharacterType)(a)===(0,o.getCharacterType)(r)){return false}}return true}_calculatePhraseMatch(e,t,i,n,s){const r=[],a=[];const o=e.length;let l=-o;while(true){l=i.indexOf(e,l+o);if(l===-1){break}if(s&&!this._isEntireWord(i,l,o)){continue}const h=f(l,n),c=l+o-1,d=f(c,n)-h+1;r.push(h);a.push(d)}this._pageMatches[t]=r;this._pageMatchesLength[t]=a}_calculateWordMatch(e,t,i,n,s){const r=[];const a=e.match(/\S+/g);for(let t=0,e=a.length;t<e;t++){const o=a[t];const l=o.length;let e=-l;while(true){e=i.indexOf(o,e+l);if(e===-1){break}if(s&&!this._isEntireWord(i,e,l)){continue}const h=f(e,n),c=e+l-1,d=f(c,n)-h+1;r.push({match:h,matchLength:d,skipped:false})}}this._pageMatchesLength[t]=[];this._pageMatches[t]=[];this._prepareMatches(r,this._pageMatches[t],this._pageMatchesLength[t])}_calculateMatch(e){let t=this._pageContents[e];const i=this._pageDiffs[e];let n=this._query;const{caseSensitive:s,entireWord:r,phraseSearch:a}=this._state;if(n.length===0){return}if(!s){t=t.toLowerCase();n=n.toLowerCase()}if(a){this._calculatePhraseMatch(n,e,t,i,r)}else{this._calculateWordMatch(n,e,t,i,r)}if(this._state.highlightAll){this._updatePage(e)}if(this._resumePageIdx===e){this._resumePageIdx=null;this._nextPageMatch()}const o=this._pageMatches[e].length;if(o>0){this._matchesCountTotal+=o;this._updateUIResultsCount()}}_extractText(){if(this._extractTextPromises.length>0){return}let i=Promise.resolve();for(let t=0,e=this._linkService.pagesCount;t<e;t++){const s=(0,n.createPromiseCapability)();this._extractTextPromises[t]=s.promise;i=i.then(()=>{return this._pdfDocument.getPage(t+1).then(e=>{return e.getTextContent({normalizeWhitespace:true})}).then(e=>{const i=e.items;const n=[];for(let e=0,t=i.length;e<t;e++){n.push(i[e].str)}[this._pageContents[t],this._pageDiffs[t]]=u(n.join(""));s.resolve(t)},e=>{console.error(`Unable to get text content for page ${t+1}`,e);this._pageContents[t]="";this._pageDiffs[t]=null;s.resolve(t)})})}}_updatePage(e){if(this._scrollMatches&&this._selected.pageIdx===e){this._linkService.page=e+1}this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){const e=this._state.findPrevious;const t=this._linkService.page-1;const i=this._linkService.pagesCount;this._highlightMatches=true;if(this._dirtyMatch){this._dirtyMatch=false;this._selected.pageIdx=this._selected.matchIdx=-1;this._offset.pageIdx=t;this._offset.matchIdx=null;this._offset.wrapped=false;this._resumePageIdx=null;this._pageMatches.length=0;this._pageMatchesLength.length=0;this._matchesCountTotal=0;this._updateAllPages();for(let e=0;e<i;e++){if(this._pendingFindMatches.has(e)){continue}this._pendingFindMatches.add(e);this._extractTextPromises[e].then(e=>{this._pendingFindMatches.delete(e);this._calculateMatch(e)})}}if(this._query===""){this._updateUIState(a.FOUND);return}if(this._resumePageIdx){return}const n=this._offset;this._pagesToSearch=i;if(n.matchIdx!==null){const s=this._pageMatches[n.pageIdx].length;if(!e&&n.matchIdx+1<s||e&&n.matchIdx>0){n.matchIdx=e?n.matchIdx-1:n.matchIdx+1;this._updateMatch(true);return}this._advanceOffsetPage(e)}this._nextPageMatch()}_matchesReady(e){const t=this._offset;const i=e.length;const n=this._state.findPrevious;if(i){t.matchIdx=n?i-1:0;this._updateMatch(true);return true}this._advanceOffsetPage(n);if(t.wrapped){t.matchIdx=null;if(this._pagesToSearch<0){this._updateMatch(false);return true}}return false}_nextPageMatch(){if(this._resumePageIdx!==null){console.error("There can only be one pending page.")}let e=null;do{const t=this._offset.pageIdx;e=this._pageMatches[t];if(!e){this._resumePageIdx=t;break}}while(!this._matchesReady(e))}_advanceOffsetPage(e){const t=this._offset;const i=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1;t.matchIdx=null;this._pagesToSearch--;if(t.pageIdx>=i||t.pageIdx<0){t.pageIdx=e?i-1:0;t.wrapped=true}}_updateMatch(e=false){let t=a.NOT_FOUND;const i=this._offset.wrapped;this._offset.wrapped=false;if(e){const n=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx;this._selected.matchIdx=this._offset.matchIdx;t=i?a.WRAPPED:a.FOUND;if(n!==-1&&n!==this._selected.pageIdx){this._updatePage(n)}}this._updateUIState(t,this._state.findPrevious);if(this._selected.pageIdx!==-1){this._scrollMatches=true;this._updatePage(this._selected.pageIdx)}}_onFindBarClose(e){const t=this._pdfDocument;this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t){return}if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(this._resumePageIdx){this._resumePageIdx=null;this._dirtyMatch=true}this._updateUIState(a.FOUND);this._highlightMatches=false;this._updateAllPages()})}_requestMatchesCount(){const{pageIdx:t,matchIdx:e}=this._selected;let i=0,n=this._matchesCountTotal;if(e!==-1){for(let e=0;e<t;e++){i+=this._pageMatches[e]?.length||0}i+=e+1}if(i<1||i>n){i=n=0}return{current:i,total:n}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(e,t=false){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:t,matchesCount:this._requestMatchesCount(),rawQuery:this._state?.query??null})}}t.PDFFindController=p},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.CharacterType=void 0;t.getCharacterType=f;const i={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};t.CharacterType=i;function n(e){return e<11904}function s(e){return(e&65408)===0}function r(e){return e>=97&&e<=122||e>=65&&e<=90}function a(e){return e>=48&&e<=57}function o(e){return e===32||e===9||e===13||e===10}function l(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}function h(e){return e>=12448&&e<=12543}function c(e){return e>=12352&&e<=12447}function d(e){return e>=65376&&e<=65439}function u(e){return(e&65408)===3584}function f(e){if(n(e)){if(s(e)){if(o(e)){return i.SPACE}else if(r(e)||a(e)||e===95){return i.ALPHA_LETTER}return i.PUNCT}else if(u(e)){return i.THAI_LETTER}else if(e===160){return i.SPACE}return i.ALPHA_LETTER}if(l(e)){return i.HAN_LETTER}else if(h(e)){return i.KATAKANA_LETTER}else if(c(e)){return i.HIRAGANA_LETTER}else if(d(e)){return i.HALFWIDTH_KATAKANA_LETTER}return i.ALPHA_LETTER}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFHistory=void 0;t.isDestArraysEqual=d;t.isDestHashesEqual=a;var o=i(3);var l=i(4);const h=1e3;const n=50;const s=1e3;function c(){return document.location.hash}class r{constructor({linkService:e,eventBus:t}){this.linkService=e;this.eventBus=t;this._initialized=false;this._fingerprint="";this.reset();this._boundEvents=null;this._isViewerInPresentationMode=false;this.eventBus._on("presentationmodechanged",e=>{this._isViewerInPresentationMode=e.state!==o.PresentationModeState.NORMAL});this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=false;this.eventBus._on("pagesloaded",e=>{this._isPagesLoaded=!!e.pagesCount},{once:true})})}initialize({fingerprint:e,resetHistory:t=false,updateUrl:i=false}){if(!e||typeof e!=="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}if(this._initialized){this.reset()}const n=this._fingerprint!==""&&this._fingerprint!==e;this._fingerprint=e;this._updateUrl=i===true;this._initialized=true;this._bindEvents();const s=window.history.state;this._popStateInProgress=false;this._blockHashChange=0;this._currentHash=c();this._numPositionUpdates=0;this._uid=this._maxUid=0;this._destination=null;this._position=null;if(!this._isValidState(s,true)||t){const{hash:a,page:o,rotation:l}=this._parseCurrentHash(true);if(!a||n||t){this._pushOrReplaceState(null,true);return}this._pushOrReplaceState({hash:a,page:o,rotation:l},true);return}const r=s.destination;this._updateInternalState(r,s.uid,true);if(r.rotation!==undefined){this._initialRotation=r.rotation}if(r.dest){this._initialBookmark=JSON.stringify(r.dest);this._destination.page=null}else if(r.hash){this._initialBookmark=r.hash}else if(r.page){this._initialBookmark=`page=${r.page}`}}reset(){if(this._initialized){this._pageHide();this._initialized=false;this._unbindEvents()}if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._initialBookmark=null;this._initialRotation=null}push({namedDest:e=null,explicitDest:t,pageNumber:i}){if(!this._initialized){return}if(e&&typeof e!=="string"){console.error("PDFHistory.push: "+`"${e}" is not a valid namedDest parameter.`);return}else if(!Array.isArray(t)){console.error("PDFHistory.push: "+`"${t}" is not a valid explicitDest parameter.`);return}else if(!this._isValidPage(i)){if(i!==null||this._destination){console.error("PDFHistory.push: "+`"${i}" is not a valid pageNumber parameter.`);return}}const n=e||JSON.stringify(t);if(!n){return}let s=false;if(this._destination&&(a(this._destination.hash,n)||d(this._destination.dest,t))){if(this._destination.page){return}s=true}if(this._popStateInProgress&&!s){return}this._pushOrReplaceState({dest:t,hash:n,page:i,rotation:this.linkService.rotation},s);if(!this._popStateInProgress){this._popStateInProgress=true;Promise.resolve().then(()=>{this._popStateInProgress=false})}}pushPage(e){if(!this._initialized){return}if(!this._isValidPage(e)){console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);return}if(this._destination?.page===e){return}if(this._popStateInProgress){return}this._pushOrReplaceState({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation});if(!this._popStateInProgress){this._popStateInProgress=true;Promise.resolve().then(()=>{this._popStateInProgress=false})}}pushCurrentPosition(){if(!this._initialized||this._popStateInProgress){return}this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress){return}const e=window.history.state;if(this._isValidState(e)&&e.uid>0){window.history.back()}}forward(){if(!this._initialized||this._popStateInProgress){return}const e=window.history.state;if(this._isValidState(e)&&e.uid<this._maxUid){window.history.forward()}}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(e,t=false){const i=t||!this._destination;const n={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:e};this._updateInternalState(e,n.uid);let s;if(this._updateUrl&&e?.hash){const r=document.location.href.split("#")[0];if(!r.startsWith("file://")){s=`${r}#${e.hash}`}}if(i){window.history.replaceState(n,"",s)}else{window.history.pushState(n,"",s)}}_tryPushCurrentPosition(e=false){if(!this._position){return}let t=this._position;if(e){t=Object.assign(Object.create(null),this._position);t.temporary=true}if(!this._destination){this._pushOrReplaceState(t);return}if(this._destination.temporary){this._pushOrReplaceState(t,true);return}if(this._destination.hash===t.hash){return}if(!this._destination.page&&(n<=0||this._numPositionUpdates<=n)){return}let i=false;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(this._destination.dest!==undefined||!this._destination.first){return}i=true}this._pushOrReplaceState(t,i)}_isValidPage(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}_isValidState(e,t=false){if(!e){return false}if(e.fingerprint!==this._fingerprint){if(t){if(typeof e.fingerprint!=="string"||e.fingerprint.length!==this._fingerprint.length){return false}const[i]=performance.getEntriesByType("navigation");if(i?.type!=="reload"){return false}}else{return false}}if(!Number.isInteger(e.uid)||e.uid<0){return false}if(e.destination===null||typeof e.destination!=="object"){return false}return true}_updateInternalState(e,t,i=false){if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}if(i&&e?.temporary){delete e.temporary}this._destination=e;this._uid=t;this._maxUid=Math.max(this._maxUid,t);this._numPositionUpdates=0}_parseCurrentHash(e=false){const t=unescape(c()).substring(1);const i=(0,o.parseQueryString)(t);const n=i.get("nameddest")||"";let s=i.get("page")|0;if(!this._isValidPage(s)||e&&n.length>0){s=null}return{hash:t,page:s,rotation:this.linkService.rotation}}_updateViewarea({location:e}){if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._position={hash:this._isViewerInPresentationMode?`page=${e.pageNumber}`:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation};if(this._popStateInProgress){return}if(n>0&&this._isPagesLoaded&&this._destination&&!this._destination.page){this._numPositionUpdates++}if(s>0){this._updateViewareaTimeout=setTimeout(()=>{if(!this._popStateInProgress){this._tryPushCurrentPosition(true)}this._updateViewareaTimeout=null},s)}}_popState({state:e}){const t=c(),i=this._currentHash!==t;this._currentHash=t;if(!e){this._uid++;const{hash:s,page:r,rotation:a}=this._parseCurrentHash();this._pushOrReplaceState({hash:s,page:r,rotation:a},true);return}if(!this._isValidState(e)){return}this._popStateInProgress=true;if(i){this._blockHashChange++;(0,l.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:h}).then(()=>{this._blockHashChange--})}const n=e.destination;this._updateInternalState(n,e.uid,true);if((0,o.isValidRotation)(n.rotation)){this.linkService.rotation=n.rotation}if(n.dest){this.linkService.goToDestination(n.dest)}else if(n.hash){this.linkService.setHash(n.hash)}else if(n.page){this.linkService.page=n.page}Promise.resolve().then(()=>{this._popStateInProgress=false})}_pageHide(){if(!this._destination||this._destination.temporary){this._tryPushCurrentPosition()}}_bindEvents(){if(this._boundEvents){return}this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)};this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea);window.addEventListener("popstate",this._boundEvents.popState);window.addEventListener("pagehide",this._boundEvents.pageHide)}_unbindEvents(){if(!this._boundEvents){return}this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea);window.removeEventListener("popstate",this._boundEvents.popState);window.removeEventListener("pagehide",this._boundEvents.pageHide);this._boundEvents=null}}t.PDFHistory=r;function a(e,t){if(typeof e!=="string"||typeof t!=="string"){return false}if(e===t){return true}const i=(0,o.parseQueryString)(e).get("nameddest");if(i===t){return true}return false}function d(i,n){function s(e,t){if(typeof e!==typeof t){return false}if(Array.isArray(e)||Array.isArray(t)){return false}if(e!==null&&typeof e==="object"&&t!==null){if(Object.keys(e).length!==Object.keys(t).length){return false}for(const i in e){if(!s(e[i],t[i])){return false}}return true}return e===t||Number.isNaN(e)&&Number.isNaN(t)}if(!(Array.isArray(i)&&Array.isArray(n))){return false}if(i.length!==n.length){return false}for(let e=0,t=i.length;e<t;e++){if(!s(i[e],n[e])){return false}}return true}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFLayerViewer=void 0;var n=i(11);class s extends n.BaseTreeViewer{constructor(e){super(e);this.l10n=e.l10n;this.eventBus._on("resetlayers",this._resetLayers.bind(this));this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset();this._optionalContentConfig=null}_dispatchEvent(e){this.eventBus.dispatch("layersloaded",{source:this,layersCount:e})}_bindLink(t,{groupId:e,input:i}){const n=()=>{this._optionalContentConfig.setVisibility(e,i.checked);this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};t.onclick=e=>{if(e.target===i){n();return true}else if(e.target!==t){return true}i.checked=!i.checked;n();return false}}async _setNestedName(e,{name:t=null}){if(typeof t==="string"){e.textContent=this._normalizeTextContent(t);return}e.textContent=await this.l10n.get("additional_layers");e.style.fontStyle="italic"}_addToggleButton(e,{name:t=null}){super._addToggleButton(e,t===null)}_toggleAllTreeItems(){if(!this._optionalContentConfig){return}super._toggleAllTreeItems()}render({optionalContentConfig:e,pdfDocument:t}){if(this._optionalContentConfig){this.reset()}this._optionalContentConfig=e||null;this._pdfDocument=t||null;const i=e?.getOrder();if(!i){this._dispatchEvent(0);return}const n=document.createDocumentFragment(),s=[{parent:n,groups:i}];let r=0,a=false;while(s.length>0){const o=s.shift();for(const l of o.groups){const h=document.createElement("div");h.className="treeItem";const c=document.createElement("a");h.appendChild(c);if(typeof l==="object"){a=true;this._addToggleButton(h,l);this._setNestedName(c,l);const d=document.createElement("div");d.className="treeItems";h.appendChild(d);s.push({parent:d,groups:l.order})}else{const u=e.getGroup(l);const f=document.createElement("input");this._bindLink(c,{groupId:l,input:f});f.type="checkbox";f.id=l;f.checked=u.visible;const p=document.createElement("label");p.setAttribute("for",l);p.textContent=this._normalizeTextContent(u.name);c.appendChild(f);c.appendChild(p);r++}o.parent.appendChild(h)}}this._finishRendering(n,r,a)}async _resetLayers(){if(!this._optionalContentConfig){return}const e=await this._pdfDocument.getOptionalContentConfig();this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(e)});this.render({optionalContentConfig:e,pdfDocument:this._pdfDocument})}}t.PDFLayerViewer=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.SimpleLinkService=t.PDFLinkService=void 0;var n=i(5);var o=i(3);class s{constructor({eventBus:e,externalLinkTarget:t=null,externalLinkRel:i=null,ignoreDestinationZoom:n=false}={}){this.eventBus=e;this.externalLinkTarget=t;this.externalLinkRel=i;this.externalLinkEnabled=true;this._ignoreDestinationZoom=n;this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null;this._pagesRefCache=null}setDocument(e,t=null){this.baseUrl=t;this.pdfDocument=e;this._pagesRefCache=Object.create(null)}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(e){this.pdfViewer.currentPageNumber=e}get rotation(){return this.pdfViewer.pagesRotation}set rotation(e){this.pdfViewer.pagesRotation=e}_goToDestinationHelper(t,i=null,n){const s=n[0];let e;if(typeof s==="object"&&s!==null){e=this._cachedPageNumber(s);if(!e){this.pdfDocument.getPageIndex(s).then(e=>{this.cachePageRef(e+1,s);this._goToDestinationHelper(t,i,n)}).catch(()=>{console.error(`PDFLinkService._goToDestinationHelper: "${s}" is not `+`a valid page reference, for dest="${t}".`)});return}}else if(Number.isInteger(s)){e=s+1}else{console.error(`PDFLinkService._goToDestinationHelper: "${s}" is not `+`a valid destination reference, for dest="${t}".`);return}if(!e||e<1||e>this.pagesCount){console.error(`PDFLinkService._goToDestinationHelper: "${e}" is not `+`a valid page number, for dest="${t}".`);return}if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.push({namedDest:i,explicitDest:n,pageNumber:e})}this.pdfViewer.scrollPageIntoView({pageNumber:e,destArray:n,ignoreDestinationZoom:this._ignoreDestinationZoom})}async goToDestination(e){if(!this.pdfDocument){return}let t,i;if(typeof e==="string"){t=e;i=await this.pdfDocument.getDestination(e)}else{t=null;i=await e}if(!Array.isArray(i)){console.error(`PDFLinkService.goToDestination: "${i}" is not `+`a valid destination array, for dest="${e}".`);return}this._goToDestinationHelper(e,t,i)}goToPage(e){if(!this.pdfDocument){return}const t=typeof e==="string"&&this.pdfViewer.pageLabelToPageNumber(e)||e|0;if(!(Number.isInteger(t)&&t>0&&t<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`);return}if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.pushPage(t)}this.pdfViewer.scrollPageIntoView({pageNumber:t})}addLinkAttributes(e,t,i=false){(0,n.addLinkAttributes)(e,{url:t,target:i?n.LinkTarget.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(e){if(typeof e==="string"){if(e.length>0){return this.getAnchorUrl("#"+escape(e))}}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0){return this.getAnchorUrl("#"+escape(t))}}return this.getAnchorUrl("")}getAnchorUrl(e){return(this.baseUrl||"")+e}setHash(e){if(!this.pdfDocument){return}let t,i;if(e.includes("=")){const n=(0,o.parseQueryString)(e);if(n.has("search")){this.eventBus.dispatch("findfromurlhash",{source:this,query:n.get("search").replace(/"/g,""),phraseSearch:n.get("phrase")==="true"})}if(n.has("page")){t=n.get("page")|0||1}if(n.has("zoom")){const s=n.get("zoom").split(",");const r=s[0];const a=parseFloat(r);if(!r.includes("Fit")){i=[null,{name:"XYZ"},s.length>1?s[1]|0:null,s.length>2?s[2]|0:null,a?a/100:r]}else{if(r==="Fit"||r==="FitB"){i=[null,{name:r}]}else if(r==="FitH"||r==="FitBH"||r==="FitV"||r==="FitBV"){i=[null,{name:r},s.length>1?s[1]|0:null]}else if(r==="FitR"){if(s.length!==5){console.error('PDFLinkService.setHash: Not enough parameters for "FitR".')}else{i=[null,{name:r},s[1]|0,s[2]|0,s[3]|0,s[4]|0]}}else{console.error(`PDFLinkService.setHash: "${r}" is not `+"a valid zoom value.")}}}if(i){this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:i,allowNegativeOffset:true})}else if(t){this.page=t}if(n.has("pagemode")){this.eventBus.dispatch("pagemode",{source:this,mode:n.get("pagemode")})}if(n.has("nameddest")){this.goToDestination(n.get("nameddest"))}}else{i=unescape(e);try{i=JSON.parse(i);if(!Array.isArray(i)){i=i.toString()}}catch(e){}if(typeof i==="string"||l(i)){this.goToDestination(i);return}console.error(`PDFLinkService.setHash: "${unescape(e)}" is not `+"a valid destination.")}}executeNamedAction(e){switch(e){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:e})}cachePageRef(e,t){if(!t){return}const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;this._pagesRefCache[i]=e}_cachedPageNumber(e){if(!e){return null}const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this._pagesRefCache?.[t]||null}isPageVisible(e){return this.pdfViewer.isPageVisible(e)}isPageCached(e){return this.pdfViewer.isPageCached(e)}}t.PDFLinkService=s;function l(t){if(!Array.isArray(t)){return false}const i=t.length;if(i<2){return false}const e=t[0];if(!(typeof e==="object"&&Number.isInteger(e.num)&&Number.isInteger(e.gen))&&!(Number.isInteger(e)&&e>=0)){return false}const n=t[1];if(!(typeof n==="object"&&typeof n.name==="string")){return false}let s=true;switch(n.name){case"XYZ":if(i!==5){return false}break;case"Fit":case"FitB":return i===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(i!==3){return false}break;case"FitR":if(i!==6){return false}s=false;break;default:return false}for(let e=2;e<i;e++){const r=t[e];if(!(typeof r==="number"||s&&r===null)){return false}}return true}class r{constructor(){this.externalLinkEnabled=true}get pagesCount(){return 0}get page(){return 0}set page(e){}get rotation(){return 0}set rotation(e){}async goToDestination(e){}goToPage(e){}addLinkAttributes(e,t,i=false){(0,n.addLinkAttributes)(e,{url:t,enabled:this.externalLinkEnabled})}getDestinationHash(e){return"#"}getAnchorUrl(e){return"#"}setHash(e){}executeNamedAction(e){}cachePageRef(e,t){}isPageVisible(e){return true}isPageCached(e){return true}}t.SimpleLinkService=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFOutlineViewer=void 0;var n=i(11);var d=i(5);var s=i(3);class r extends n.BaseTreeViewer{constructor(e){super(e);this.linkService=e.linkService;this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this));this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this));this.eventBus._on("pagechanging",e=>{this._currentPageNumber=e.pageNumber});this.eventBus._on("pagesloaded",e=>{this._isPagesLoaded=!!e.pagesCount;if(this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled){this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}});this.eventBus._on("sidebarviewchanged",e=>{this._sidebarView=e.view})}reset(){super.reset();this._outline=null;this._pageNumberToDestHashCapability=null;this._currentPageNumber=1;this._isPagesLoaded=null;if(this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled){this._currentOutlineItemCapability.resolve(false)}this._currentOutlineItemCapability=null}_dispatchEvent(e){this._currentOutlineItemCapability=(0,d.createPromiseCapability)();if(e===0||this._pdfDocument?.loadingParams.disableAutoFetch){this._currentOutlineItemCapability.resolve(false)}else if(this._isPagesLoaded!==null){this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:e,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(e,{url:t,newWindow:i,dest:n}){const{linkService:s}=this;if(t){s.addLinkAttributes(e,t,i);return}e.href=s.getDestinationHash(n);e.onclick=e=>{this._updateCurrentTreeItem(e.target.parentNode);if(n){s.goToDestination(n)}return false}}_setStyles(e,{bold:t,italic:i}){if(t){e.style.fontWeight="bold"}if(i){e.style.fontStyle="italic"}}_addToggleButton(e,{count:t,items:i}){let n=false;if(t<0){let e=i.length;if(e>0){const s=[...i];while(s.length>0){const{count:r,items:a}=s.shift();if(r>0&&a.length>0){e+=a.length;s.push(...a)}}}if(Math.abs(t)===e){n=true}}super._addToggleButton(e,n)}_toggleAllTreeItems(){if(!this._outline){return}super._toggleAllTreeItems()}render({outline:e,pdfDocument:t}){if(this._outline){this.reset()}this._outline=e||null;this._pdfDocument=t||null;if(!e){this._dispatchEvent(0);return}const i=document.createDocumentFragment();const n=[{parent:i,items:e}];let s=0,r=false;while(n.length>0){const a=n.shift();for(const o of a.items){const l=document.createElement("div");l.className="treeItem";const h=document.createElement("a");this._bindLink(h,o);this._setStyles(h,o);h.textContent=this._normalizeTextContent(o.title);l.appendChild(h);if(o.items.length>0){r=true;this._addToggleButton(l,o);const c=document.createElement("div");c.className="treeItems";l.appendChild(c);n.push({parent:c,items:o.items})}a.parent.appendChild(l);s++}}this._finishRendering(i,s,r)}async _currentOutlineItem(){if(!this._isPagesLoaded){throw new Error("_currentOutlineItem: All pages have not been loaded.")}if(!this._outline||!this._pdfDocument){return}const t=await this._getPageNumberToDestHash(this._pdfDocument);if(!t){return}this._updateCurrentTreeItem(null);if(this._sidebarView!==s.SidebarView.OUTLINE){return}for(let e=this._currentPageNumber;e>0;e--){const i=t.get(e);if(!i){continue}const n=this.container.querySelector(`a[href="${i}"]`);if(!n){continue}this._scrollToCurrentTreeItem(n.parentNode);break}}async _getPageNumberToDestHash(i){if(this._pageNumberToDestHashCapability){return this._pageNumberToDestHashCapability.promise}this._pageNumberToDestHashCapability=(0,d.createPromiseCapability)();const n=new Map,s=new Map;const r=[{nesting:0,items:this._outline}];while(r.length>0){const e=r.shift(),a=e.nesting;for(const{dest:o,items:l}of e.items){let e,t;if(typeof o==="string"){e=await i.getDestination(o);if(i!==this._pdfDocument){return null}}else{e=o}if(Array.isArray(e)){const[h]=e;if(typeof h==="object"&&h!==null){t=this.linkService._cachedPageNumber(h);if(!t){try{t=await i.getPageIndex(h)+1;if(i!==this._pdfDocument){return null}this.linkService.cachePageRef(t,h)}catch(e){}}}else if(Number.isInteger(h)){t=h+1}if(Number.isInteger(t)&&(!n.has(t)||a>s.get(t))){const c=this.linkService.getDestinationHash(o);n.set(t,c);s.set(t,a)}}if(l.length>0){r.push({nesting:a+1,items:l})}}}this._pageNumberToDestHashCapability.resolve(n.size>0?n:null);return this._pageNumberToDestHashCapability.promise}}t.PDFOutlineViewer=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFPresentationMode=void 0;var a=i(3);const n=1500;const s=3e3;const r="pdfPresentationMode";const o="pdfPresentationModeControls";const l=50;const h=.1;const c=50;const d=Math.PI/6;class u{constructor({container:e,pdfViewer:t,eventBus:i}){this.container=e;this.pdfViewer=t;this.eventBus=i;this.active=false;this.args=null;this.contextMenuOpen=false;this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0;this.touchSwipeState=null}request(){if(this.switchInProgress||this.active||!this.pdfViewer.pagesCount){return false}this._addFullscreenChangeListeners();this._setSwitchInProgress();this._notifyStateChange();if(this.container.requestFullscreen){this.container.requestFullscreen()}else if(this.container.mozRequestFullScreen){this.container.mozRequestFullScreen()}else if(this.container.webkitRequestFullscreen){this.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{return false}this.args={pageNumber:this.pdfViewer.currentPageNumber,scaleValue:this.pdfViewer.currentScaleValue,scrollMode:this.pdfViewer.scrollMode,spreadMode:this.pdfViewer.spreadMode};return true}_mouseWheel(e){if(!this.active){return}e.preventDefault();const t=(0,a.normalizeWheelEventDelta)(e);const i=Date.now();const n=this.mouseScrollTimeStamp;if(i>n&&i-n<l){return}if(this.mouseScrollDelta>0&&t<0||this.mouseScrollDelta<0&&t>0){this._resetMouseScrollState()}this.mouseScrollDelta+=t;if(Math.abs(this.mouseScrollDelta)>=h){const s=this.mouseScrollDelta;this._resetMouseScrollState();const r=s>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage();if(r){this.mouseScrollTimeStamp=i}}}get isFullscreen(){return!!(document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen)}_notifyStateChange(){let e=a.PresentationModeState.NORMAL;if(this.switchInProgress){e=a.PresentationModeState.CHANGING}else if(this.active){e=a.PresentationModeState.FULLSCREEN}this.eventBus.dispatch("presentationmodechanged",{source:this,state:e})}_setSwitchInProgress(){if(this.switchInProgress){clearTimeout(this.switchInProgress)}this.switchInProgress=setTimeout(()=>{this._removeFullscreenChangeListeners();delete this.switchInProgress;this._notifyStateChange()},n)}_resetSwitchInProgress(){if(this.switchInProgress){clearTimeout(this.switchInProgress);delete this.switchInProgress}}_enter(){this.active=true;this._resetSwitchInProgress();this._notifyStateChange();this.container.classList.add(r);setTimeout(()=>{this.pdfViewer.scrollMode=a.ScrollMode.PAGE;this.pdfViewer.spreadMode=a.SpreadMode.NONE;this.pdfViewer.currentPageNumber=this.args.pageNumber;this.pdfViewer.currentScaleValue="page-fit"},0);this._addWindowListeners();this._showControls();this.contextMenuOpen=false;window.getSelection().removeAllRanges()}_exit(){const e=this.pdfViewer.currentPageNumber;this.container.classList.remove(r);setTimeout(()=>{this.active=false;this._removeFullscreenChangeListeners();this._notifyStateChange();this.pdfViewer.scrollMode=this.args.scrollMode;this.pdfViewer.spreadMode=this.args.spreadMode;this.pdfViewer.currentScaleValue=this.args.scaleValue;this.pdfViewer.currentPageNumber=e;this.args=null},0);this._removeWindowListeners();this._hideControls();this._resetMouseScrollState();this.contextMenuOpen=false}_mouseDown(e){if(this.contextMenuOpen){this.contextMenuOpen=false;e.preventDefault();return}if(e.button===0){const t=e.target.href&&e.target.classList.contains("internalLink");if(!t){e.preventDefault();if(e.shiftKey){this.pdfViewer.previousPage()}else{this.pdfViewer.nextPage()}}}}_contextMenu(){this.contextMenuOpen=true}_showControls(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout)}else{this.container.classList.add(o)}this.controlsTimeout=setTimeout(()=>{this.container.classList.remove(o);delete this.controlsTimeout},s)}_hideControls(){if(!this.controlsTimeout){return}clearTimeout(this.controlsTimeout);this.container.classList.remove(o);delete this.controlsTimeout}_resetMouseScrollState(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0}_touchSwipe(t){if(!this.active){return}if(t.touches.length>1){this.touchSwipeState=null;return}switch(t.type){case"touchstart":this.touchSwipeState={startX:t.touches[0].pageX,startY:t.touches[0].pageY,endX:t.touches[0].pageX,endY:t.touches[0].pageY};break;case"touchmove":if(this.touchSwipeState===null){return}this.touchSwipeState.endX=t.touches[0].pageX;this.touchSwipeState.endY=t.touches[0].pageY;t.preventDefault();break;case"touchend":if(this.touchSwipeState===null){return}let e=0;const i=this.touchSwipeState.endX-this.touchSwipeState.startX;const n=this.touchSwipeState.endY-this.touchSwipeState.startY;const s=Math.abs(Math.atan2(n,i));if(Math.abs(i)>c&&(s<=d||s>=Math.PI-d)){e=i}else if(Math.abs(n)>c&&Math.abs(s-Math.PI/2)<=d){e=n}if(e>0){this.pdfViewer.previousPage()}else if(e<0){this.pdfViewer.nextPage()}break}}_addWindowListeners(){this.showControlsBind=this._showControls.bind(this);this.mouseDownBind=this._mouseDown.bind(this);this.mouseWheelBind=this._mouseWheel.bind(this);this.resetMouseScrollStateBind=this._resetMouseScrollState.bind(this);this.contextMenuBind=this._contextMenu.bind(this);this.touchSwipeBind=this._touchSwipe.bind(this);window.addEventListener("mousemove",this.showControlsBind);window.addEventListener("mousedown",this.mouseDownBind);window.addEventListener("wheel",this.mouseWheelBind,{passive:false});window.addEventListener("keydown",this.resetMouseScrollStateBind);window.addEventListener("contextmenu",this.contextMenuBind);window.addEventListener("touchstart",this.touchSwipeBind);window.addEventListener("touchmove",this.touchSwipeBind);window.addEventListener("touchend",this.touchSwipeBind)}_removeWindowListeners(){window.removeEventListener("mousemove",this.showControlsBind);window.removeEventListener("mousedown",this.mouseDownBind);window.removeEventListener("wheel",this.mouseWheelBind,{passive:false});window.removeEventListener("keydown",this.resetMouseScrollStateBind);window.removeEventListener("contextmenu",this.contextMenuBind);window.removeEventListener("touchstart",this.touchSwipeBind);window.removeEventListener("touchmove",this.touchSwipeBind);window.removeEventListener("touchend",this.touchSwipeBind);delete this.showControlsBind;delete this.mouseDownBind;delete this.mouseWheelBind;delete this.resetMouseScrollStateBind;delete this.contextMenuBind;delete this.touchSwipeBind}_fullscreenChange(){if(this.isFullscreen){this._enter()}else{this._exit()}}_addFullscreenChangeListeners(){this.fullscreenChangeBind=this._fullscreenChange.bind(this);window.addEventListener("fullscreenchange",this.fullscreenChangeBind);window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind);window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind)}_removeFullscreenChangeListeners(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind);window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind);window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind);delete this.fullscreenChangeBind}}t.PDFPresentationMode=u},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFRenderingQueue=void 0;var n=i(5);var s=i(3);const r=3e4;class a{constructor(){this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=false;this.isThumbnailViewEnabled=false}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null}if(this.pdfViewer.forceRendering(e)){return}if(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()){return}if(this.printing){return}if(this.onIdle){this.idleTimeout=setTimeout(this.onIdle.bind(this),r)}}getHighestPriority(e,i,n,t=false){const s=e.views,r=s.length;if(r===0){return null}for(let e=0;e<r;e++){const c=s[e].view;if(!this.isViewFinished(c)){return c}}const a=e.first.id,o=e.last.id;if(o-a+1>r){const d=e.ids;for(let e=1,t=o-a;e<t;e++){const u=n?a+e:o-e;if(d.has(u)){continue}const f=i[u-1];if(!this.isViewFinished(f)){return f}}}let l=n?o:a-2;let h=i[l];if(h&&!this.isViewFinished(h)){return h}if(t){l+=n?1:-1;h=i[l];if(h&&!this.isViewFinished(h)){return h}}return null}isViewFinished(e){return e.renderingState===s.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case s.RenderingStates.FINISHED:return false;case s.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId;e.resume();break;case s.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case s.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId;e.draw().finally(()=>{this.renderHighestPriority()}).catch(e=>{if(e instanceof n.RenderingCancelledException){return}console.error(`renderView: "${e}"`)});break}return true}}t.PDFRenderingQueue=a},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFScriptingManager=void 0;var c=i(3);var a=i(5);class n{constructor({eventBus:e,sandboxBundleSrc:t=null,scriptingFactory:i=null,docPropertiesLookup:n=null}){this._pdfDocument=null;this._pdfViewer=null;this._closeCapability=null;this._destroyCapability=null;this._scripting=null;this._mouseState=Object.create(null);this._ready=false;this._eventBus=e;this._sandboxBundleSrc=t;this._scriptingFactory=i;this._docPropertiesLookup=n}setViewer(e){this._pdfViewer=e}async setDocument(e){if(this._pdfDocument){await this._destroyScripting()}this._pdfDocument=e;if(!e){return}const[t,i,n]=await Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!t&&!n){await this._destroyScripting();return}if(e!==this._pdfDocument){return}try{this._scripting=this._createScripting()}catch(e){console.error(`PDFScriptingManager.setDocument: "${e?.message}".`);await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",e=>{if(e?.source!==window){return}this._updateFromSandbox(e.detail)});this._internalEvents.set("dispatcheventinsandbox",e=>{this._scripting?.dispatchEventInSandbox(e.detail)});this._internalEvents.set("pagechanging",({pageNumber:e,previous:t})=>{if(e===t){return}this._dispatchPageClose(t);this._dispatchPageOpen(e)});this._internalEvents.set("pagerendered",({pageNumber:e})=>{if(!this._pageOpenPending.has(e)){return}if(e!==this._pdfViewer.currentPageNumber){return}this._dispatchPageOpen(e)});this._internalEvents.set("pagesdestroy",async e=>{await this._dispatchPageClose(this._pdfViewer.currentPageNumber);await this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"});this._closeCapability?.resolve()});this._domEvents.set("mousedown",e=>{this._mouseState.isDown=true});this._domEvents.set("mouseup",e=>{this._mouseState.isDown=false});for(const[s,r]of this._internalEvents){this._eventBus._on(s,r)}for(const[s,r]of this._domEvents){window.addEventListener(s,r)}try{const a=await this._getDocProperties();if(e!==this._pdfDocument){return}await this._scripting.createSandbox({objects:t,calculationOrder:i,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...a,actions:n}});this._eventBus.dispatch("sandboxcreated",{source:this})}catch(e){console.error(`PDFScriptingManager.setDocument: "${e?.message}".`);await this._destroyScripting();return}await this._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"});await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,true);Promise.resolve().then(()=>{if(e===this._pdfDocument){this._ready=true}})}async dispatchWillSave(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(e){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,a.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,a.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,a.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,a.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(e){const t=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode;const{id:i,siblings:n,command:s,value:r}=e;if(!i){switch(s){case"clear":console.clear();break;case"error":console.error(r);break;case"layout":if(t){return}const o=(0,c.apiPageLayoutToViewerModes)(r);this._pdfViewer.spreadMode=o.spreadMode;break;case"page-num":this._pdfViewer.currentPageNumber=r+1;break;case"print":await this._pdfViewer.pagesPromise;this._eventBus.dispatch("print",{source:this});break;case"println":console.log(r);break;case"zoom":if(t){return}this._pdfViewer.currentScaleValue=r;break;case"SaveAs":this._eventBus.dispatch("save",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(t){return}this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(t){return}this._pdfViewer.decreaseScale();break}return}if(t){if(e.focus){return}}delete e.id;delete e.siblings;const a=n?[i,...n]:[i];for(const l of a){const h=document.getElementById(l);if(h){h.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e}))}else{this._pdfDocument?.annotationStorage.setValue(l,e)}}}async _dispatchPageOpen(t,e=false){const i=this._pdfDocument,n=this._visitedPages;if(e){this._closeCapability=(0,a.createPromiseCapability)()}if(!this._closeCapability){return}const s=this._pdfViewer.getPageView(t-1);if(s?.renderingState!==c.RenderingStates.FINISHED){this._pageOpenPending.add(t);return}this._pageOpenPending.delete(t);const r=(async()=>{const e=await(!n.has(t)?s.pdfPage?.getJSActions():null);if(i!==this._pdfDocument){return}await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:e})})();n.set(t,r)}async _dispatchPageClose(e){const t=this._pdfDocument,i=this._visitedPages;if(!this._closeCapability){return}if(this._pageOpenPending.has(e)){return}const n=i.get(e);if(!n){return}i.set(e,null);await n;if(t!==this._pdfDocument){return}await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e})}async _getDocProperties(){if(this._docPropertiesLookup){return this._docPropertiesLookup(this._pdfDocument)}throw new Error("_getDocProperties: Unable to lookup properties.")}_createScripting(){this._destroyCapability=(0,a.createPromiseCapability)();if(this._scripting){throw new Error("_createScripting: Scripting already exists.")}if(this._scriptingFactory){return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc})}throw new Error("_createScripting: Cannot create scripting.")}async _destroyScripting(){if(!this._scripting){this._pdfDocument=null;this._destroyCapability?.resolve();return}if(this._closeCapability){await Promise.race([this._closeCapability.promise,new Promise(e=>{setTimeout(e,1e3)})]).catch(e=>{});this._closeCapability=null}this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch(e){}for(const[e,t]of this._internalEvents){this._eventBus._off(e,t)}this._internalEvents.clear();for(const[e,t]of this._domEvents){window.removeEventListener(e,t)}this._domEvents.clear();this._pageOpenPending.clear();this._visitedPages.clear();this._scripting=null;delete this._mouseState.isDown;this._ready=false;this._destroyCapability?.resolve()}}t.PDFScriptingManager=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFSidebar=void 0;var a=i(3);const n="pdfSidebarNotification";class s{constructor({elements:e,pdfViewer:t,pdfThumbnailViewer:i,eventBus:n,l10n:s}){this.isOpen=false;this.active=a.SidebarView.THUMBS;this.isInitialViewSet=false;this.onToggled=null;this.pdfViewer=t;this.pdfThumbnailViewer=i;this.outerContainer=e.outerContainer;this.viewerContainer=e.viewerContainer;this.toggleButton=e.toggleButton;this.thumbnailButton=e.thumbnailButton;this.outlineButton=e.outlineButton;this.attachmentsButton=e.attachmentsButton;this.layersButton=e.layersButton;this.thumbnailView=e.thumbnailView;this.outlineView=e.outlineView;this.attachmentsView=e.attachmentsView;this.layersView=e.layersView;this._outlineOptionsContainer=e.outlineOptionsContainer;this._currentOutlineItemButton=e.currentOutlineItemButton;this.eventBus=n;this.l10n=s;this._addEventListeners()}reset(){this.isInitialViewSet=false;this._hideUINotification(true);this.switchView(a.SidebarView.THUMBS);this.outlineButton.disabled=false;this.attachmentsButton.disabled=false;this.layersButton.disabled=false;this._currentOutlineItemButton.disabled=true}get visibleView(){return this.isOpen?this.active:a.SidebarView.NONE}get isThumbnailViewVisible(){return this.isOpen&&this.active===a.SidebarView.THUMBS}get isOutlineViewVisible(){return this.isOpen&&this.active===a.SidebarView.OUTLINE}get isAttachmentsViewVisible(){return this.isOpen&&this.active===a.SidebarView.ATTACHMENTS}get isLayersViewVisible(){return this.isOpen&&this.active===a.SidebarView.LAYERS}setInitialView(e=a.SidebarView.NONE){if(this.isInitialViewSet){return}this.isInitialViewSet=true;if(e===a.SidebarView.NONE||e===a.SidebarView.UNKNOWN){this._dispatchEvent();return}if(!this._switchView(e,true)){this._dispatchEvent()}}switchView(e,t=false){this._switchView(e,t)}_switchView(e,t=false){const i=e!==this.active;let n=false;switch(e){case a.SidebarView.NONE:if(this.isOpen){this.close();return true}return false;case a.SidebarView.THUMBS:if(this.isOpen&&i){n=true}break;case a.SidebarView.OUTLINE:if(this.outlineButton.disabled){return false}break;case a.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled){return false}break;case a.SidebarView.LAYERS:if(this.layersButton.disabled){return false}break;default:console.error(`PDFSidebar._switchView: "${e}" is not a valid view.`);return false}this.active=e;this.thumbnailButton.classList.toggle("toggled",e===a.SidebarView.THUMBS);this.outlineButton.classList.toggle("toggled",e===a.SidebarView.OUTLINE);this.attachmentsButton.classList.toggle("toggled",e===a.SidebarView.ATTACHMENTS);this.layersButton.classList.toggle("toggled",e===a.SidebarView.LAYERS);this.thumbnailView.classList.toggle("hidden",e!==a.SidebarView.THUMBS);this.outlineView.classList.toggle("hidden",e!==a.SidebarView.OUTLINE);this.attachmentsView.classList.toggle("hidden",e!==a.SidebarView.ATTACHMENTS);this.layersView.classList.toggle("hidden",e!==a.SidebarView.LAYERS);this._outlineOptionsContainer.classList.toggle("hidden",e!==a.SidebarView.OUTLINE);if(t&&!this.isOpen){this.open();return true}if(n){this._updateThumbnailViewer();this._forceRendering()}if(i){this._dispatchEvent()}return i}open(){if(this.isOpen){return}this.isOpen=true;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.outerContainer.classList.add("sidebarMoving","sidebarOpen");if(this.active===a.SidebarView.THUMBS){this._updateThumbnailViewer()}this._forceRendering();this._dispatchEvent();this._hideUINotification()}close(){if(!this.isOpen){return}this.isOpen=false;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.outerContainer.classList.add("sidebarMoving");this.outerContainer.classList.remove("sidebarOpen");this._forceRendering();this._dispatchEvent()}toggle(){if(this.isOpen){this.close()}else{this.open()}}_dispatchEvent(){this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}_forceRendering(){if(this.onToggled){this.onToggled()}else{this.pdfViewer.forceRendering();this.pdfThumbnailViewer.forceRendering()}}_updateThumbnailViewer(){const{pdfViewer:t,pdfThumbnailViewer:i}=this;const n=t.pagesCount;for(let e=0;e<n;e++){const s=t.getPageView(e);if(s?.renderingState===a.RenderingStates.FINISHED){const r=i.getThumbnail(e);r.setImage(s)}}i.scrollThumbnailIntoView(t.currentPageNumber)}_showUINotification(){this.l10n.get("toggle_sidebar_notification2.title").then(e=>{this.toggleButton.title=e});if(!this.isOpen){this.toggleButton.classList.add(n)}}_hideUINotification(e=false){if(this.isOpen||e){this.toggleButton.classList.remove(n)}if(e){this.l10n.get("toggle_sidebar.title").then(e=>{this.toggleButton.title=e})}}_addEventListeners(){this.viewerContainer.addEventListener("transitionend",e=>{if(e.target===this.viewerContainer){this.outerContainer.classList.remove("sidebarMoving")}});this.toggleButton.addEventListener("click",()=>{this.toggle()});this.thumbnailButton.addEventListener("click",()=>{this.switchView(a.SidebarView.THUMBS)});this.outlineButton.addEventListener("click",()=>{this.switchView(a.SidebarView.OUTLINE)});this.outlineButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})});this.attachmentsButton.addEventListener("click",()=>{this.switchView(a.SidebarView.ATTACHMENTS)});this.layersButton.addEventListener("click",()=>{this.switchView(a.SidebarView.LAYERS)});this.layersButton.addEventListener("dblclick",()=>{this.eventBus.dispatch("resetlayers",{source:this})});this._currentOutlineItemButton.addEventListener("click",()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})});const t=(e,t,i)=>{t.disabled=!e;if(e){this._showUINotification()}else if(this.active===i){this.switchView(a.SidebarView.THUMBS)}};this.eventBus._on("outlineloaded",e=>{t(e.outlineCount,this.outlineButton,a.SidebarView.OUTLINE);e.currentOutlineItemPromise.then(e=>{if(!this.isInitialViewSet){return}this._currentOutlineItemButton.disabled=!e})});this.eventBus._on("attachmentsloaded",e=>{t(e.attachmentsCount,this.attachmentsButton,a.SidebarView.ATTACHMENTS)});this.eventBus._on("layersloaded",e=>{t(e.layersCount,this.layersButton,a.SidebarView.LAYERS)});this.eventBus._on("presentationmodechanged",e=>{if(e.state===a.PresentationModeState.NORMAL&&this.isThumbnailViewVisible){this._updateThumbnailViewer()}})}}t.PDFSidebar=s},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFSidebarResizer=void 0;const i="--sidebar-width";const n=200;const s="sidebarResizing";class r{constructor(e,t,i){this.isRTL=false;this.sidebarOpen=false;this.doc=document.documentElement;this._width=null;this._outerContainerWidth=null;this._boundEvents=Object.create(null);this.outerContainer=e.outerContainer;this.resizer=e.resizer;this.eventBus=t;i.getDirection().then(e=>{this.isRTL=e==="rtl"});this._addEventListeners()}get outerContainerWidth(){return this._outerContainerWidth||=this.outerContainer.clientWidth}_updateWidth(e=0){const t=Math.floor(this.outerContainerWidth/2);if(e>t){e=t}if(e<n){e=n}if(e===this._width){return false}this._width=e;this.doc.style.setProperty(i,`${e}px`);return true}_mouseMove(e){let t=e.clientX;if(this.isRTL){t=this.outerContainerWidth-t}this._updateWidth(t)}_mouseUp(e){this.outerContainer.classList.remove(s);this.eventBus.dispatch("resize",{source:this});const t=this._boundEvents;window.removeEventListener("mousemove",t.mouseMove);window.removeEventListener("mouseup",t.mouseUp)}_addEventListeners(){const t=this._boundEvents;t.mouseMove=this._mouseMove.bind(this);t.mouseUp=this._mouseUp.bind(this);this.resizer.addEventListener("mousedown",e=>{if(e.button!==0){return}this.outerContainer.classList.add(s);window.addEventListener("mousemove",t.mouseMove);window.addEventListener("mouseup",t.mouseUp)});this.eventBus._on("sidebarviewchanged",e=>{this.sidebarOpen=!!e?.view});this.eventBus._on("resize",e=>{if(e?.source!==window){return}this._outerContainerWidth=null;if(!this._width){return}if(!this.sidebarOpen){this._updateWidth(this._width);return}this.outerContainer.classList.add(s);const t=this._updateWidth(this._width);Promise.resolve().then(()=>{this.outerContainer.classList.remove(s);if(t){this.eventBus.dispatch("resize",{source:this})}})})}}t.PDFSidebarResizer=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFThumbnailViewer=void 0;var l=i(3);var h=i(26);const c=-19;const d="selected";class n{constructor({container:e,eventBus:t,linkService:i,renderingQueue:n,l10n:s}){this.container=e;this.linkService=i;this.renderingQueue=n;this.l10n=s;this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdated.bind(this));this._resetView();t._on("optionalcontentconfigchanged",()=>{this._setImageDisabled=true})}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(e){return this._thumbnails[e]}_getVisibleThumbs(){return(0,l.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(t){if(!this.pdfDocument){return}const i=this._thumbnails[t-1];if(!i){console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}if(t!==this._currentPageNumber){const e=this._thumbnails[this._currentPageNumber-1];e.div.classList.remove(d);i.div.classList.add(d)}const{first:n,last:s,views:r}=this._getVisibleThumbs();if(r.length>0){let e=false;if(t<=n.id||t>=s.id){e=true}else{for(const{id:a,percent:o}of r){if(a!==t){continue}e=o<100;break}}if(e){(0,l.scrollIntoView)(i.div,{top:c})}}this._currentPageNumber=t}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!(0,l.isValidRotation)(e)){throw new Error("Invalid thumbnails rotation angle.")}if(!this.pdfDocument){return}if(this._pagesRotation===e){return}this._pagesRotation=e;const t={rotation:e};for(const i of this._thumbnails){i.update(t)}}cleanup(){for(let e=0,t=this._thumbnails.length;e<t;e++){if(this._thumbnails[e]&&this._thumbnails[e].renderingState!==l.RenderingStates.FINISHED){this._thumbnails[e].reset()}}h.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[];this._currentPageNumber=1;this._pageLabels=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._setImageDisabled=false;this.container.textContent=""}setDocument(o){if(this.pdfDocument){this._cancelRendering();this._resetView()}this.pdfDocument=o;if(!o){return}const e=o.getPage(1);const l=o.getOptionalContentConfig();e.then(e=>{this._optionalContentConfigPromise=l;const t=o.numPages;const i=e.getViewport({scale:1});const n=()=>{return this._setImageDisabled};for(let e=1;e<=t;++e){const a=new h.PDFThumbnailView({container:this.container,id:e,defaultViewport:i.clone(),optionalContentConfigPromise:l,linkService:this.linkService,renderingQueue:this.renderingQueue,checkSetImageDisabled:n,l10n:this.l10n});this._thumbnails.push(a)}const s=this._thumbnails[0];if(s){s.setPdfPage(e)}const r=this._thumbnails[this._currentPageNumber-1];r.div.classList.add(d)}).catch(e=>{console.error("Unable to initialize thumbnail viewer",e)})}_cancelRendering(){for(let e=0,t=this._thumbnails.length;e<t;e++){if(this._thumbnails[e]){this._thumbnails[e].cancelRendering()}}}setPageLabels(e){if(!this.pdfDocument){return}if(!e){this._pageLabels=null}else if(!(Array.isArray(e)&&this.pdfDocument.numPages===e.length)){this._pageLabels=null;console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")}else{this._pageLabels=e}for(let e=0,t=this._thumbnails.length;e<t;e++){this._thumbnails[e].setPageLabel(this._pageLabels?.[e]??null)}}async#ensurePdfPageLoaded(e){if(e.pdfPage){return e.pdfPage}try{const t=await this.pdfDocument.getPage(e.id);if(!e.pdfPage){e.setPdfPage(t)}return t}catch(e){console.error("Unable to get page for thumb view",e);return null}}#getScrollAhead(e){if(e.first?.id===1){return true}else if(e.last?.id===this._thumbnails.length){return false}return this.scroll.down}forceRendering(){const e=this._getVisibleThumbs();const t=this.#getScrollAhead(e);const i=this.renderingQueue.getHighestPriority(e,this._thumbnails,t);if(i){this.#ensurePdfPageLoaded(i).then(()=>{this.renderingQueue.renderView(i)});return true}return false}}t.PDFThumbnailViewer=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.TempImageFactory=t.PDFThumbnailView=void 0;var g=i(3);var c=i(5);const d=2;const o=3;const m=1;const _=98;class l{static#tempCanvas=null;static getCanvas(e,t){const i=this.#tempCanvas||=document.createElement("canvas");i.width=e;i.height=t;i.mozOpaque=true;const n=i.getContext("2d",{alpha:false});n.save();n.fillStyle="rgb(255, 255, 255)";n.fillRect(0,0,e,t);n.restore();return[i,i.getContext("2d")]}static destroyCanvas(){const e=this.#tempCanvas;if(e){e.width=0;e.height=0}this.#tempCanvas=null}}t.TempImageFactory=l;class n{constructor({container:e,id:t,defaultViewport:i,optionalContentConfigPromise:n,linkService:s,renderingQueue:r,checkSetImageDisabled:a,l10n:o}){this.id=t;this.renderingId="thumbnail"+t;this.pageLabel=null;this.pdfPage=null;this.rotation=0;this.viewport=i;this.pdfPageRotate=i.rotation;this._optionalContentConfigPromise=n||null;this.linkService=s;this.renderingQueue=r;this.renderTask=null;this.renderingState=g.RenderingStates.INITIAL;this.resume=null;this._checkSetImageDisabled=a||function(){return false};const l=this.viewport.width,h=this.viewport.height,c=l/h;this.canvasWidth=_;this.canvasHeight=this.canvasWidth/c|0;this.scale=this.canvasWidth/l;this.l10n=o;const d=document.createElement("a");d.href=s.getAnchorUrl("#page="+t);this._thumbPageTitle.then(e=>{d.title=e});d.onclick=function(){s.goToPage(t);return false};this.anchor=d;const u=document.createElement("div");u.className="thumbnail";u.setAttribute("data-page-number",this.id);this.div=u;const f=document.createElement("div");f.className="thumbnailSelectionRing";const p=2*m;f.style.width=this.canvasWidth+p+"px";f.style.height=this.canvasHeight+p+"px";this.ring=f;u.appendChild(f);d.appendChild(u);e.appendChild(d)}setPdfPage(e){this.pdfPage=e;this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:1,rotation:t});this.reset()}reset(){this.cancelRendering();this.renderingState=g.RenderingStates.INITIAL;const e=this.viewport.width,t=this.viewport.height,i=e/t;this.canvasHeight=this.canvasWidth/i|0;this.scale=this.canvasWidth/e;this.div.removeAttribute("data-loaded");const n=this.ring;n.textContent="";const s=2*m;n.style.width=this.canvasWidth+s+"px";n.style.height=this.canvasHeight+s+"px";if(this.canvas){this.canvas.width=0;this.canvas.height=0;delete this.canvas}if(this.image){this.image.removeAttribute("src");delete this.image}}update({rotation:e=null}){if(typeof e==="number"){this.rotation=e}const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:t});this.reset()}cancelRendering(){if(this.renderTask){this.renderTask.cancel();this.renderTask=null}this.resume=null}_getPageDrawContext(e=1){const t=document.createElement("canvas");t.mozOpaque=true;const i=t.getContext("2d",{alpha:false});const n=(0,g.getOutputScale)(i);t.width=e*this.canvasWidth*n.sx|0;t.height=e*this.canvasHeight*n.sy|0;const s=n.scaled?[n.sx,0,0,n.sy,0,0]:null;return{ctx:i,canvas:t,transform:s}}_convertCanvasToImage(e){if(this.renderingState!==g.RenderingStates.FINISHED){throw new Error("_convertCanvasToImage: Rendering has not finished.")}const t=this._reduceImage(e);const i=document.createElement("img");i.className="thumbnailImage";this._thumbPageCanvas.then(e=>{i.setAttribute("aria-label",e)});i.style.width=this.canvasWidth+"px";i.style.height=this.canvasHeight+"px";i.src=t.toDataURL();this.image=i;this.div.setAttribute("data-loaded",true);this.ring.appendChild(i);t.width=0;t.height=0}draw(){if(this.renderingState!==g.RenderingStates.INITIAL){console.error("Must be in new state before drawing");return Promise.resolve()}const{pdfPage:e}=this;if(!e){this.renderingState=g.RenderingStates.FINISHED;return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=g.RenderingStates.RUNNING;const t=async(e=null)=>{if(l===this.renderTask){this.renderTask=null}if(e instanceof c.RenderingCancelledException){return}this.renderingState=g.RenderingStates.FINISHED;this._convertCanvasToImage(n);if(e){throw e}};const{ctx:i,canvas:n,transform:s}=this._getPageDrawContext(d);const r=this.viewport.clone({scale:d*this.scale});const a=e=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=g.RenderingStates.PAUSED;this.resume=()=>{this.renderingState=g.RenderingStates.RUNNING;e()};return}e()};const o={canvasContext:i,transform:s,viewport:r,optionalContentConfigPromise:this._optionalContentConfigPromise};const l=this.renderTask=e.render(o);l.onContinue=a;const h=l.promise.then(function(){return t(null)},function(e){return t(e)});h.finally(()=>{n.width=0;n.height=0;const e=this.linkService.isPageCached(this.id);if(!e){this.pdfPage?.cleanup()}});return h}setImage(e){if(this._checkSetImageDisabled()){return}if(this.renderingState!==g.RenderingStates.INITIAL){return}const{canvas:t,pdfPage:i}=e;if(!t){return}if(!this.pdfPage){this.setPdfPage(i)}this.renderingState=g.RenderingStates.FINISHED;this._convertCanvasToImage(t)}_reduceImage(e){const{ctx:t,canvas:i}=this._getPageDrawContext();if(e.width<=2*i.width){t.drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height);return i}let n=i.width<<o;let s=i.height<<o;const[r,a]=l.getCanvas(n,s);while(n>e.width||s>e.height){n>>=1;s>>=1}a.drawImage(e,0,0,e.width,e.height,0,0,n,s);while(n>2*i.width){a.drawImage(r,0,0,n,s,0,0,n>>1,s>>1);n>>=1;s>>=1}t.drawImage(r,0,0,n,s,0,0,i.width,i.height);return i}get _thumbPageTitle(){return this.l10n.get("thumb_page_title",{page:this.pageLabel??this.id})}get _thumbPageCanvas(){return this.l10n.get("thumb_page_canvas",{page:this.pageLabel??this.id})}setPageLabel(e){this.pageLabel=typeof e==="string"?e:null;this._thumbPageTitle.then(e=>{this.anchor.title=e});if(this.renderingState!==g.RenderingStates.FINISHED){return}this._thumbPageCanvas.then(e=>{this.image?.setAttribute("aria-label",e)})}}t.PDFThumbnailView=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFViewer=t.PDFSinglePageViewer=void 0;var n=i(3);var s=i(28);class r extends s.BaseViewer{}t.PDFViewer=r;class a extends s.BaseViewer{_resetView(){super._resetView();this._scrollMode=n.ScrollMode.PAGE;this._spreadMode=n.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}t.PDFSinglePageViewer=a},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PagesCountLimit=t.PDFPageViewBuffer=t.BaseViewer=void 0;var b=i(5);var P=i(3);var d=i(29);var u=i(30);var p=i(31);var n=i(21);var s=i(18);var r=i(32);var a=i(33);var o=i(34);var l=i(35);const h=10;const c="enablePermissions";const g={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:500};t.PagesCountLimit=g;class f{#buf=new Set;#size=0;constructor(e){this.#size=e}push(e){const t=this.#buf;if(t.has(e)){t.delete(e)}t.add(e);if(t.size>this.#size){this.#destroyFirstView()}}resize(e,t=null){this.#size=e;const i=this.#buf;if(t){const n=i.size;let e=1;for(const s of i){if(t.has(s.id)){i.delete(s);i.add(s)}if(++e>n){break}}}while(i.size>this.#size){this.#destroyFirstView()}}has(e){return this.#buf.has(e)}[Symbol.iterator](){return this.#buf.keys()}#destroyFirstView(){const e=this.#buf.keys().next().value;e?.destroy();this.#buf.delete(e)}}t.PDFPageViewBuffer=f;class m{#buffer=null;#annotationMode=b.AnnotationMode.ENABLE_FORMS;#previousAnnotationMode=null;#enablePermissions=false;#previousContainerHeight=0;#scrollModePageState=null;constructor(e){if(this.constructor===m){throw new Error("Cannot initialize BaseViewer.")}const t="2.12.313";if(b.version!==t){throw new Error(`The API version "${b.version}" does not match the Viewer version "${t}".`)}this.container=e.container;this.viewer=e.viewer||e.container.firstElementChild;if(!(this.container?.tagName.toUpperCase()==="DIV"&&this.viewer?.tagName.toUpperCase()==="DIV")){throw new Error("Invalid `container` and/or `viewer` option.")}if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute"){throw new Error("The `container` must be absolutely positioned.")}this.eventBus=e.eventBus;this.linkService=e.linkService||new s.SimpleLinkService;this.downloadManager=e.downloadManager||null;this.findController=e.findController||null;this._scriptingManager=e.scriptingManager||null;this.removePageBorders=e.removePageBorders||false;this.textLayerMode=e.textLayerMode??P.TextLayerMode.ENABLE;this.#annotationMode=e.annotationMode??b.AnnotationMode.ENABLE_FORMS;this.imageResourcesPath=e.imageResourcesPath||"";this.enablePrintAutoRotate=e.enablePrintAutoRotate||false;this.renderer=e.renderer||P.RendererType.CANVAS;this.useOnlyCssZoom=e.useOnlyCssZoom||false;this.maxCanvasPixels=e.maxCanvasPixels;this.l10n=e.l10n||u.NullL10n;this.#enablePermissions=e.enablePermissions||false;this.defaultRenderingQueue=!e.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new n.PDFRenderingQueue;this.renderingQueue.setViewer(this)}else{this.renderingQueue=e.renderingQueue}this._doc=document.documentElement;this.scroll=(0,P.watchScroll)(this.container,this._scrollUpdate.bind(this));this.presentationModeState=P.PresentationModeState.UNKNOWN;this._onBeforeDraw=this._onAfterDraw=null;this._resetView();if(this.removePageBorders){this.viewer.classList.add("removePageBorders")}Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}get pageViewsReady(){if(!this._pagesCapability.settled){return false}return this._pages.every(function(e){return e?.pdfPage})}get renderForms(){return this.#annotationMode===b.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e)){throw new Error("Invalid page number.")}if(!this.pdfDocument){return}if(!this._setCurrentPageNumber(e,true)){console.error(`currentPageNumber: "${e}" is not a valid page.`)}}_setCurrentPageNumber(e,t=false){if(this._currentPageNumber===e){if(t){this._resetCurrentPageView()}return true}if(!(0<e&&e<=this.pagesCount)){return false}const i=this._currentPageNumber;this._currentPageNumber=e;this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:this._pageLabels?.[e-1]??null,previous:i});if(t){this._resetCurrentPageView()}return true}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(e){if(!this.pdfDocument){return}let t=e|0;if(this._pageLabels){const i=this._pageLabels.indexOf(e);if(i>=0){t=i+1}}if(!this._setCurrentPageNumber(t,true)){console.error(`currentPageLabel: "${e}" is not a valid page.`)}}get currentScale(){return this._currentScale!==P.UNKNOWN_SCALE?this._currentScale:P.DEFAULT_SCALE}set currentScale(e){if(isNaN(e)){throw new Error("Invalid numeric scale.")}if(!this.pdfDocument){return}this._setScale(e,false)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){if(!this.pdfDocument){return}this._setScale(e,false)}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!(0,P.isValidRotation)(e)){throw new Error("Invalid pages rotation angle.")}if(!this.pdfDocument){return}e%=360;if(e<0){e+=360}if(this._pagesRotation===e){return}this._pagesRotation=e;const t=this._currentPageNumber;const i={rotation:e};for(const n of this._pages){n.update(i)}if(this._currentScaleValue){this._setScale(this._currentScaleValue,true)}this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t});if(this.defaultRenderingQueue){this.update()}}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#initializePermissions(e){if(!e){return}if(!e.includes(b.PermissionFlag.COPY)){this.viewer.classList.add(c)}if(!e.includes(b.PermissionFlag.MODIFY_ANNOTATIONS)&&!e.includes(b.PermissionFlag.FILL_INTERACTIVE_FORMS)){if(this.#annotationMode===b.AnnotationMode.ENABLE_FORMS){this.#previousAnnotationMode=this.#annotationMode;this.#annotationMode=b.AnnotationMode.ENABLE}}}#onePageRenderedOrForceFetch(){if(!this.container.offsetParent||this._getVisiblePages().views.length===0){return Promise.resolve()}return this._onePageRenderedCapability.promise}setDocument(c){if(this.pdfDocument){this.eventBus.dispatch("pagesdestroy",{source:this});this._cancelRendering();this._resetView();if(this.findController){this.findController.setDocument(null)}if(this._scriptingManager){this._scriptingManager.setDocument(null)}}this.pdfDocument=c;if(!c){return}const d=c.isPureXfa;const u=c.numPages;const e=c.getPage(1);const f=c.getOptionalContentConfig();const t=this.#enablePermissions?c.getPermissions():Promise.resolve();if(u>g.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const i=this._scrollMode=P.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:i})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:u})},()=>{});this._onBeforeDraw=e=>{const t=this._pages[e.pageNumber-1];if(!t){return}this.#buffer.push(t)};this.eventBus._on("pagerender",this._onBeforeDraw);this._onAfterDraw=e=>{if(e.cssTransform||this._onePageRenderedCapability.settled){return}this._onePageRenderedCapability.resolve({timestamp:e.timestamp});this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null};this.eventBus._on("pagerendered",this._onAfterDraw);Promise.all([e,t]).then(([e,t])=>{if(c!==this.pdfDocument){return}this._firstPageCapability.resolve(e);this._optionalContentConfigPromise=f;this.#initializePermissions(t);const i=this._scrollMode===P.ScrollMode.PAGE?null:this.viewer;const n=this.currentScale;const s=e.getViewport({scale:n*b.PixelsPerInch.PDF_TO_CSS_UNITS});const r=this.textLayerMode!==P.TextLayerMode.DISABLE&&!d?this:null;const a=this.#annotationMode!==b.AnnotationMode.DISABLE?this:null;const o=d?this:null;for(let e=1;e<=u;++e){const h=new p.PDFPageView({container:i,eventBus:this.eventBus,id:e,scale:n,defaultViewport:s.clone(),optionalContentConfigPromise:f,renderingQueue:this.renderingQueue,textLayerFactory:r,textLayerMode:this.textLayerMode,annotationLayerFactory:a,annotationMode:this.#annotationMode,xfaLayerFactory:o,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,l10n:this.l10n});this._pages.push(h)}const l=this._pages[0];if(l){l.setPdfPage(e);this.linkService.cachePageRef(1,e.ref)}if(this._scrollMode===P.ScrollMode.PAGE){this.#ensurePageViewVisible()}else if(this._spreadMode!==P.SpreadMode.NONE){this._updateSpreadMode()}this.#onePageRenderedOrForceFetch().then(async()=>{if(this.findController){this.findController.setDocument(c)}if(this._scriptingManager){this._scriptingManager.setDocument(c)}if(c.loadingParams.disableAutoFetch||u>g.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let n=u-1;if(n<=0){this._pagesCapability.resolve();return}for(let i=2;i<=u;++i){const e=c.getPage(i).then(e=>{const t=this._pages[i-1];if(!t.pdfPage){t.setPdfPage(e)}this.linkService.cachePageRef(i,e.ref);if(--n===0){this._pagesCapability.resolve()}},e=>{console.error(`Unable to get page ${i} to initialize viewer`,e);if(--n===0){this._pagesCapability.resolve()}});if(i%g.PAUSE_EAGER_PAGE_INIT===0){await e}}});this.eventBus.dispatch("pagesinit",{source:this});c.getMetadata().then(({info:e})=>{if(c!==this.pdfDocument){return}if(e.Language){this.viewer.lang=e.Language}});if(this.defaultRenderingQueue){this.update()}}).catch(e=>{console.error("Unable to initialize viewer",e);this._pagesCapability.reject(e)})}setPageLabels(e){if(!this.pdfDocument){return}if(!e){this._pageLabels=null}else if(!(Array.isArray(e)&&this.pdfDocument.numPages===e.length)){this._pageLabels=null;console.error(`setPageLabels: Invalid page labels.`)}else{this._pageLabels=e}for(let e=0,t=this._pages.length;e<t;e++){this._pages[e].setPageLabel(this._pageLabels?.[e]??null)}}_resetView(){this._pages=[];this._currentPageNumber=1;this._currentScale=P.UNKNOWN_SCALE;this._currentScaleValue=null;this._pageLabels=null;this.#buffer=new f(h);this._location=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._firstPageCapability=(0,b.createPromiseCapability)();this._onePageRenderedCapability=(0,b.createPromiseCapability)();this._pagesCapability=(0,b.createPromiseCapability)();this._scrollMode=P.ScrollMode.VERTICAL;this._previousScrollMode=P.ScrollMode.UNKNOWN;this._spreadMode=P.SpreadMode.NONE;this.#scrollModePageState={previousPageNumber:1,scrollDown:true,pages:[]};if(this._onBeforeDraw){this.eventBus._off("pagerender",this._onBeforeDraw);this._onBeforeDraw=null}if(this._onAfterDraw){this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}this.viewer.textContent="";this._updateScrollMode();this.viewer.removeAttribute("lang");this.viewer.classList.remove(c);if(this.#previousAnnotationMode!==null){this.#annotationMode=this.#previousAnnotationMode;this.#previousAnnotationMode=null}}#ensurePageViewVisible(){if(this._scrollMode!==P.ScrollMode.PAGE){throw new Error("#ensurePageViewVisible: Invalid scrollMode value.")}const t=this._currentPageNumber,i=this.#scrollModePageState,n=this.viewer;n.textContent="";i.pages.length=0;if(this._spreadMode===P.SpreadMode.NONE){const s=this._pages[t-1];if(this.isInPresentationMode){const e=document.createElement("div");e.className="spread";const r=document.createElement("div");r.className="dummyPage";r.style.height=`${this.container.clientHeight}px`;e.appendChild(r);e.appendChild(s.div);n.appendChild(e)}else{n.appendChild(s.div)}i.pages.push(s)}else{const a=new Set,o=this._spreadMode-1;if(t%2!==o){a.add(t-1);a.add(t)}else{a.add(t-2);a.add(t-1)}let e=null;for(const l of a){const s=this._pages[l];if(!s){continue}if(e===null){e=document.createElement("div");e.className="spread";n.appendChild(e)}else if(l%2===o){e=e.cloneNode(false);n.appendChild(e)}e.appendChild(s.div);i.pages.push(s)}}i.scrollDown=t>=i.previousPageNumber;i.previousPageNumber=t}_scrollUpdate(){if(this.pagesCount===0){return}this.update()}_scrollIntoView({pageDiv:e,pageSpot:t=null,pageNumber:i=null}){if(this._scrollMode===P.ScrollMode.PAGE){if(i){this._setCurrentPageNumber(i)}this.#ensurePageViewVisible();this.update()}if(!t&&!this.isInPresentationMode){const n=e.offsetLeft+e.clientLeft;const s=n+e.clientWidth;const{scrollLeft:r,clientWidth:a}=this.container;if(this._scrollMode===P.ScrollMode.HORIZONTAL||n<r||s>r+a){t={left:0,top:0}}}(0,P.scrollIntoView)(e,t)}#isSameScale(e){if(this.isInPresentationMode&&this.container.clientHeight!==this.#previousContainerHeight){return false}return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}_setScaleUpdatePages(e,t,i=false,n=false){this._currentScaleValue=t.toString();if(this.#isSameScale(e)){if(n){this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t})}return}this._doc.style.setProperty("--zoom-factor",e);this._doc.style.setProperty("--viewport-scale-factor",e*b.PixelsPerInch.PDF_TO_CSS_UNITS);const s={scale:e};for(const r of this._pages){r.update(s)}this._currentScale=e;if(!i){let e=this._currentPageNumber,t;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)){e=this._location.pageNumber;t=[null,{name:"XYZ"},this._location.left,this._location.top,null]}this.scrollPageIntoView({pageNumber:e,destArray:t,allowNegativeOffset:true})}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:n?t:undefined});if(this.defaultRenderingQueue){this.update()}this.#previousContainerHeight=this.container.clientHeight}get _pageWidthScaleFactor(){if(this._spreadMode!==P.SpreadMode.NONE&&this._scrollMode!==P.ScrollMode.HORIZONTAL){return 2}return 1}_setScale(i,n=false){let s=parseFloat(i);if(s>0){this._setScaleUpdatePages(s,i,n,false)}else{const r=this._pages[this._currentPageNumber-1];if(!r){return}let e=P.SCROLLBAR_PADDING,t=P.VERTICAL_PADDING;if(this.isInPresentationMode){e=t=4}else if(this.removePageBorders){e=t=0}if(this._scrollMode===P.ScrollMode.HORIZONTAL){[e,t]=[t,e]}const a=(this.container.clientWidth-e)/r.width*r.scale/this._pageWidthScaleFactor;const o=(this.container.clientHeight-t)/r.height*r.scale;switch(i){case"page-actual":s=1;break;case"page-width":s=a;break;case"page-height":s=o;break;case"page-fit":s=Math.min(a,o);break;case"auto":const l=(0,P.isPortraitOrientation)(r)?a:Math.min(o,a);s=Math.min(P.MAX_AUTO_SCALE,l);break;default:console.error(`_setScale: "${i}" is an unknown zoom value.`);return}this._setScaleUpdatePages(s,i,n,true)}}_resetCurrentPageView(){if(this.isInPresentationMode){this._setScale(this._currentScaleValue,true)}const e=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:e.div})}pageLabelToPageNumber(e){if(!this._pageLabels){return null}const t=this._pageLabels.indexOf(e);if(t<0){return null}return t+1}scrollPageIntoView({pageNumber:e,destArray:t=null,allowNegativeOffset:i=false,ignoreDestinationZoom:n=false}){if(!this.pdfDocument){return}const s=Number.isInteger(e)&&this._pages[e-1];if(!s){console.error(`scrollPageIntoView: "${e}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!t){this._setCurrentPageNumber(e,true);return}let r=0,a=0;let o=0,l=0,h,c;const d=s.rotation%180!==0;const u=(d?s.height:s.width)/s.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS;const f=(d?s.width:s.height)/s.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS;let p=0;switch(t[1].name){case"XYZ":r=t[2];a=t[3];p=t[4];r=r!==null?r:0;a=a!==null?a:f;break;case"Fit":case"FitB":p="page-fit";break;case"FitH":case"FitBH":a=t[2];p="page-width";if(a===null&&this._location){r=this._location.left;a=this._location.top}else if(typeof a!=="number"||a<0){a=f}break;case"FitV":case"FitBV":r=t[2];o=u;l=f;p="page-height";break;case"FitR":r=t[2];a=t[3];o=t[4]-r;l=t[5]-a;const v=this.removePageBorders?0:P.SCROLLBAR_PADDING;const w=this.removePageBorders?0:P.VERTICAL_PADDING;h=(this.container.clientWidth-v)/o/b.PixelsPerInch.PDF_TO_CSS_UNITS;c=(this.container.clientHeight-w)/l/b.PixelsPerInch.PDF_TO_CSS_UNITS;p=Math.min(Math.abs(h),Math.abs(c));break;default:console.error(`scrollPageIntoView: "${t[1].name}" is not a valid destination type.`);return}if(!n){if(p&&p!==this._currentScale){this.currentScaleValue=p}else if(this._currentScale===P.UNKNOWN_SCALE){this.currentScaleValue=P.DEFAULT_SCALE_VALUE}}if(p==="page-fit"&&!t[4]){this._scrollIntoView({pageDiv:s.div,pageNumber:e});return}const g=[s.viewport.convertToViewportPoint(r,a),s.viewport.convertToViewportPoint(r+o,a+l)];let m=Math.min(g[0][0],g[1][0]);let _=Math.min(g[0][1],g[1][1]);if(!i){m=Math.max(m,0);_=Math.max(_,0)}this._scrollIntoView({pageDiv:s.div,pageSpot:{left:m,top:_},pageNumber:e})}_updateLocation(e){const t=this._currentScale;const i=this._currentScaleValue;const n=parseFloat(i)===t?Math.round(t*1e4)/100:i;const s=e.id;let r="#page="+s;r+="&zoom="+n;const a=this._pages[s-1];const o=this.container;const l=a.getPagePoint(o.scrollLeft-e.x,o.scrollTop-e.y);const h=Math.round(l[0]);const c=Math.round(l[1]);r+=","+h+","+c;this._location={pageNumber:s,scale:n,top:c,left:h,rotation:this._pagesRotation,pdfOpenParams:r}}update(){const e=this._getVisiblePages();const i=e.views,t=i.length;if(t===0){return}const n=Math.max(h,2*t+1);this.#buffer.resize(n,e.ids);this.renderingQueue.renderHighestPriority(e);if(!this.isInPresentationMode){const s=this._spreadMode===P.SpreadMode.NONE&&(this._scrollMode===P.ScrollMode.PAGE||this._scrollMode===P.ScrollMode.VERTICAL);let e=this._currentPageNumber;let t=false;for(const r of i){if(r.percent<100){break}if(r.id===e&&s){t=true;break}}if(!t){e=i[0].id}this._setCurrentPageNumber(e)}this._updateLocation(e.first);this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===P.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===P.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?false:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?false:this.container.scrollHeight>this.container.clientHeight}_getCurrentVisiblePage(){if(!this.pagesCount){return{views:[]}}const e=this._pages[this._currentPageNumber-1];const t=e.div;const i={id:e.id,x:t.offsetLeft+t.clientLeft,y:t.offsetTop+t.clientTop,view:e};const n=new Set([e.id]);return{first:i,last:i,views:[i],ids:n}}_getVisiblePages(){if(this.isInPresentationMode){return this._getCurrentVisiblePage()}const e=this._scrollMode===P.ScrollMode.PAGE?this.#scrollModePageState.pages:this._pages,t=this._scrollMode===P.ScrollMode.HORIZONTAL,i=t&&this._isContainerRtl;return(0,P.getVisibleElements)({scrollEl:this.container,views:e,sortByVisibility:true,horizontal:t,rtl:i})}isPageVisible(e){if(!this.pdfDocument){return false}if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){console.error(`isPageVisible: "${e}" is not a valid page.`);return false}return this._getVisiblePages().ids.has(e)}isPageCached(e){if(!this.pdfDocument){return false}if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){console.error(`isPageCached: "${e}" is not a valid page.`);return false}const t=this._pages[e-1];return this.#buffer.has(t)}cleanup(){for(let e=0,t=this._pages.length;e<t;e++){if(this._pages[e]&&this._pages[e].renderingState!==P.RenderingStates.FINISHED){this._pages[e].reset()}}}_cancelRendering(){for(let e=0,t=this._pages.length;e<t;e++){if(this._pages[e]){this._pages[e].cancelRendering()}}}async#ensurePdfPageLoaded(e){if(e.pdfPage){return e.pdfPage}try{const t=await this.pdfDocument.getPage(e.id);if(!e.pdfPage){e.setPdfPage(t)}if(!this.linkService._cachedPageNumber(t.ref)){this.linkService.cachePageRef(e.id,t.ref)}return t}catch(e){console.error("Unable to get page for page view",e);return null}}#getScrollAhead(e){if(e.first?.id===1){return true}else if(e.last?.id===this.pagesCount){return false}switch(this._scrollMode){case P.ScrollMode.PAGE:return this.#scrollModePageState.scrollDown;case P.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}#toggleLoadingIconSpinner(e){for(const t of e){const i=this._pages[t-1];i?.toggleLoadingIconSpinner(true)}for(const i of this.#buffer){if(e.has(i.id)){continue}i.toggleLoadingIconSpinner(false)}}forceRendering(e){const t=e||this._getVisiblePages();const i=this.#getScrollAhead(t);const n=this._spreadMode!==P.SpreadMode.NONE&&this._scrollMode!==P.ScrollMode.HORIZONTAL;const s=this.renderingQueue.getHighestPriority(t,this._pages,i,n);this.#toggleLoadingIconSpinner(t.ids);if(s){this.#ensurePdfPageLoaded(s).then(()=>{this.renderingQueue.renderView(s)});return true}return false}createTextLayerBuilder(e,t,i,n=false,s,r){return new o.TextLayerBuilder({textLayerDiv:e,eventBus:s,pageIndex:t,viewport:i,enhanceTextSelection:this.isInPresentationMode?false:n,highlighter:r})}createTextHighlighter(e,t){return new a.TextHighlighter({eventBus:t,pageIndex:e,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(e,t,i=null,n="",s=true,r=u.NullL10n,a=null,o=null,l=null,h=null,c=null){return new d.AnnotationLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:i||this.pdfDocument?.annotationStorage,imageResourcesPath:n,renderForms:s,linkService:this.linkService,downloadManager:this.downloadManager,l10n:r,enableScripting:a??this.enableScripting,hasJSActionsPromise:o||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:h||this.pdfDocument?.getFieldObjects(),mouseState:l||this._scriptingManager?.mouseState,annotationCanvasMap:c})}createXfaLayerBuilder(e,t,i=null){return new l.XfaLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:i||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(e){return new r.StructTreeLayerBuilder({pdfPage:e})}get hasEqualPageSizes(){const i=this._pages[0];for(let e=1,t=this._pages.length;e<t;++e){const n=this._pages[e];if(n.width!==i.width||n.height!==i.height){return false}}return true}getPagesOverview(){return this._pages.map(e=>{const t=e.pdfPage.getViewport({scale:1});if(!this.enablePrintAutoRotate||(0,P.isPortraitOrientation)(t)){return{width:t.width,height:t.height,rotation:t.rotation}}return{width:t.height,height:t.width,rotation:(t.rotation-90)%360}})}get optionalContentConfigPromise(){if(!this.pdfDocument){return Promise.resolve(null)}if(!this._optionalContentConfigPromise){return this.pdfDocument.getOptionalContentConfig()}return this._optionalContentConfigPromise}set optionalContentConfigPromise(e){if(!(e instanceof Promise)){throw new Error(`Invalid optionalContentConfigPromise: ${e}`)}if(!this.pdfDocument){return}if(!this._optionalContentConfigPromise){return}this._optionalContentConfigPromise=e;const t={optionalContentConfigPromise:e};for(const i of this._pages){i.update(t)}this.update();this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e})}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode===e){return}if(!(0,P.isValidScrollMode)(e)){throw new Error(`Invalid scroll mode: ${e}`)}if(this.pagesCount>g.FORCE_SCROLL_MODE_PAGE){return}this._previousScrollMode=this._scrollMode;this._scrollMode=e;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e});this._updateScrollMode(this._currentPageNumber)}_updateScrollMode(e=null){const t=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",t===P.ScrollMode.HORIZONTAL);i.classList.toggle("scrollWrapped",t===P.ScrollMode.WRAPPED);if(!this.pdfDocument||!e){return}if(t===P.ScrollMode.PAGE){this.#ensurePageViewVisible()}else if(this._previousScrollMode===P.ScrollMode.PAGE){this._updateSpreadMode()}if(this._currentScaleValue&&isNaN(this._currentScaleValue)){this._setScale(this._currentScaleValue,true)}this._setCurrentPageNumber(e,true);this.update()}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode===e){return}if(!(0,P.isValidSpreadMode)(e)){throw new Error(`Invalid spread mode: ${e}`)}this._spreadMode=e;this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e});this._updateSpreadMode(this._currentPageNumber)}_updateSpreadMode(e=null){if(!this.pdfDocument){return}const n=this.viewer,s=this._pages;if(this._scrollMode===P.ScrollMode.PAGE){this.#ensurePageViewVisible()}else{n.textContent="";if(this._spreadMode===P.SpreadMode.NONE){for(let e=0,t=s.length;e<t;++e){n.appendChild(s[e].div)}}else{const r=this._spreadMode-1;let i=null;for(let e=0,t=s.length;e<t;++e){if(i===null){i=document.createElement("div");i.className="spread";n.appendChild(i)}else if(e%2===r){i=i.cloneNode(false);n.appendChild(i)}i.appendChild(s[e].div)}}}if(!e){return}if(this._currentScaleValue&&isNaN(this._currentScaleValue)){this._setScale(this._currentScaleValue,true)}this._setCurrentPageNumber(e,true);this.update()}_getPageAdvance(i,e=false){switch(this._scrollMode){case P.ScrollMode.WRAPPED:{const{views:t}=this._getVisiblePages(),n=new Map;for(const{id:s,y:r,percent:a,widthPercent:o}of t){if(a===0||o<100){continue}let e=n.get(r);if(!e){n.set(r,e||=[])}e.push(s)}for(const l of n.values()){const h=l.indexOf(i);if(h===-1){continue}const c=l.length;if(c===1){break}if(e){for(let e=h-1,t=0;e>=t;e--){const d=l[e],u=l[e+1]-1;if(d<u){return i-u}}}else{for(let e=h+1,t=c;e<t;e++){const d=l[e],u=l[e-1]+1;if(d>u){return u-i}}}if(e){const f=l[0];if(f<i){return i-f+1}}else{const p=l[c-1];if(p>i){return p-i+1}}break}break}case P.ScrollMode.HORIZONTAL:{break}case P.ScrollMode.PAGE:case P.ScrollMode.VERTICAL:{if(this._spreadMode===P.SpreadMode.NONE){break}const g=this._spreadMode-1;if(e&&i%2!==g){break}else if(!e&&i%2===g){break}const{views:t}=this._getVisiblePages(),u=e?i-1:i+1;for(const{id:s,percent:a,widthPercent:o}of t){if(s!==u){continue}if(a>0&&o===100){return 2}break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t){return false}const i=this._getPageAdvance(e,false)||1;this.currentPageNumber=Math.min(e+i,t);return true}previousPage(){const e=this._currentPageNumber;if(e<=1){return false}const t=this._getPageAdvance(e,true)||1;this.currentPageNumber=Math.max(e-t,1);return true}increaseScale(e=1){let t=this._currentScale;do{t=(t*P.DEFAULT_SCALE_DELTA).toFixed(2);t=Math.ceil(t*10)/10;t=Math.min(P.MAX_SCALE,t)}while(--e>0&&t<P.MAX_SCALE);this.currentScaleValue=t}decreaseScale(e=1){let t=this._currentScale;do{t=(t/P.DEFAULT_SCALE_DELTA).toFixed(2);t=Math.floor(t*10)/10;t=Math.max(P.MIN_SCALE,t)}while(--e>0&&t>P.MIN_SCALE);this.currentScaleValue=t}}t.BaseViewer=m},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.AnnotationLayerBuilder=void 0;var a=i(5);var f=i(30);class n{constructor({pageDiv:e,pdfPage:t,linkService:i,downloadManager:n,annotationStorage:s=null,imageResourcesPath:r="",renderForms:a=true,l10n:o=f.NullL10n,enableScripting:l=false,hasJSActionsPromise:h=null,fieldObjectsPromise:c=null,mouseState:d=null,annotationCanvasMap:u=null}){this.pageDiv=e;this.pdfPage=t;this.linkService=i;this.downloadManager=n;this.imageResourcesPath=r;this.renderForms=a;this.l10n=o;this.annotationStorage=s;this.enableScripting=l;this._hasJSActionsPromise=h;this._fieldObjectsPromise=c;this._mouseState=d;this._annotationCanvasMap=u;this.div=null;this._cancelled=false}async render(e,t="display"){const[i,n=false,s=null]=await Promise.all([this.pdfPage.getAnnotations({intent:t}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled||i.length===0){return}const r={viewport:e.clone({dontFlip:true}),div:this.div,annotations:i,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:n,fieldObjects:s,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap};if(this.div){a.AnnotationLayer.update(r)}else{this.div=document.createElement("div");this.div.className="annotationLayer";this.pageDiv.appendChild(this.div);r.div=this.div;a.AnnotationLayer.render(r);this.l10n.translate(this.div)}}cancel(){this._cancelled=true}hide(){if(!this.div){return}this.div.hidden=true}}t.AnnotationLayerBuilder=n},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.NullL10n=void 0;t.fixupLangCode=r;t.getL10nFallback=n;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading…",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function n(e,t){switch(e){case"find_match_count":e=`find_match_count[${t.total===1?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${t.limit===1?"one":"other"}]`;break}return i[e]||""}const s={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function r(e){return s[e?.toLowerCase()]||e}function a(e,i){if(!i){return e}return e.replace(/\{\{\s*(\w+)\s*\}\}/g,(e,t)=>{return t in i?i[t]:"{{"+t+"}}"})}const o={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(e,t=null,i=n(e,t)){return a(i,t)},async translate(e){}};t.NullL10n=o},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFPageView=void 0;var _=i(5);var v=i(3);var a=i(1);var s=i(30);const r=a.compatibilityParams.maxCanvasPixels||16777216;class n{#annotationMode=_.AnnotationMode.ENABLE_FORMS;constructor(e){const t=e.container;const i=e.defaultViewport;this.id=e.id;this.renderingId="page"+this.id;this.pdfPage=null;this.pageLabel=null;this.rotation=0;this.scale=e.scale||v.DEFAULT_SCALE;this.viewport=i;this.pdfPageRotate=i.rotation;this._optionalContentConfigPromise=e.optionalContentConfigPromise||null;this.hasRestrictedScaling=false;this.textLayerMode=e.textLayerMode??v.TextLayerMode.ENABLE;this.#annotationMode=e.annotationMode??_.AnnotationMode.ENABLE_FORMS;this.imageResourcesPath=e.imageResourcesPath||"";this.useOnlyCssZoom=e.useOnlyCssZoom||false;this.maxCanvasPixels=e.maxCanvasPixels||r;this.eventBus=e.eventBus;this.renderingQueue=e.renderingQueue;this.textLayerFactory=e.textLayerFactory;this.annotationLayerFactory=e.annotationLayerFactory;this.xfaLayerFactory=e.xfaLayerFactory;this.textHighlighter=e.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus);this.structTreeLayerFactory=e.structTreeLayerFactory;this.renderer=e.renderer||v.RendererType.CANVAS;this.l10n=e.l10n||s.NullL10n;this.paintTask=null;this.paintedViewportMap=new WeakMap;this.renderingState=v.RenderingStates.INITIAL;this.resume=null;this._renderError=null;this._isStandalone=!this.renderingQueue?.hasViewer();this._annotationCanvasMap=null;this.annotationLayer=null;this.textLayer=null;this.zoomLayer=null;this.xfaLayer=null;this.structTreeLayer=null;const n=document.createElement("div");n.className="page";n.style.width=Math.floor(this.viewport.width)+"px";n.style.height=Math.floor(this.viewport.height)+"px";n.setAttribute("data-page-number",this.id);n.setAttribute("role","region");this.l10n.get("page_landmark",{page:this.id}).then(e=>{n.setAttribute("aria-label",e)});this.div=n;t?.appendChild(n)}setPdfPage(e){this.pdfPage=e;this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:t});this.reset()}destroy(){this.reset();if(this.pdfPage){this.pdfPage.cleanup()}}async _renderAnnotationLayer(){let t=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(e){t=e}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:t})}}async _renderXfaLayer(){let t=null;try{const e=await this.xfaLayer.render(this.viewport,"display");if(this.textHighlighter){this._buildXfaTextContentItems(e.textDivs)}}catch(e){t=e}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:t})}}async _buildXfaTextContentItems(e){const t=await this.pdfPage.getTextContent();const i=[];for(const n of t.items){i.push(n.str)}this.textHighlighter.setTextMapping(e,i);this.textHighlighter.enable()}_resetZoomLayer(e=false){if(!this.zoomLayer){return}const t=this.zoomLayer.firstChild;this.paintedViewportMap.delete(t);t.width=0;t.height=0;if(e){this.zoomLayer.remove()}this.zoomLayer=null}reset({keepZoomLayer:e=false,keepAnnotationLayer:t=false,keepXfaLayer:i=false}={}){this.cancelRendering({keepAnnotationLayer:t,keepXfaLayer:i});this.renderingState=v.RenderingStates.INITIAL;const n=this.div;n.style.width=Math.floor(this.viewport.width)+"px";n.style.height=Math.floor(this.viewport.height)+"px";const s=n.childNodes,r=e&&this.zoomLayer||null,a=t&&this.annotationLayer?.div||null,o=i&&this.xfaLayer?.div||null;for(let e=s.length-1;e>=0;e--){const l=s[e];switch(l){case r:case a:case o:continue}l.remove()}n.removeAttribute("data-loaded");if(a){this.annotationLayer.hide()}if(o){this.xfaLayer.hide()}if(!r){if(this.canvas){this.paintedViewportMap.delete(this.canvas);this.canvas.width=0;this.canvas.height=0;delete this.canvas}this._resetZoomLayer()}if(this.svg){this.paintedViewportMap.delete(this.svg);delete this.svg}this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon notVisible";if(this._isStandalone){this.toggleLoadingIconSpinner(true)}this.loadingIconDiv.setAttribute("role","img");this.l10n.get("loading").then(e=>{this.loadingIconDiv?.setAttribute("aria-label",e)});n.appendChild(this.loadingIconDiv)}update({scale:e=0,rotation:t=null,optionalContentConfigPromise:i=null}){if(typeof arguments[0]!=="object"){console.error("PDFPageView.update called with separate parameters, please use an object instead.");this.update({scale:arguments[0],rotation:arguments[1],optionalContentConfigPromise:arguments[2]});return}this.scale=e||this.scale;if(typeof t==="number"){this.rotation=t}if(i instanceof Promise){this._optionalContentConfigPromise=i}const n=(this.rotation+this.pdfPageRotate)%360;const s=this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS;this.viewport=this.viewport.clone({scale:s,rotation:n});if(this._isStandalone){const{style:a}=document.documentElement;a.setProperty("--zoom-factor",this.scale);a.setProperty("--viewport-scale-factor",s)}if(this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:true,redrawXfaLayer:true});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:true,timestamp:performance.now(),error:this._renderError});return}let r=false;if(this.canvas&&this.maxCanvasPixels>0){const o=this.outputScale;if((Math.floor(this.viewport.width)*o.sx|0)*(Math.floor(this.viewport.height)*o.sy|0)>this.maxCanvasPixels){r=true}}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&r){this.cssTransform({target:this.canvas,redrawAnnotationLayer:true,redrawXfaLayer:true});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:true,timestamp:performance.now(),error:this._renderError});return}if(!this.zoomLayer&&!this.canvas.hidden){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}}if(this.zoomLayer){this.cssTransform({target:this.zoomLayer.firstChild})}this.reset({keepZoomLayer:true,keepAnnotationLayer:true,keepXfaLayer:true})}cancelRendering({keepAnnotationLayer:e=false,keepXfaLayer:t=false}={}){if(this.paintTask){this.paintTask.cancel();this.paintTask=null}this.resume=null;if(this.textLayer){this.textLayer.cancel();this.textLayer=null}if(this.annotationLayer&&(!e||!this.annotationLayer.div)){this.annotationLayer.cancel();this.annotationLayer=null;this._annotationCanvasMap=null}if(this.xfaLayer&&(!t||!this.xfaLayer.div)){this.xfaLayer.cancel();this.xfaLayer=null;this.textHighlighter?.disable()}if(this._onTextLayerRendered){this.eventBus._off("textlayerrendered",this._onTextLayerRendered);this._onTextLayerRendered=null}}cssTransform({target:e,redrawAnnotationLayer:t=false,redrawXfaLayer:i=false}){const n=this.viewport.width;const s=this.viewport.height;const r=this.div;e.style.width=e.parentNode.style.width=r.style.width=Math.floor(n)+"px";e.style.height=e.parentNode.style.height=r.style.height=Math.floor(s)+"px";const a=this.viewport.rotation-this.paintedViewportMap.get(e).rotation;const o=Math.abs(a);let l=1,h=1;if(o===90||o===270){l=s/n;h=n/s}e.style.transform=`rotate(${a}deg) scale(${l}, ${h})`;if(this.textLayer){const c=this.textLayer.viewport;const d=this.viewport.rotation-c.rotation;const u=Math.abs(d);let e=n/c.width;if(u===90||u===270){e=n/c.height}const f=this.textLayer.textLayerDiv;let t,i;switch(u){case 0:t=i=0;break;case 90:t=0;i="-"+f.style.height;break;case 180:t="-"+f.style.width;i="-"+f.style.height;break;case 270:t="-"+f.style.width;i=0;break;default:console.error("Bad rotation value.");break}f.style.transform=`rotate(${u}deg) `+`scale(${e}) `+`translate(${t}, ${i})`;f.style.transformOrigin="0% 0%"}if(t&&this.annotationLayer){this._renderAnnotationLayer()}if(i&&this.xfaLayer){this._renderXfaLayer()}}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}toggleLoadingIconSpinner(e=false){this.loadingIconDiv?.classList.toggle("notVisible",!e)}draw(){if(this.renderingState!==v.RenderingStates.INITIAL){console.error("Must be in new state before drawing");this.reset()}const{div:e,pdfPage:t}=this;if(!t){this.renderingState=v.RenderingStates.FINISHED;if(this.loadingIconDiv){this.loadingIconDiv.remove();delete this.loadingIconDiv}return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=v.RenderingStates.RUNNING;const i=document.createElement("div");i.style.width=e.style.width;i.style.height=e.style.height;i.classList.add("canvasWrapper");if(this.annotationLayer?.div){e.insertBefore(i,this.annotationLayer.div)}else{e.appendChild(i)}let n=null;if(this.textLayerMode!==v.TextLayerMode.DISABLE&&this.textLayerFactory){const l=document.createElement("div");l.className="textLayer";l.style.width=i.style.width;l.style.height=i.style.height;if(this.annotationLayer?.div){e.insertBefore(l,this.annotationLayer.div)}else{e.appendChild(l)}n=this.textLayerFactory.createTextLayerBuilder(l,this.id-1,this.viewport,this.textLayerMode===v.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=n;if(this.#annotationMode!==_.AnnotationMode.DISABLE&&this.annotationLayerFactory){this._annotationCanvasMap||=new Map;this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(e,t,null,this.imageResourcesPath,this.#annotationMode===_.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)}if(this.xfaLayer?.div){e.appendChild(this.xfaLayer.div)}let s=null;if(this.renderingQueue){s=e=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=v.RenderingStates.PAUSED;this.resume=()=>{this.renderingState=v.RenderingStates.RUNNING;e()};return}e()}}const r=async(e=null)=>{if(a===this.paintTask){this.paintTask=null}if(e instanceof _.RenderingCancelledException){this._renderError=null;return}this._renderError=e;this.renderingState=v.RenderingStates.FINISHED;if(this.loadingIconDiv){this.loadingIconDiv.remove();delete this.loadingIconDiv}this._resetZoomLayer(true);this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:false,timestamp:performance.now(),error:this._renderError});if(e){throw e}};const a=this.renderer===v.RendererType.SVG?this.paintOnSvg(i):this.paintOnCanvas(i);a.onRenderContinue=s;this.paintTask=a;const o=a.promise.then(()=>{return r(null).then(()=>{if(n){const e=t.streamTextContent({normalizeWhitespace:true,includeMarkedContent:true});n.setTextContentStream(e);n.render()}if(this.annotationLayer){this._renderAnnotationLayer()}})},function(e){return r(e)});if(this.xfaLayerFactory){if(!this.xfaLayer){this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(e,t,null)}this._renderXfaLayer()}if(this.structTreeLayerFactory&&this.textLayer&&this.canvas){this._onTextLayerRendered=e=>{if(e.pageNumber!==this.id){return}this.eventBus._off("textlayerrendered",this._onTextLayerRendered);this._onTextLayerRendered=null;if(!this.canvas){return}this.pdfPage.getStructTree().then(e=>{if(!e){return}if(!this.canvas){return}const t=this.structTreeLayer.render(e);t.classList.add("structTree");this.canvas.appendChild(t)})};this.eventBus._on("textlayerrendered",this._onTextLayerRendered);this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(t)}e.setAttribute("data-loaded",true);this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id});return o}paintOnCanvas(e){const t=(0,_.createPromiseCapability)();const i={promise:t.promise,onRenderContinue(e){e()},cancel(){f.cancel()}};const n=this.viewport;const s=document.createElement("canvas");s.hidden=true;let r=true;const a=function(){if(r){s.hidden=false;r=false}};e.appendChild(s);this.canvas=s;s.mozOpaque=true;const o=s.getContext("2d",{alpha:false});const l=(0,v.getOutputScale)(o);this.outputScale=l;if(this.useOnlyCssZoom){const p=n.clone({scale:_.PixelsPerInch.PDF_TO_CSS_UNITS});l.sx*=p.width/n.width;l.sy*=p.height/n.height;l.scaled=true}if(this.maxCanvasPixels>0){const g=n.width*n.height;const m=Math.sqrt(this.maxCanvasPixels/g);if(l.sx>m||l.sy>m){l.sx=m;l.sy=m;l.scaled=true;this.hasRestrictedScaling=true}else{this.hasRestrictedScaling=false}}const h=(0,v.approximateFraction)(l.sx);const c=(0,v.approximateFraction)(l.sy);s.width=(0,v.roundToDivide)(n.width*l.sx,h[0]);s.height=(0,v.roundToDivide)(n.height*l.sy,c[0]);s.style.width=(0,v.roundToDivide)(n.width,h[1])+"px";s.style.height=(0,v.roundToDivide)(n.height,c[1])+"px";this.paintedViewportMap.set(s,n);const d=!l.scaled?null:[l.sx,0,0,l.sy,0,0];const u={canvasContext:o,transform:d,viewport:this.viewport,annotationMode:this.#annotationMode,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap};const f=this.pdfPage.render(u);f.onContinue=function(e){a();if(i.onRenderContinue){i.onRenderContinue(e)}else{e()}};f.promise.then(function(){a();t.resolve()},function(e){a();t.reject(e)});return i}paintOnSvg(i){let e=false;const n=()=>{if(e){throw new _.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")}};const s=this.pdfPage;const r=this.viewport.clone({scale:_.PixelsPerInch.PDF_TO_CSS_UNITS});const t=s.getOperatorList({annotationMode:this.#annotationMode}).then(e=>{n();const t=new _.SVGGraphics(s.commonObjs,s.objs,a.compatibilityParams.disableCreateObjectURL);return t.getSVG(e,r).then(e=>{n();this.svg=e;this.paintedViewportMap.set(e,r);e.style.width=i.style.width;e.style.height=i.style.height;this.renderingState=v.RenderingStates.FINISHED;i.appendChild(e)})});return{promise:t,onRenderContinue(e){e()},cancel(){e=true}}}setPageLabel(e){this.pageLabel=typeof e==="string"?e:null;if(this.pageLabel!==null){this.div.setAttribute("data-page-label",this.pageLabel)}else{this.div.removeAttribute("data-page-label")}}}t.PDFPageView=n},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.StructTreeLayerBuilder=void 0;const r={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null};const a=/^H(\d+)$/;class i{constructor({pdfPage:e}){this.pdfPage=e}render(e){return this._walk(e)}_setAttributes(e,t){if(e.alt!==undefined){t.setAttribute("aria-label",e.alt)}if(e.id!==undefined){t.setAttribute("aria-owns",e.id)}if(e.lang!==undefined){t.setAttribute("lang",e.lang)}}_walk(e){if(!e){return null}const t=document.createElement("span");if("role"in e){const{role:i}=e;const n=i.match(a);if(n){t.setAttribute("role","heading");t.setAttribute("aria-level",n[1])}else if(r[i]){t.setAttribute("role",r[i])}}this._setAttributes(e,t);if(e.children){if(e.children.length===1&&"id"in e.children[0]){this._setAttributes(e.children[0],t)}else{for(const s of e.children){t.appendChild(this._walk(s))}}}return t}}t.StructTreeLayerBuilder=i},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.TextHighlighter=void 0;class i{constructor({findController:e,eventBus:t,pageIndex:i}){this.findController=e;this.matches=[];this.eventBus=t;this.pageIdx=i;this._onUpdateTextLayerMatches=null;this.textDivs=null;this.textContentItemsStr=null;this.enabled=false}setTextMapping(e,t){this.textDivs=e;this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr){throw new Error("Text divs and strings have not been set.")}if(this.enabled){throw new Error("TextHighlighter is already enabled.")}this.enabled=true;if(!this._onUpdateTextLayerMatches){this._onUpdateTextLayerMatches=e=>{if(e.pageIndex===this.pageIdx||e.pageIndex===-1){this._updateMatches()}};this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)}this._updateMatches()}disable(){if(!this.enabled){return}this.enabled=false;if(this._onUpdateTextLayerMatches){this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches);this._onUpdateTextLayerMatches=null}}_convertMatches(i,n){if(!i){return[]}const{textContentItemsStr:s}=this;let r=0,a=0;const o=s.length-1;const l=[];for(let t=0,e=i.length;t<e;t++){let e=i[t];while(r!==o&&e>=a+s[r].length){a+=s[r].length;r++}if(r===s.length){console.error("Could not find a matching mapping")}const h={begin:{divIdx:r,offset:e-a}};e+=n[t];while(r!==o&&e>a+s[r].length){a+=s[r].length;r++}h.end={divIdx:r,offset:e-a};l.push(h)}return l}_renderMatches(i){if(i.length===0){return}const{findController:n,pageIdx:s}=this;const{textContentItemsStr:l,textDivs:h}=this;const r=s===n.selected.pageIdx;const a=n.selected.matchIdx;const e=n.state.highlightAll;let o=null;const c={divIdx:-1,offset:undefined};function d(e,t){const i=e.divIdx;h[i].textContent="";return u(i,0,e.offset,t)}function u(e,t,i,n){let s=h[e];if(s.nodeType===Node.TEXT_NODE){const o=document.createElement("span");s.parentNode.insertBefore(o,s);o.appendChild(s);h[e]=o;s=o}const r=l[e].substring(t,i);const a=document.createTextNode(r);if(n){const o=document.createElement("span");o.className=`${n} appended`;o.appendChild(a);s.appendChild(o);return n.includes("selected")?o.offsetLeft:0}s.appendChild(a);return 0}let f=a,p=f+1;if(e){f=0;p=i.length}else if(!r){return}for(let t=f;t<p;t++){const g=i[t];const m=g.begin;const _=g.end;const v=r&&t===a;const w=v?" selected":"";let e=0;if(!o||m.divIdx!==o.divIdx){if(o!==null){u(o.divIdx,o.offset,c.offset)}d(m)}else{u(o.divIdx,o.offset,m.offset)}if(m.divIdx===_.divIdx){e=u(m.divIdx,m.offset,_.offset,"highlight"+w)}else{e=u(m.divIdx,m.offset,c.offset,"highlight begin"+w);for(let e=m.divIdx+1,t=_.divIdx;e<t;e++){h[e].className="highlight middle"+w}d(_,"highlight end"+w)}o=_;if(v){n.scrollMatchIntoView({element:h[m.divIdx],selectedLeft:e,pageIndex:s,matchIndex:a})}}if(o){u(o.divIdx,o.offset,c.offset)}}_updateMatches(){if(!this.enabled){return}const{findController:e,matches:i,pageIdx:t}=this;const{textContentItemsStr:n,textDivs:s}=this;let r=-1;for(let e=0,t=i.length;e<t;e++){const l=i[e];const h=Math.max(r,l.begin.divIdx);for(let e=h,t=l.end.divIdx;e<=t;e++){const c=s[e];c.textContent=n[e];c.className=""}r=l.end.divIdx+1}if(!e?.highlightMatches){return}const a=e.pageMatches[t]||null;const o=e.pageMatchesLength[t]||null;this.matches=this._convertMatches(a,o);this._renderMatches(this.matches)}}t.TextHighlighter=i},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.TextLayerBuilder=void 0;var n=i(5);const s=300;class r{constructor({textLayerDiv:e,eventBus:t,pageIndex:i,viewport:n,highlighter:s=null,enhanceTextSelection:r=false}){this.textLayerDiv=e;this.eventBus=t;this.textContent=null;this.textContentItemsStr=[];this.textContentStream=null;this.renderingDone=false;this.pageNumber=i+1;this.viewport=n;this.textDivs=[];this.textLayerRenderTask=null;this.highlighter=s;this.enhanceTextSelection=r;this._bindMouse()}_finishRendering(){this.renderingDone=true;if(!this.enhanceTextSelection){const e=document.createElement("div");e.className="endOfContent";this.textLayerDiv.appendChild(e)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(e=0){if(!(this.textContent||this.textContentStream)||this.renderingDone){return}this.cancel();this.textDivs.length=0;this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const t=document.createDocumentFragment();this.textLayerRenderTask=(0,n.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:t,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:e,enhanceTextSelection:this.enhanceTextSelection});this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(t);this._finishRendering();this.highlighter?.enable()},function(e){})}cancel(){if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}this.highlighter?.disable()}setTextContentStream(e){this.cancel();this.textContentStream=e}setTextContent(e){this.cancel();this.textContent=e}_bindMouse(){const r=this.textLayerDiv;let a=null;r.addEventListener("mousedown",e=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){this.textLayerRenderTask.expandTextDivs(true);if(a){clearTimeout(a);a=null}return}const t=r.querySelector(".endOfContent");if(!t){return}let i=e.target!==r;i=i&&window.getComputedStyle(t).getPropertyValue("-moz-user-select")!=="none";if(i){const n=r.getBoundingClientRect();const s=Math.max(0,(e.pageY-n.top)/n.height);t.style.top=(s*100).toFixed(2)+"%"}t.classList.add("active")});r.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){a=setTimeout(()=>{if(this.textLayerRenderTask){this.textLayerRenderTask.expandTextDivs(false)}a=null},s);return}const e=r.querySelector(".endOfContent");if(!e){return}e.style.top="";e.classList.remove("active")})}}t.TextLayerBuilder=r},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.XfaLayerBuilder=void 0;var r=i(5);class n{constructor({pageDiv:e,pdfPage:t,annotationStorage:i=null,linkService:n,xfaHtml:s=null}){this.pageDiv=e;this.pdfPage=t;this.annotationStorage=i;this.linkService=n;this.xfaHtml=s;this.div=null;this._cancelled=false}render(i,n="display"){if(n==="print"){const e={viewport:i.clone({dontFlip:true}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};const t=document.createElement("div");this.pageDiv.appendChild(t);e.div=t;const s=r.XfaLayer.render(e);return Promise.resolve(s)}return this.pdfPage.getXfa().then(e=>{if(this._cancelled||!e){return{textDivs:[]}}const t={viewport:i.clone({dontFlip:true}),div:this.div,xfaHtml:e,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};if(this.div){return r.XfaLayer.update(t)}this.div=document.createElement("div");this.pageDiv.appendChild(this.div);t.div=this.div;return r.XfaLayer.render(t)}).catch(e=>{console.error(e)})}cancel(){this._cancelled=true}hide(){if(!this.div){return}this.div.hidden=true}}t.XfaLayerBuilder=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.SecondaryToolbar=void 0;var s=i(3);var n=i(6);var r=i(28);class a{constructor(e,t,i){this.toolbar=e.toolbar;this.toggleButton=e.toggleButton;this.toolbarButtonContainer=e.toolbarButtonContainer;this.buttons=[{element:e.presentationModeButton,eventName:"presentationmode",close:true},{element:e.openFileButton,eventName:"openfile",close:true},{element:e.printButton,eventName:"print",close:true},{element:e.downloadButton,eventName:"download",close:true},{element:e.viewBookmarkButton,eventName:null,close:true},{element:e.firstPageButton,eventName:"firstpage",close:true},{element:e.lastPageButton,eventName:"lastpage",close:true},{element:e.pageRotateCwButton,eventName:"rotatecw",close:false},{element:e.pageRotateCcwButton,eventName:"rotateccw",close:false},{element:e.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:n.CursorTool.SELECT},close:true},{element:e.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:n.CursorTool.HAND},close:true},{element:e.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:s.ScrollMode.PAGE},close:true},{element:e.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:s.ScrollMode.VERTICAL},close:true},{element:e.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:s.ScrollMode.HORIZONTAL},close:true},{element:e.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:s.ScrollMode.WRAPPED},close:true},{element:e.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:s.SpreadMode.NONE},close:true},{element:e.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:s.SpreadMode.ODD},close:true},{element:e.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:s.SpreadMode.EVEN},close:true},{element:e.documentPropertiesButton,eventName:"documentproperties",close:true}];this.items={firstPage:e.firstPageButton,lastPage:e.lastPageButton,pageRotateCw:e.pageRotateCwButton,pageRotateCcw:e.pageRotateCcwButton};this.mainContainer=t;this.eventBus=i;this.opened=false;this.containerHeight=null;this.previousContainerHeight=null;this.reset();this._bindClickListeners();this._bindCursorToolsListener(e);this._bindScrollModeListener(e);this._bindSpreadModeListener(e);this.eventBus._on("resize",this._setMaxHeight.bind(this))}get isOpen(){return this.opened}setPageNumber(e){this.pageNumber=e;this._updateUIState()}setPagesCount(e){this.pagesCount=e;this._updateUIState()}reset(){this.pageNumber=0;this.pagesCount=0;this._updateUIState();this.eventBus.dispatch("secondarytoolbarreset",{source:this})}_updateUIState(){this.items.firstPage.disabled=this.pageNumber<=1;this.items.lastPage.disabled=this.pageNumber>=this.pagesCount;this.items.pageRotateCw.disabled=this.pagesCount===0;this.items.pageRotateCcw.disabled=this.pagesCount===0}_bindClickListeners(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element:e,eventName:n,close:s,eventDetails:r}of this.buttons){e.addEventListener("click",e=>{if(n!==null){const t={source:this};for(const i in r){t[i]=r[i]}this.eventBus.dispatch(n,t)}if(s){this.close()}})}}_bindCursorToolsListener(t){this.eventBus._on("cursortoolchanged",function({tool:e}){t.cursorSelectToolButton.classList.toggle("toggled",e===n.CursorTool.SELECT);t.cursorHandToolButton.classList.toggle("toggled",e===n.CursorTool.HAND)})}_bindScrollModeListener(n){const t=({mode:e})=>{n.scrollPageButton.classList.toggle("toggled",e===s.ScrollMode.PAGE);n.scrollVerticalButton.classList.toggle("toggled",e===s.ScrollMode.VERTICAL);n.scrollHorizontalButton.classList.toggle("toggled",e===s.ScrollMode.HORIZONTAL);n.scrollWrappedButton.classList.toggle("toggled",e===s.ScrollMode.WRAPPED);const t=this.pagesCount>r.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;n.scrollPageButton.disabled=t;n.scrollVerticalButton.disabled=t;n.scrollHorizontalButton.disabled=t;n.scrollWrappedButton.disabled=t;const i=e===s.ScrollMode.HORIZONTAL;n.spreadNoneButton.disabled=i;n.spreadOddButton.disabled=i;n.spreadEvenButton.disabled=i};this.eventBus._on("scrollmodechanged",t);this.eventBus._on("secondarytoolbarreset",e=>{if(e.source===this){t({mode:s.ScrollMode.VERTICAL})}})}_bindSpreadModeListener(t){function i({mode:e}){t.spreadNoneButton.classList.toggle("toggled",e===s.SpreadMode.NONE);t.spreadOddButton.classList.toggle("toggled",e===s.SpreadMode.ODD);t.spreadEvenButton.classList.toggle("toggled",e===s.SpreadMode.EVEN)}this.eventBus._on("spreadmodechanged",i);this.eventBus._on("secondarytoolbarreset",e=>{if(e.source===this){i({mode:s.SpreadMode.NONE})}})}open(){if(this.opened){return}this.opened=true;this._setMaxHeight();this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.toolbar.classList.remove("hidden")}close(){if(!this.opened){return}this.opened=false;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false")}toggle(){if(this.opened){this.close()}else{this.open()}}_setMaxHeight(){if(!this.opened){return}this.containerHeight=this.mainContainer.clientHeight;if(this.containerHeight===this.previousContainerHeight){return}this.toolbarButtonContainer.style.maxHeight=`${this.containerHeight-s.SCROLLBAR_PADDING}px`;this.previousContainerHeight=this.containerHeight}}t.SecondaryToolbar=a},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.Toolbar=void 0;var u=i(3);const n="visiblePageIsLoading";class s{constructor(e,t,i){this.toolbar=e.container;this.eventBus=t;this.l10n=i;this.buttons=[{element:e.previous,eventName:"previouspage"},{element:e.next,eventName:"nextpage"},{element:e.zoomIn,eventName:"zoomin"},{element:e.zoomOut,eventName:"zoomout"},{element:e.openFile,eventName:"openfile"},{element:e.print,eventName:"print"},{element:e.presentationModeButton,eventName:"presentationmode"},{element:e.download,eventName:"download"},{element:e.viewBookmark,eventName:null}];this.items={numPages:e.numPages,pageNumber:e.pageNumber,scaleSelect:e.scaleSelect,customScaleOption:e.customScaleOption,previous:e.previous,next:e.next,zoomIn:e.zoomIn,zoomOut:e.zoomOut};this._wasLocalized=false;this.reset();this._bindListeners()}setPageNumber(e,t){this.pageNumber=e;this.pageLabel=t;this._updateUIState(false)}setPagesCount(e,t){this.pagesCount=e;this.hasPageLabels=t;this._updateUIState(true)}setPageScale(e,t){this.pageScaleValue=(e||t).toString();this.pageScale=t;this._updateUIState(false)}reset(){this.pageNumber=0;this.pageLabel=null;this.hasPageLabels=false;this.pagesCount=0;this.pageScaleValue=u.DEFAULT_SCALE_VALUE;this.pageScale=u.DEFAULT_SCALE;this._updateUIState(true);this.updateLoadingIndicatorState()}_bindListeners(){const{pageNumber:e,scaleSelect:t}=this.items;const i=this;for(const{element:n,eventName:s}of this.buttons){n.addEventListener("click",e=>{if(s!==null){this.eventBus.dispatch(s,{source:this})}})}e.addEventListener("click",function(){this.select()});e.addEventListener("change",function(){i.eventBus.dispatch("pagenumberchanged",{source:i,value:this.value})});t.addEventListener("change",function(){if(this.value==="custom"){return}i.eventBus.dispatch("scalechanged",{source:i,value:this.value})});t.addEventListener("click",function(e){const t=e.target;if(this.value===i.pageScaleValue&&t.tagName.toUpperCase()==="OPTION"){this.blur()}});t.oncontextmenu=u.noContextMenuHandler;this.eventBus._on("localized",()=>{this._wasLocalized=true;this._adjustScaleWidth();this._updateUIState(true)})}_updateUIState(e=false){if(!this._wasLocalized){return}const{pageNumber:t,pagesCount:i,pageScaleValue:n,pageScale:s,items:r}=this;if(e){if(this.hasPageLabels){r.pageNumber.type="text"}else{r.pageNumber.type="number";this.l10n.get("of_pages",{pagesCount:i}).then(e=>{r.numPages.textContent=e})}r.pageNumber.max=i}if(this.hasPageLabels){r.pageNumber.value=this.pageLabel;this.l10n.get("page_of_pages",{pageNumber:t,pagesCount:i}).then(e=>{r.numPages.textContent=e})}else{r.pageNumber.value=t}r.previous.disabled=t<=1;r.next.disabled=t>=i;r.zoomOut.disabled=s<=u.MIN_SCALE;r.zoomIn.disabled=s>=u.MAX_SCALE;this.l10n.get("page_scale_percent",{scale:Math.round(s*1e4)/100}).then(e=>{let t=false;for(const i of r.scaleSelect.options){if(i.value!==n){i.selected=false;continue}i.selected=true;t=true}if(!t){r.customScaleOption.textContent=e;r.customScaleOption.selected=true}})}updateLoadingIndicatorState(e=false){const t=this.items.pageNumber;t.classList.toggle(n,e)}async _adjustScaleWidth(){const{items:e,l10n:t}=this;const i=Promise.all([t.get("page_scale_auto"),t.get("page_scale_actual"),t.get("page_scale_fit"),t.get("page_scale_width")]);const n=getComputedStyle(e.scaleSelect),s=parseInt(n.getPropertyValue("--scale-select-container-width"),10),r=parseInt(n.getPropertyValue("--scale-select-overflow"),10);let a=document.createElement("canvas");a.mozOpaque=true;let o=a.getContext("2d",{alpha:false});await u.animationStarted;o.font=`${n.fontSize} ${n.fontFamily}`;let l=0;for(const h of await i){const{width:c}=o.measureText(h);if(c>l){l=c}}l+=2*r;if(l>s){const d=document.documentElement;d.style.setProperty("--scale-select-container-width",`${l}px`)}a.width=0;a.height=0;a=o=null}}t.Toolbar=s},(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.ViewHistory=void 0;const i=20;class n{constructor(e,t=i){this.fingerprint=e;this.cacheSize=t;this._initializedPromise=this._readFromStorage().then(e=>{const i=JSON.parse(e||"{}");let n=-1;if(!Array.isArray(i.files)){i.files=[]}else{while(i.files.length>=this.cacheSize){i.files.shift()}for(let e=0,t=i.files.length;e<t;e++){const s=i.files[e];if(s.fingerprint===this.fingerprint){n=e;break}}}if(n===-1){n=i.files.push({fingerprint:this.fingerprint})-1}this.file=i.files[n];this.database=i})}async _writeToStorage(){const e=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",e)}async _readFromStorage(){return localStorage.getItem("pdfjs.history")}async set(e,t){await this._initializedPromise;this.file[e]=t;return this._writeToStorage()}async setMultiple(e){await this._initializedPromise;for(const t in e){this.file[t]=e[t]}return this._writeToStorage()}async get(e,t){await this._initializedPromise;const i=this.file[e];return i!==undefined?i:t}async getMultiple(e){await this._initializedPromise;const t=Object.create(null);for(const i in e){const n=this.file[i];t[i]=n!==undefined?n:e[i]}return t}}t.ViewHistory=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.GenericCom=void 0;var n=i(2);var s=i(40);var r=i(41);var a=i(42);var o=i(44);const l={};t.GenericCom=l;class h extends s.BasePreferences{async _writeToStorage(e){localStorage.setItem("pdfjs.preferences",JSON.stringify(e))}async _readFromStorage(e){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class c extends n.DefaultExternalServices{static createDownloadManager(e){return new r.DownloadManager}static createPreferences(){return new h}static createL10n({locale:e="en-US"}){return new a.GenericL10n(e)}static createScripting({sandboxBundleSrc:e}){return new o.GenericScripting(e)}}n.PDFViewerApplication.externalServices=c},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.BasePreferences=void 0;var n=i(1);class s{constructor(){if(this.constructor===s){throw new Error("Cannot initialize BasePreferences.")}Object.defineProperty(this,"defaults",{value:Object.freeze({annotationMode:2,cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:false,enablePermissions:false,enablePrintAutoRotate:true,enableScripting:true,externalLinkTarget:0,historyUpdateUrl:false,ignoreDestinationZoom:false,pdfBugEnabled:false,renderer:"canvas",sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:false,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:false,disableFontFace:false,disableRange:false,disableStream:false,enableXfa:true}),writable:false,enumerable:true,configurable:false});this.prefs=Object.create(null);this._initializedPromise=this._readFromStorage(this.defaults).then(e=>{for(const t in this.defaults){const i=e?.[t];if(typeof i===typeof this.defaults[t]){this.prefs[t]=i}}})}async _writeToStorage(e){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(e){throw new Error("Not implemented: _readFromStorage")}async reset(){await this._initializedPromise;this.prefs=Object.create(null);return this._writeToStorage(this.defaults)}async set(e,t){await this._initializedPromise;const i=this.defaults[e];if(i===undefined){throw new Error(`Set preference: "${e}" is undefined.`)}else if(t===undefined){throw new Error("Set preference: no value is specified.")}const n=typeof t;const s=typeof i;if(n!==s){if(n==="number"&&s==="string"){t=t.toString()}else{throw new Error(`Set preference: "${t}" is a ${n}, expected a ${s}.`)}}else{if(n==="number"&&!Number.isInteger(t)){throw new Error(`Set preference: "${t}" must be an integer.`)}}this.prefs[e]=t;return this._writeToStorage(this.prefs)}async get(e){await this._initializedPromise;const t=this.defaults[e],i=this.prefs[e];if(t===undefined){throw new Error(`Get preference: "${e}" is undefined.`)}return i!==undefined?i:t}async getAll(){await this._initializedPromise;const e=Object.create(null);for(const t in this.defaults){const i=this.prefs[t];e[t]=i!==undefined?i:this.defaults[t]}return e}}t.BasePreferences=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.DownloadManager=void 0;var a=i(5);var o=i(1);function r(e,t){const i=document.createElement("a");if(!i.click){throw new Error('DownloadManager: "a.click()" is not supported.')}i.href=e;i.target="_parent";if("download"in i){i.download=t}(document.body||document.documentElement).appendChild(i);i.click();i.remove()}class n{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(e,t){if(!(0,a.createValidAbsoluteUrl)(e,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${e}`);return}r(e+"#pdfjs.action=download",t)}downloadData(e,t,i){const n=(0,a.createObjectURL)(e,i,o.compatibilityParams.disableCreateObjectURL);r(n,t)}openOrDownloadData(i,n,s){const e=(0,a.isPdfFile)(s);const r=e?"application/pdf":"";if(e&&!o.compatibilityParams.disableCreateObjectURL){let t=this._openBlobUrls.get(i);if(!t){t=URL.createObjectURL(new Blob([n],{type:r}));this._openBlobUrls.set(i,t)}let e;e="?file="+encodeURIComponent(t+"#"+s);try{window.open(e);return true}catch(e){console.error(`openOrDownloadData: ${e}`);URL.revokeObjectURL(t);this._openBlobUrls.delete(i)}}this.downloadData(n,s,r);return false}download(e,t,i,n="download"){if(o.compatibilityParams.disableCreateObjectURL){this.downloadUrl(t,i);return}const s=URL.createObjectURL(e);r(s,i)}}t.DownloadManager=n},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.GenericL10n=void 0;i(43);var s=i(30);const n=document.webL10n;class r{constructor(i){this._lang=i;this._ready=new Promise((e,t)=>{n.setLanguage((0,s.fixupLangCode)(i),()=>{e(n)})})}async getLanguage(){const e=await this._ready;return e.getLanguage()}async getDirection(){const e=await this._ready;return e.getDirection()}async get(e,t=null,i=(0,s.getL10nFallback)(e,t)){const n=await this._ready;return n.get(e,t,i)}async translate(e){const t=await this._ready;return t.translate(e)}}t.GenericL10n=r},()=>{document.webL10n=function(e,h,t){var u={};var n="";var c="textContent";var f="";var d={};var p="loading";var s=true;function g(){return h.querySelectorAll('link[type="application/l10n"]')}function m(){var e=h.querySelector('script[type="application/l10n"]');return e?JSON.parse(e.innerHTML):null}function r(e){return e?e.querySelectorAll("*[data-l10n-id]"):[]}function _(e){if(!e)return{};var t=e.getAttribute("data-l10n-id");var i=e.getAttribute("data-l10n-args");var n={};if(i){try{n=JSON.parse(i)}catch(e){console.warn("could not parse arguments for #"+t)}}return{id:t,args:n}}function a(e,t,i){t=t||function e(t){};i=i||function e(){};var n=new XMLHttpRequest;n.open("GET",e,s);if(n.overrideMimeType){n.overrideMimeType("text/plain; charset=utf-8")}n.onreadystatechange=function(){if(n.readyState==4){if(n.status==200||n.status===0){t(n.responseText)}else{i()}}};n.onerror=i;n.ontimeout=i;try{n.send(null)}catch(e){i()}}function v(e,_,r,t){var v=e.replace(/[^\/]*$/,"")||"./";function w(e){if(e.lastIndexOf("\\")<0)return e;return e.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function i(e,t){var c={};var d=/^\s*|\s*$/;var u=/^\s*#|^\s*$/;var f=/^\s*\[(.*)\]\s*$/;var p=/^\s*@import\s+url\((.*)\)\s*$/i;var g=/^([^=\s]*)\s*=\s*(.+)$/;function i(e,i,n){var s=e.replace(d,"").split(/[\r\n]+/);var r="*";var a=_.split("-",1)[0];var o=false;var l="";function h(){while(true){if(!s.length){n();return}var e=s.shift();if(u.test(e))continue;if(i){l=f.exec(e);if(l){r=l[1].toLowerCase();o=r!=="*"&&r!==_&&r!==a;continue}else if(o){continue}l=p.exec(e);if(l){m(v+l[1],h);return}}var t=e.match(g);if(t&&t.length==3){c[t[1]]=w(t[2])}}}h()}function m(e,t){a(e,function(e){i(e,false,t)},function(){console.warn(e+" not found.");t()})}i(e,true,function(){t(c)})}a(e,function(e){n+=e;i(e,function(e){for(var t in e){var i,n,s=t.lastIndexOf(".");if(s>0){i=t.substring(0,s);n=t.substring(s+1)}else{i=t;n=c}if(!u[i]){u[i]={}}u[i][n]=e[t]}if(r){r()}})},t)}function i(e,t){if(e){e=e.toLowerCase()}t=t||function e(){};w();f=e;var i=g();var n=i.length;if(n===0){var s=m();if(s&&s.locales&&s.default_locale){console.log("using the embedded JSON directory, early way out");u=s.locales[e];if(!u){var r=s.default_locale.toLowerCase();for(var a in s.locales){a=a.toLowerCase();if(a===e){u=s.locales[e];break}else if(a===r){u=s.locales[r]}}}t()}else{console.log("no resource to load, early way out")}p="complete";return}var o=null;var l=0;o=function(){l++;if(l>=n){t();p="complete"}};function h(e){var i=e.href;this.load=function(e,t){v(i,e,t,function(){console.warn(i+" not found.");console.warn('"'+e+'" resource not found');f="";t()})}}for(var c=0;c<n;c++){var d=new h(i[c]);d.load(e,o)}}function w(){u={};n="";f=""}function o(e){var t={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function i(e,t){return t.indexOf(e)!==-1}function n(e,t,i){return t<=e&&e<=i}var s={0:function(e){return"other"},1:function(e){if(n(e%100,3,10))return"few";if(e===0)return"zero";if(n(e%100,11,99))return"many";if(e==2)return"two";if(e==1)return"one";return"other"},2:function(e){if(e!==0&&e%10===0)return"many";if(e==2)return"two";if(e==1)return"one";return"other"},3:function(e){if(e==1)return"one";return"other"},4:function(e){if(n(e,0,1))return"one";return"other"},5:function(e){if(n(e,0,2)&&e!=2)return"one";return"other"},6:function(e){if(e===0)return"zero";if(e%10==1&&e%100!=11)return"one";return"other"},7:function(e){if(e==2)return"two";if(e==1)return"one";return"other"},8:function(e){if(n(e,3,6))return"few";if(n(e,7,10))return"many";if(e==2)return"two";if(e==1)return"one";return"other"},9:function(e){if(e===0||e!=1&&n(e%100,1,19))return"few";if(e==1)return"one";return"other"},10:function(e){if(n(e%10,2,9)&&!n(e%100,11,19))return"few";if(e%10==1&&!n(e%100,11,19))return"one";return"other"},11:function(e){if(n(e%10,2,4)&&!n(e%100,12,14))return"few";if(e%10===0||n(e%10,5,9)||n(e%100,11,14))return"many";if(e%10==1&&e%100!=11)return"one";return"other"},12:function(e){if(n(e,2,4))return"few";if(e==1)return"one";return"other"},13:function(e){if(n(e%10,2,4)&&!n(e%100,12,14))return"few";if(e!=1&&n(e%10,0,1)||n(e%10,5,9)||n(e%100,12,14))return"many";if(e==1)return"one";return"other"},14:function(e){if(n(e%100,3,4))return"few";if(e%100==2)return"two";if(e%100==1)return"one";return"other"},15:function(e){if(e===0||n(e%100,2,10))return"few";if(n(e%100,11,19))return"many";if(e==1)return"one";return"other"},16:function(e){if(e%10==1&&e!=11)return"one";return"other"},17:function(e){if(e==3)return"few";if(e===0)return"zero";if(e==6)return"many";if(e==2)return"two";if(e==1)return"one";return"other"},18:function(e){if(e===0)return"zero";if(n(e,0,2)&&e!==0&&e!=2)return"one";return"other"},19:function(e){if(n(e,2,10))return"few";if(n(e,0,1))return"one";return"other"},20:function(e){if((n(e%10,3,4)||e%10==9)&&!(n(e%100,10,19)||n(e%100,70,79)||n(e%100,90,99)))return"few";if(e%1e6===0&&e!==0)return"many";if(e%10==2&&!i(e%100,[12,72,92]))return"two";if(e%10==1&&!i(e%100,[11,71,91]))return"one";return"other"},21:function(e){if(e===0)return"zero";if(e==1)return"one";return"other"},22:function(e){if(n(e,0,1)||n(e,11,99))return"one";return"other"},23:function(e){if(n(e%10,1,2)||e%20===0)return"one";return"other"},24:function(e){if(n(e,3,10)||n(e,13,19))return"few";if(i(e,[2,12]))return"two";if(i(e,[1,11]))return"one";return"other"}};var r=t[e.replace(/-.*$/,"")];if(!(r in s)){console.warn("plural form unknown for ["+e+"]");return function(){return"other"}}return s[r]}d.plural=function(e,t,i,n){var s=parseFloat(t);if(isNaN(s))return e;if(n!=c)return e;if(!d._pluralRules){d._pluralRules=o(f)}var r="["+d._pluralRules(s)+"]";if(s===0&&i+"[zero]"in u){e=u[i+"[zero]"][n]}else if(s==1&&i+"[one]"in u){e=u[i+"[one]"][n]}else if(s==2&&i+"[two]"in u){e=u[i+"[two]"][n]}else if(i+r in u){e=u[i+r][n]}else if(i+"[other]"in u){e=u[i+"[other]"][n]}return e};function b(e,t,i){var n=u[e];if(!n){console.warn("#"+e+" is undefined.");if(!i){return null}n=i}var s={};for(var r in n){var a=n[r];a=l(a,t,e,r);a=P(a,t,e);s[r]=a}return s}function l(e,t,i,n){var s=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/;var r=s.exec(e);if(!r||!r.length)return e;var a=r[1];var o=r[2];var l;if(t&&o in t){l=t[o]}else if(o in u){l=u[o]}if(a in d){var h=d[a];e=h(e,l,i,n)}return e}function P(e,i,n){var t=/\{\{\s*(.+?)\s*\}\}/g;return e.replace(t,function(e,t){if(i&&t in i){return i[t]}if(t in u){return u[t]}console.log("argument {{"+t+"}} for #"+n+" is undefined.");return e})}function y(e){var t=_(e);if(!t.id)return;var i=b(t.id,t.args);if(!i){console.warn("#"+t.id+" is undefined.");return}if(i[c]){if(S(e)===0){e[c]=i[c]}else{var n=e.childNodes;var s=false;for(var r=0,a=n.length;r<a;r++){if(n[r].nodeType===3&&/\S/.test(n[r].nodeValue)){if(s){n[r].nodeValue=""}else{n[r].nodeValue=i[c];s=true}}}if(!s){var o=h.createTextNode(i[c]);e.insertBefore(o,e.firstChild)}}delete i[c]}for(var l in i){e[l]=i[l]}}function S(e){if(e.children){return e.children.length}if(typeof e.childElementCount!=="undefined"){return e.childElementCount}var t=0;for(var i=0;i<e.childNodes.length;i++){t+=e.nodeType===1?1:0}return t}function E(e){e=e||h.documentElement;var t=r(e);var i=t.length;for(var n=0;n<i;n++){y(t[n])}y(e)}return{get:function(e,t,i){var n=e.lastIndexOf(".");var s=c;if(n>0){s=e.substring(n+1);e=e.substring(0,n)}var r;if(i){r={};r[s]=i}var a=b(e,t,r);if(a&&s in a){return a[s]}return"{{"+e+"}}"},getData:function(){return u},getText:function(){return n},getLanguage:function(){return f},setLanguage:function(e,t){i(e,function(){if(t)t()})},getDirection:function(){var e=["ar","he","fa","ps","ur"];var t=f.split("-",1)[0];return e.indexOf(t)>=0?"rtl":"ltr"},translate:E,getReadyState:function(){return p},ready:function(t){if(!t){return}else if(p=="complete"||p=="interactive"){e.setTimeout(function(){t()})}else if(h.addEventListener){h.addEventListener("localized",function e(){h.removeEventListener("localized",e);t()})}}}}(window,document)},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.GenericScripting=void 0;t.docPropertiesLookup=n;var l=i(5);async function n(e){const t="",i=t.split("#")[0];let{info:n,metadata:s,contentDispositionFilename:r,contentLength:a}=await e.getMetadata();if(!a){const{length:o}=await e.getDownloadInfo();a=o}return{...n,baseURL:i,filesize:a,filename:r||(0,l.getPdfFilenameFromUrl)(t),metadata:s?.getRaw(),authors:s?.get("dc:creator"),numPages:e.numPages,URL:t}}class s{constructor(e){this._ready=(0,l.loadScript)(e,true).then(()=>{return window.pdfjsSandbox.QuickJSSandbox()})}async createSandbox(e){const t=await this._ready;t.create(e)}async dispatchEventInSandbox(e){const t=await this._ready;t.dispatchEvent(e)}async destroySandbox(){const e=await this._ready;e.nukeSandbox()}}t.GenericScripting=s},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PDFPrintService=l;var h=i(5);var n=i(2);var s=i(1);var r=i(46);let c=null;let a=null;function o(e,t,i,n,s,r){const a=c.scratchCanvas;const o=s/h.PixelsPerInch.PDF;a.width=Math.floor(n.width*o);a.height=Math.floor(n.height*o);const l=a.getContext("2d");l.save();l.fillStyle="rgb(255, 255, 255)";l.fillRect(0,0,a.width,a.height);l.restore();return t.getPage(i).then(function(e){const t={canvasContext:l,transform:[o,0,0,o,0,0],viewport:e.getViewport({scale:1,rotation:n.rotation}),intent:"print",annotationMode:h.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:r};return e.render(t).promise})}function l(e,t,i,n,s=null,r){this.pdfDocument=e;this.pagesOverview=t;this.printContainer=i;this._printResolution=n||150;this._optionalContentConfigPromise=s||e.getOptionalContentConfig();this.l10n=r;this.currentPage=-1;this.scratchCanvas=document.createElement("canvas")}l.prototype={layout(){this.throwIfInactive();const e=document.querySelector("body");e.setAttribute("data-pdfjsprinting",true);const t=this.pagesOverview.every(function(e){return e.width===this.pagesOverview[0].width&&e.height===this.pagesOverview[0].height},this);if(!t){console.warn("Not all pages have the same size. The printed "+"result may be incorrect!")}this.pageStyleSheet=document.createElement("style");const i=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+i.width+"pt "+i.height+"pt;}";e.appendChild(this.pageStyleSheet)},destroy(){if(c!==this){return}this.printContainer.textContent="";const e=document.querySelector("body");e.removeAttribute("data-pdfjsprinting");if(this.pageStyleSheet){this.pageStyleSheet.remove();this.pageStyleSheet=null}this.scratchCanvas.width=this.scratchCanvas.height=0;this.scratchCanvas=null;c=null;m().then(function(){if(a.active!=="printServiceOverlay"){return}a.close("printServiceOverlay")})},renderPages(){if(this.pdfDocument.isPureXfa){(0,r.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument);return Promise.resolve()}const n=this.pagesOverview.length;const s=(e,t)=>{this.throwIfInactive();if(++this.currentPage>=n){p(n,n,this.l10n);e();return}const i=this.currentPage;p(i,n,this.l10n);o(this,this.pdfDocument,i+1,this.pagesOverview[i],this._printResolution,this._optionalContentConfigPromise).then(this.useRenderedPage.bind(this)).then(function(){s(e,t)},t)};return new Promise(s)},useRenderedPage(){this.throwIfInactive();const i=document.createElement("img");const e=this.scratchCanvas;if("toBlob"in e&&!s.compatibilityParams.disableCreateObjectURL){e.toBlob(function(e){i.src=URL.createObjectURL(e)})}else{i.src=e.toDataURL()}const t=document.createElement("div");t.className="printedPage";t.appendChild(i);this.printContainer.appendChild(t);return new Promise(function(e,t){i.onload=e;i.onerror=t})},performPrint(){this.throwIfInactive();return new Promise(e=>{setTimeout(()=>{if(!this.active){e();return}d.call(window);setTimeout(e,20)},0)})},get active(){return this===c},throwIfInactive(){if(!this.active){throw new Error("This print request was cancelled or completed.")}}};const d=window.print;window.print=function(){if(c){console.warn("Ignored window.print() because of a pending print job.");return}m().then(function(){if(c){a.open("printServiceOverlay")}});try{u("beforeprint")}finally{if(!c){console.error("Expected print service to be initialized.");m().then(function(){if(a.active==="printServiceOverlay"){a.close("printServiceOverlay")}});return}const e=c;c.renderPages().then(function(){return e.performPrint()}).catch(function(){}).then(function(){if(e.active){f()}})}};function u(e){const t=document.createEvent("CustomEvent");t.initCustomEvent(e,false,false,"custom");window.dispatchEvent(t)}function f(){if(c){c.destroy();u("afterprint")}}function p(e,t,i){const n=document.getElementById("printServiceOverlay");const s=Math.round(100*e/t);const r=n.querySelector("progress");const a=n.querySelector(".relative-progress");r.value=s;i.get("print_progress_percent",{progress:s}).then(e=>{a.textContent=e})}window.addEventListener("keydown",function(e){if(e.keyCode===80&&(e.ctrlKey||e.metaKey)&&!e.altKey&&(!e.shiftKey||window.chrome||window.opera)){e.preventDefault();if(e.stopImmediatePropagation){e.stopImmediatePropagation()}else{e.stopPropagation()}}},true);if("onbeforeprint"in window){const _=function(e){if(e.detail!=="custom"&&e.stopImmediatePropagation){e.stopImmediatePropagation()}};window.addEventListener("beforeprint",_);window.addEventListener("afterprint",_)}let g;function m(){if(!g){a=n.PDFViewerApplication.overlayManager;if(!a){throw new Error("The overlay manager has not yet been initialized.")}g=a.register("printServiceOverlay",document.getElementById("printServiceOverlay"),f,true);document.getElementById("printCancel").onclick=f}return g}n.PDFPrintServiceFactory.instance={supportsPrinting:true,createPrintService(e,t,i,n,s,r){if(c){throw new Error("The print service is created and active.")}c=new l(e,t,i,n,s,r);return c}}},(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.getXfaHtmlForPrinting=n;var h=i(5);var c=i(18);var d=i(35);function n(e,t){const i=t.allXfaHtml;const n=new c.SimpleLinkService;const s=Math.round(h.PixelsPerInch.PDF_TO_CSS_UNITS*100)/100;for(const r of i.children){const a=document.createElement("div");a.className="xfaPrintedPage";e.appendChild(a);const o=new d.XfaLayerBuilder({pageDiv:a,pdfPage:null,annotationStorage:t.annotationStorage,linkService:n,xfaHtml:r});const l=(0,h.getXfaPageViewport)(r,{scale:s});o.render(l,"print")}}}];var s={};function o(e){var t=s[e];if(t!==undefined){return t.exports}var i=s[e]={exports:{}};n[e](i,i.exports,o);return i.exports}var l={};(()=>{var e=l;Object.defineProperty(e,"__esModule",{value:true});Object.defineProperty(e,"PDFViewerApplication",{enumerable:true,get:function(){return i.PDFViewerApplication}});Object.defineProperty(e,"PDFViewerApplicationOptions",{enumerable:true,get:function(){return t.AppOptions}});var t=o(1);var i=o(2);const n="2.12.313";const s="a2ae56f39";window.PDFViewerApplication=i.PDFViewerApplication;window.PDFViewerApplicationOptions=t.AppOptions;{o(39)}{o(45)}function r(){let e=null;e={container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")};return{appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),eventBus:null,toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),toolbarButtonContainer:document.getElementById("secondaryToolbarButtonContainer"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollPageButton:document.getElementById("scrollPage"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},sidebar:{outerContainer:document.getElementById("outerContainer"),viewerContainer:document.getElementById("viewerContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),outlineOptionsContainer:document.getElementById("outlineOptionsContainer"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),entireWordCheckbox:document.getElementById("findEntireWord"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{overlayName:"passwordOverlay",container:document.getElementById("passwordOverlay"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{overlayName:"documentPropertiesOverlay",container:document.getElementById("documentPropertiesOverlay"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},errorWrapper:e,printContainer:document.getElementById("printContainer"),openFileInputName:"fileInput",debuggerScriptPath:"./debugger.js"}}function a(){const e=r();const t=document.createEvent("CustomEvent");t.initCustomEvent("webviewerloaded",true,true,{source:window});try{parent.document.dispatchEvent(t)}catch(e){console.error(`webviewerloaded: ${e}`);document.dispatchEvent(t)}i.PDFViewerApplication.run(e)}if(document.blockUnblockOnload){document.blockUnblockOnload(true)}if(document.readyState==="interactive"||document.readyState==="complete"){a()}else{document.addEventListener("DOMContentLoaded",a,true)}})()})();